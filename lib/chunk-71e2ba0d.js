"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[469],{8011:(a,v,V)=>{if(Object.defineProperty(v,"__esModule",{value:!0}),void 0===globalThis.TextEncoder){globalThis.TextEncoder=function(){},TextEncoder.prototype.encode=function(a){for(var v=a.length,V=-1,Y="undefined"==typeof Uint8Array?new Array(1.5*v):new Uint8Array(3*v),P=0,K=0,M=0;M!==v;){if(P=a.charCodeAt(M),M+=1,P>=55296&&P<=56319){if(M===v){Y[V+=1]=239,Y[V+=1]=191,Y[V+=1]=189;break}if(!((K=a.charCodeAt(M))>=56320&&K<=57343)){Y[V+=1]=239,Y[V+=1]=191,Y[V+=1]=189;continue}if(M+=1,(P=1024*(P-55296)+K-56320+65536)>65535){Y[V+=1]=240|P>>>18,Y[V+=1]=128|P>>>12&63,Y[V+=1]=128|P>>>6&63,Y[V+=1]=128|63&P;continue}}P<=127?Y[V+=1]=0|P:P<=2047?(Y[V+=1]=192|P>>>6,Y[V+=1]=128|63&P):(Y[V+=1]=224|P>>>12,Y[V+=1]=128|P>>>6&63,Y[V+=1]=128|63&P)}return"undefined"!=typeof Uint8Array?Y.subarray(0,V+1):(Y.length=V+1,Y)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(Y){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==V.g?V.g:"undefined"!=typeof self?self:{};!function(a){var v=function(a){var v,V=Object.prototype,Y=V.hasOwnProperty,P="function"==typeof Symbol?Symbol:{},K=P.iterator||"@@iterator",M=P.asyncIterator||"@@asyncIterator",H=P.toStringTag||"@@toStringTag";function l(a,v,V){return Object.defineProperty(a,v,{value:V,enumerable:!0,configurable:!0,writable:!0}),a[v]}try{l({},"")}catch(a){l=function(a,v,V){return a[v]=V}}function c(a,v,V,Y){var P=v&&v.prototype instanceof b?v:b,K=Object.create(P.prototype),M=new W(Y||[]);return K._invoke=function(a,v,V){var Y=I;return function(P,K){if(Y===z)throw new Error("Generator is already running");if(Y===N){if("throw"===P)throw K;return C()}for(V.method=P,V.arg=K;;){var M=V.delegate;if(M){var H=G(M,V);if(H){if(H===Q)continue;return H}}if("next"===V.method)V.sent=V._sent=V.arg;else if("throw"===V.method){if(Y===I)throw Y=N,V.arg;V.dispatchException(V.arg)}else"return"===V.method&&V.abrupt("return",V.arg);Y=z;var j=d(a,v,V);if("normal"===j.type){if(Y=V.done?N:F,j.arg===Q)continue;return{value:j.arg,done:V.done}}"throw"===j.type&&(Y=N,V.method="throw",V.arg=j.arg)}}}(a,V,M),K}function d(a,v,V){try{return{type:"normal",arg:a.call(v,V)}}catch(a){return{type:"throw",arg:a}}}a.wrap=c;var I="suspendedStart",F="suspendedYield",z="executing",N="completed",Q={};function b(){}function y(){}function g(){}var j={};l(j,K,(function(){return this}));var U=Object.getPrototypeOf,D=U&&U(U(T([])));D&&D!==V&&Y.call(D,K)&&(j=D);var _=g.prototype=b.prototype=Object.create(j);function L(a){["next","throw","return"].forEach((function(v){l(a,v,(function(a){return this._invoke(v,a)}))}))}function x(a,v){function s(V,P,K,M){var H=d(a[V],a,P);if("throw"!==H.type){var I=H.arg,F=I.value;return F&&"object"==typeof F&&Y.call(F,"__await")?v.resolve(F.__await).then((function(a){s("next",a,K,M)}),(function(a){s("throw",a,K,M)})):v.resolve(F).then((function(a){I.value=a,K(I)}),(function(a){return s("throw",a,K,M)}))}M(H.arg)}var V;this._invoke=function(a,Y){function o(){return new v((function(v,V){s(a,Y,v,V)}))}return V=V?V.then(o,o):o()}}function G(a,V){var Y=a.iterator[V.method];if(Y===v){if(V.delegate=null,"throw"===V.method){if(a.iterator.return&&(V.method="return",V.arg=v,G(a,V),"throw"===V.method))return Q;V.method="throw",V.arg=new TypeError("The iterator does not provide a 'throw' method")}return Q}var P=d(Y,a.iterator,V.arg);if("throw"===P.type)return V.method="throw",V.arg=P.arg,V.delegate=null,Q;var K=P.arg;return K?K.done?(V[a.resultName]=K.value,V.next=a.nextLoc,"return"!==V.method&&(V.method="next",V.arg=v),V.delegate=null,Q):K:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,Q)}function S(a){var v={tryLoc:a[0]};1 in a&&(v.catchLoc=a[1]),2 in a&&(v.finallyLoc=a[2],v.afterLoc=a[3]),this.tryEntries.push(v)}function k(a){var v=a.completion||{};v.type="normal",delete v.arg,a.completion=v}function W(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(S,this),this.reset(!0)}function T(a){if(a){var V=a[K];if(V)return V.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var P=-1,M=function s(){for(;++P<a.length;)if(Y.call(a,P))return s.value=a[P],s.done=!1,s;return s.value=v,s.done=!0,s};return M.next=M}}return{next:C}}function C(){return{value:v,done:!0}}return y.prototype=g,l(_,"constructor",g),l(g,"constructor",y),y.displayName=l(g,H,"GeneratorFunction"),a.isGeneratorFunction=function(a){var v="function"==typeof a&&a.constructor;return!!v&&(v===y||"GeneratorFunction"===(v.displayName||v.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,l(a,H,"GeneratorFunction")),a.prototype=Object.create(_),a},a.awrap=function(a){return{__await:a}},L(x.prototype),l(x.prototype,M,(function(){return this})),a.AsyncIterator=x,a.async=function(v,V,Y,P,K){void 0===K&&(K=Promise);var M=new x(c(v,V,Y,P),K);return a.isGeneratorFunction(V)?M:M.next().then((function(a){return a.done?a.value:M.next()}))},L(_),l(_,H,"Generator"),l(_,K,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),a.keys=function(a){var v=[];for(var V in a)v.push(V);return v.reverse(),function s(){for(;v.length;){var V=v.pop();if(V in a)return s.value=V,s.done=!1,s}return s.done=!0,s}},a.values=T,W.prototype={constructor:W,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(k),!a)for(var V in this)"t"===V.charAt(0)&&Y.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=v)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var V=this;function i(Y,P){return M.type="throw",M.arg=a,V.next=Y,P&&(V.method="next",V.arg=v),!!P}for(var P=this.tryEntries.length-1;P>=0;--P){var K=this.tryEntries[P],M=K.completion;if("root"===K.tryLoc)return i("end");if(K.tryLoc<=this.prev){var H=Y.call(K,"catchLoc"),I=Y.call(K,"finallyLoc");if(H&&I){if(this.prev<K.catchLoc)return i(K.catchLoc,!0);if(this.prev<K.finallyLoc)return i(K.finallyLoc)}else if(H){if(this.prev<K.catchLoc)return i(K.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return i(K.finallyLoc)}}}},abrupt:function(a,v){for(var V=this.tryEntries.length-1;V>=0;--V){var P=this.tryEntries[V];if(P.tryLoc<=this.prev&&Y.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var K=P;break}}K&&("break"===a||"continue"===a)&&K.tryLoc<=v&&v<=K.finallyLoc&&(K=null);var M=K?K.completion:{};return M.type=a,M.arg=v,K?(this.method="next",this.next=K.finallyLoc,Q):this.complete(M)},complete:function(a,v){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&v&&(this.next=v),Q},finish:function(a){for(var v=this.tryEntries.length-1;v>=0;--v){var V=this.tryEntries[v];if(V.finallyLoc===a)return this.complete(V.completion,V.afterLoc),k(V),Q}},catch:function(a){for(var v=this.tryEntries.length-1;v>=0;--v){var V=this.tryEntries[v];if(V.tryLoc===a){var Y=V.completion;if("throw"===Y.type){var P=Y.arg;k(V)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(a,V,Y){return this.delegate={iterator:T(a),resultName:V,nextLoc:Y},"next"===this.method&&(this.arg=v),Q}},a}({});try{globalThis.regeneratorRuntime=v}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}}();const P={CROQUET_VERSION:"1.1.0-21"},K=window.location.hostname.endsWith("croquet.studio");let M="",H="";function o(a,v){if(v)for(const V of v.split("&")){const v=V.split("="),Y=v[0];let P=!0;if(v.length>1&&(P=decodeURIComponent(v.slice(1).join("=")),P.match(/^(true|false|null|[0-9.]*|["[{].*)$/)))try{P=JSON.parse(P)}catch(a){"["===P[0]&&(P=P.slice(1,-1).split(","))}a[Y]=P}}const I=new class{constructor(){this.getSession(),o(this,window.location.search.slice(1)),o(this,K?window.location.hash.slice(1):H),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}has(a,v,V){"boolean"!=typeof V&&(V=this.isHost(V));const Y=this[a];if("string"!=typeof Y)return V;const P=Y.split(",");return!0===V&&(v=`no${v}`),v.endsWith("s")&&(v=v.slice(0,-1)),P.includes(v)||P.includes(`${v}s`)?!V:V}getSession(){if(K){const a=/^\/([^/]+)\/(.*)$/,v=window.location.pathname.match(a);if(v)return M=v[1],v[2]}else{const a=/^#([^&]+)&?(.*)$/,v=window.location.hash.match(a);if(v)return v[1].includes("=")?(H=`${v[1]}&${v[2]}`,""):(H=v[2],v[1])}return"string"==typeof this.session?(H=window.location.hash.slice(1),this.session):""}setSession(a){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==K&&this.getSession();const{search:V,hash:Y}=window.location,P=K?`/${M}/${a}${V}${Y}`:`#${a}${H?"&"+H:""}`;v?window.history.replaceState({},"",P):window.history.pushState({},"",P)}isHost(a){const v=window.location.hostname;return v===a||"localhost"===a&&(!!v.endsWith(".ngrok.io")||(!("croquet.io"!==v||!window.location.pathname.match(/^\/(dev|files)\//))||["127.0.0.1","[::1]"].includes(v)))}isLocalhost(){return this.isHost("localhost")}};var F,z,N,Q={exports:{}};z=Y,N=function(a){var e=function(a){return new e.lib.init(a)};function s(a,v){return v.offset[a]?isNaN(v.offset[a])?v.offset[a]:v.offset[a]+"px":"0px"}function n(a,v){return!(!a||"string"!=typeof v||!(a.className&&a.className.trim().split(/\s+/gi).indexOf(v)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},e.lib=e.prototype={toastify:"1.11.2",constructor:e,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||e.defaults.text,this.options.node=a.node||e.defaults.node,this.options.duration=0===a.duration?0:a.duration||e.defaults.duration,this.options.selector=a.selector||e.defaults.selector,this.options.callback=a.callback||e.defaults.callback,this.options.destination=a.destination||e.defaults.destination,this.options.newWindow=a.newWindow||e.defaults.newWindow,this.options.close=a.close||e.defaults.close,this.options.gravity="bottom"===a.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=a.positionLeft||e.defaults.positionLeft,this.options.position=a.position||e.defaults.position,this.options.backgroundColor=a.backgroundColor||e.defaults.backgroundColor,this.options.avatar=a.avatar||e.defaults.avatar,this.options.className=a.className||e.defaults.className,this.options.stopOnFocus=void 0===a.stopOnFocus?e.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||e.defaults.onClick,this.options.offset=a.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==a.escapeMarkup?a.escapeMarkup:e.defaults.escapeMarkup,this.options.style=a.style||e.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");for(var v in a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)a.style[v]=this.options.style[v];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,""!==this.options.avatar){var V=document.createElement("img");V.src=this.options.avatar,V.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?a.appendChild(V):a.insertAdjacentElement("afterbegin",V)}if(!0===this.options.close){var Y=document.createElement("span");Y.innerHTML="&#10006;",Y.className="toast-close",Y.addEventListener("click",function(a){a.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var P=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&P>360?a.insertAdjacentElement("afterbegin",Y):a.appendChild(Y)}if(this.options.stopOnFocus&&this.options.duration>0){var K=this;a.addEventListener("mouseover",(function(v){window.clearTimeout(a.timeOutValue)})),a.addEventListener("mouseleave",(function(){a.timeOutValue=window.setTimeout((function(){K.removeElement(a)}),K.options.duration)}))}if(void 0!==this.options.destination&&a.addEventListener("click",function(a){a.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&a.addEventListener("click",function(a){a.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var M=s("x",this.options),H=s("y",this.options),I="left"==this.options.position?M:"-"+M,F="toastify-top"==this.options.gravity?H:"-"+H;a.style.transform="translate("+I+","+F+")"}return a},showToast:function(){var a;if(this.toastElement=this.buildToast(),!(a="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var v=e.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,v),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var a,v={top:15,bottom:15},V={top:15,bottom:15},Y={top:15,bottom:15},P=document.getElementsByClassName("toastify"),K=0;K<P.length;K++){a=!0===n(P[K],"toastify-top")?"toastify-top":"toastify-bottom";var M=P[K].offsetHeight;a=a.substr(9,a.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(P[K].style[a]=Y[a]+"px",Y[a]+=M+15):!0===n(P[K],"toastify-left")?(P[K].style[a]=v[a]+"px",v[a]+=M+15):(P[K].style[a]=V[a]+"px",V[a]+=M+15)}return this},e.lib.init.prototype=e.lib,e},(F=Q).exports?F.exports=N():z.Toastify=N();var j=Q.exports,U={exports:{}};!function(a){!function(v,V,Y){var P,K=256,M=Y.pow(K,6),H=Y.pow(2,52),I=2*H,F=255;function d(a,F,z){var N=[],Q=p(m((F=1==F?{entropy:!0}:F||{}).entropy?[a,f(V)]:null==a?function(){try{var a;return P&&(a=P.randomBytes)?a=a(K):(a=new Uint8Array(K),(v.crypto||v.msCrypto).getRandomValues(a)),f(a)}catch(a){var Y=v.navigator,M=Y&&Y.plugins;return[+new Date,v,M,v.screen,f(V)]}}():a,3),N),j=new h(N),Z=function(){for(var a=j.g(6),v=M,V=0;a<H;)a=(a+V)*K,v*=K,V=j.g(1);for(;a>=I;)a/=2,v/=2,V>>>=1;return(a+V)/v};return Z.int32=function(){return 0|j.g(4)},Z.quick=function(){return j.g(4)/4294967296},Z.double=Z,p(f(j.S),V),(F.pass||z||function(a,v,V,P){return P&&(P.S&&u(P,j),a.state=function(){return u(j,{})}),V?(Y.random=a,v):a})(Z,Q,"global"in F?F.global:this==Y,F.state)}function h(a){var v,V=a.length,Y=this,P=0,M=Y.i=Y.j=0,H=Y.S=[];for(V||(a=[V++]);P<K;)H[P]=P++;for(P=0;P<K;P++)H[P]=H[M=F&M+a[P%V]+(v=H[P])],H[M]=v;(Y.g=function(a){for(var v,V=0,P=Y.i,M=Y.j,H=Y.S;a--;)v=H[P=F&P+1],V=V*K+H[F&(H[P]=H[M=F&M+v])+(H[M]=v)];return Y.i=P,Y.j=M,V})(K)}function u(a,v){return v.i=a.i,v.j=a.j,v.S=a.S.slice(),v}function m(a,v){var V,Y=[],P=typeof a;if(v&&"object"==P)for(V in a)try{Y.push(m(a[V],v-1))}catch(a){}return Y.length?Y:"string"==P?a:a+"\0"}function p(a,v){for(var V,Y=a+"",P=0;P<Y.length;)v[F&P]=F&(V^=19*v[F&P])+Y.charCodeAt(P++);return f(v)}function f(a){return String.fromCharCode.apply(0,a)}if(p(Y.random(),V),a.exports){a.exports=d;try{P=void 0}catch(v){}}else Y.seedrandom=d}("undefined"!=typeof self?self:Y,[],Math)}(U);var D,_=U.exports;!function(){function t(v){this.mode=a.MODE_8BIT_BYTE,this.data=v,this.parsedData=[];for(var V=0,Y=this.data.length;V<Y;V++){var P=[],K=this.data.charCodeAt(V);K>65536?(P[0]=240|(1835008&K)>>>18,P[1]=128|(258048&K)>>>12,P[2]=128|(4032&K)>>>6,P[3]=128|63&K):K>2048?(P[0]=224|(61440&K)>>>12,P[1]=128|(4032&K)>>>6,P[2]=128|63&K):K>128?(P[0]=192|(1984&K)>>>6,P[1]=128|63&K):P[0]=K,this.parsedData.push(P)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(a,v){this.typeNumber=a,this.errorCorrectLevel=v,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(a){return this.parsedData.length},write:function(a){for(var v=0,V=this.parsedData.length;v<V;v++)a.put(this.parsedData[v],8)}},e.prototype={addData:function(a){var v=new t(a);this.dataList.push(v),this.dataCache=null},isDark:function(a,v){if(a<0||this.moduleCount<=a||v<0||this.moduleCount<=v)throw new Error(a+","+v);return this.modules[a][v]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,v){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var V=0;V<this.moduleCount;V++){this.modules[V]=new Array(this.moduleCount);for(var Y=0;Y<this.moduleCount;Y++)this.modules[V][Y]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,v),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,v)},setupPositionProbePattern:function(a,v){for(var V=-1;V<=7;V++)if(!(a+V<=-1||this.moduleCount<=a+V))for(var Y=-1;Y<=7;Y++)v+Y<=-1||this.moduleCount<=v+Y||(this.modules[a+V][v+Y]=0<=V&&V<=6&&(0==Y||6==Y)||0<=Y&&Y<=6&&(0==V||6==V)||2<=V&&V<=4&&2<=Y&&Y<=4)},getBestMaskPattern:function(){for(var a=0,v=0,Y=0;Y<8;Y++){this.makeImpl(!0,Y);var P=V.getLostPoint(this);(0==Y||a>P)&&(a=P,v=Y)}return v},createMovieClip:function(a,v,V){var Y=a.createEmptyMovieClip(v,V);this.make();for(var P=0;P<this.modules.length;P++)for(var K=1*P,M=0;M<this.modules[P].length;M++){var H=1*M;this.modules[P][M]&&(Y.beginFill(0,100),Y.moveTo(H,K),Y.lineTo(H+1,K),Y.lineTo(H+1,K+1),Y.lineTo(H,K+1),Y.endFill())}return Y},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0);for(var v=8;v<this.moduleCount-8;v++)null==this.modules[6][v]&&(this.modules[6][v]=v%2==0)},setupPositionAdjustPattern:function(){for(var a=V.getPatternPosition(this.typeNumber),v=0;v<a.length;v++)for(var Y=0;Y<a.length;Y++){var P=a[v],K=a[Y];if(null==this.modules[P][K])for(var M=-2;M<=2;M++)for(var H=-2;H<=2;H++)this.modules[P+M][K+H]=-2==M||2==M||-2==H||2==H||0==M&&0==H}},setupTypeNumber:function(a){for(var v=V.getBCHTypeNumber(this.typeNumber),Y=0;Y<18;Y++){var P=!a&&1==(v>>Y&1);this.modules[Math.floor(Y/3)][Y%3+this.moduleCount-8-3]=P}for(Y=0;Y<18;Y++)P=!a&&1==(v>>Y&1),this.modules[Y%3+this.moduleCount-8-3][Math.floor(Y/3)]=P},setupTypeInfo:function(a,v){for(var Y=this.errorCorrectLevel<<3|v,P=V.getBCHTypeInfo(Y),K=0;K<15;K++){var M=!a&&1==(P>>K&1);K<6?this.modules[K][8]=M:K<8?this.modules[K+1][8]=M:this.modules[this.moduleCount-15+K][8]=M}for(K=0;K<15;K++)M=!a&&1==(P>>K&1),K<8?this.modules[8][this.moduleCount-K-1]=M:K<9?this.modules[8][15-K-1+1]=M:this.modules[8][15-K-1]=M;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,v){for(var Y=-1,P=this.moduleCount-1,K=7,M=0,H=this.moduleCount-1;H>0;H-=2)for(6==H&&H--;;){for(var I=0;I<2;I++)if(null==this.modules[P][H-I]){var F=!1;M<a.length&&(F=1==(a[M]>>>K&1)),V.getMask(v,P,H-I)&&(F=!F),this.modules[P][H-I]=F,-1==--K&&(M++,K=7)}if((P+=Y)<0||this.moduleCount<=P){P-=Y,Y=-Y;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(a,v,Y){for(var P=y.getRSBlocks(a,v),K=new g,M=0;M<Y.length;M++){var H=Y[M];K.put(H.mode,4),K.put(H.getLength(),V.getLengthInBits(H.mode,a)),H.write(K)}var I=0;for(M=0;M<P.length;M++)I+=P[M].dataCount;if(K.getLengthInBits()>8*I)throw new Error("code length overflow. ("+K.getLengthInBits()+">"+8*I+")");for(K.getLengthInBits()+4<=8*I&&K.put(0,4);K.getLengthInBits()%8!=0;)K.putBit(!1);for(;!(K.getLengthInBits()>=8*I||(K.put(e.PAD0,8),K.getLengthInBits()>=8*I));)K.put(e.PAD1,8);return e.createBytes(K,P)},e.createBytes=function(a,v){for(var Y=0,P=0,K=0,M=new Array(v.length),H=new Array(v.length),I=0;I<v.length;I++){var F=v[I].dataCount,z=v[I].totalCount-F;P=Math.max(P,F),K=Math.max(K,z),M[I]=new Array(F);for(var N=0;N<M[I].length;N++)M[I][N]=255&a.buffer[N+Y];Y+=F;var Q=V.getErrorCorrectPolynomial(z),j=new b(M[I],Q.getLength()-1).mod(Q);for(H[I]=new Array(Q.getLength()-1),N=0;N<H[I].length;N++){var U=N+j.getLength()-H[I].length;H[I][N]=U>=0?j.get(U):0}}var D=0;for(N=0;N<v.length;N++)D+=v[N].totalCount;var _=new Array(D),E=0;for(N=0;N<P;N++)for(I=0;I<v.length;I++)N<M[I].length&&(_[E++]=M[I][N]);for(N=0;N<K;N++)for(I=0;I<v.length;I++)N<H[I].length&&(_[E++]=H[I][N]);return _};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},v={L:1,M:0,Q:3,H:2},V={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var v=a<<10;V.getBCHDigit(v)-V.getBCHDigit(V.G15)>=0;)v^=V.G15<<V.getBCHDigit(v)-V.getBCHDigit(V.G15);return(a<<10|v)^V.G15_MASK},getBCHTypeNumber:function(a){for(var v=a<<12;V.getBCHDigit(v)-V.getBCHDigit(V.G18)>=0;)v^=V.G18<<V.getBCHDigit(v)-V.getBCHDigit(V.G18);return a<<12|v},getBCHDigit:function(a){for(var v=0;0!=a;)v++,a>>>=1;return v},getPatternPosition:function(a){return V.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,v,V){switch(a){case 0:return(v+V)%2==0;case 1:return v%2==0;case 2:return V%3==0;case 3:return(v+V)%3==0;case 4:return(Math.floor(v/2)+Math.floor(V/3))%2==0;case 5:return v*V%2+v*V%3==0;case 6:return(v*V%2+v*V%3)%2==0;case 7:return(v*V%3+(v+V)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var v=new b([1],0),V=0;V<a;V++)v=v.multiply(new b([1,Y.gexp(V)],0));return v},getLengthInBits:function(v,V){if(1<=V&&V<10)switch(v){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+v)}else if(V<27)switch(v){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+v)}else{if(!(V<41))throw new Error("type:"+V);switch(v){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+v)}}},getLostPoint:function(a){for(var v=a.getModuleCount(),V=0,Y=0;Y<v;Y++)for(var P=0;P<v;P++){for(var K=0,M=a.isDark(Y,P),H=-1;H<=1;H++)if(!(Y+H<0||v<=Y+H))for(var I=-1;I<=1;I++)P+I<0||v<=P+I||0==H&&0==I||M==a.isDark(Y+H,P+I)&&K++;K>5&&(V+=3+K-5)}for(Y=0;Y<v-1;Y++)for(P=0;P<v-1;P++){var F=0;a.isDark(Y,P)&&F++,a.isDark(Y+1,P)&&F++,a.isDark(Y,P+1)&&F++,a.isDark(Y+1,P+1)&&F++,0!=F&&4!=F||(V+=3)}for(Y=0;Y<v;Y++)for(P=0;P<v-6;P++)a.isDark(Y,P)&&!a.isDark(Y,P+1)&&a.isDark(Y,P+2)&&a.isDark(Y,P+3)&&a.isDark(Y,P+4)&&!a.isDark(Y,P+5)&&a.isDark(Y,P+6)&&(V+=40);for(P=0;P<v;P++)for(Y=0;Y<v-6;Y++)a.isDark(Y,P)&&!a.isDark(Y+1,P)&&a.isDark(Y+2,P)&&a.isDark(Y+3,P)&&a.isDark(Y+4,P)&&!a.isDark(Y+5,P)&&a.isDark(Y+6,P)&&(V+=40);var z=0;for(P=0;P<v;P++)for(Y=0;Y<v;Y++)a.isDark(Y,P)&&z++;return V+Math.abs(100*z/v/v-50)/5*10}},Y={glog:function(a){if(a<1)throw new Error("glog("+a+")");return Y.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return Y.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},P=0;P<8;P++)Y.EXP_TABLE[P]=1<<P;for(P=8;P<256;P++)Y.EXP_TABLE[P]=Y.EXP_TABLE[P-4]^Y.EXP_TABLE[P-5]^Y.EXP_TABLE[P-6]^Y.EXP_TABLE[P-8];for(P=0;P<255;P++)Y.LOG_TABLE[Y.EXP_TABLE[P]]=P;function b(a,v){if(null==a.length)throw new Error(a.length+"/"+v);for(var V=0;V<a.length&&0==a[V];)V++;this.num=new Array(a.length-V+v);for(var Y=0;Y<a.length-V;Y++)this.num[Y]=a[Y+V]}function y(a,v){this.totalCount=a,this.dataCount=v}function g(){this.buffer=[],this.length=0}b.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var v=new Array(this.getLength()+a.getLength()-1),V=0;V<this.getLength();V++)for(var P=0;P<a.getLength();P++)v[V+P]^=Y.gexp(Y.glog(this.get(V))+Y.glog(a.get(P)));return new b(v,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var v=Y.glog(this.get(0))-Y.glog(a.get(0)),V=new Array(this.getLength()),P=0;P<this.getLength();P++)V[P]=this.get(P);for(P=0;P<a.getLength();P++)V[P]^=Y.gexp(Y.glog(a.get(P))+v);return new b(V,0).mod(a)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(a,v){var V=y.getRsBlockTable(a,v);if(null==V)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+v);for(var Y=V.length/3,P=[],K=0;K<Y;K++)for(var M=V[3*K+0],H=V[3*K+1],I=V[3*K+2],F=0;F<M;F++)P.push(new y(H,I));return P},y.getRsBlockTable=function(a,V){switch(V){case v.L:return y.RS_BLOCK_TABLE[4*(a-1)+0];case v.M:return y.RS_BLOCK_TABLE[4*(a-1)+1];case v.Q:return y.RS_BLOCK_TABLE[4*(a-1)+2];case v.H:return y.RS_BLOCK_TABLE[4*(a-1)+3];default:return}},g.prototype={get:function(a){var v=Math.floor(a/8);return 1==(this.buffer[v]>>>7-a%8&1)},put:function(a,v){for(var V=0;V<v;V++)this.putBit(1==(a>>>v-V-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var v=Math.floor(this.length/8);this.buffer.length<=v&&this.buffer.push(0),a&&(this.buffer[v]|=128>>>this.length%8),this.length++}};var K=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],M=function(){var t=function(a,v){this._bIsPainted=!1,this._htOption=v,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=v.width,this._elCanvas.height=v.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return t.prototype.draw=function(a){var v=this._oContext,V=this._htOption,Y=a.getModuleCount(),P=V.width/Y,K=V.height/Y,M=Math.round(P),H=Math.round(K);this.clear();for(var I=0;I<Y;I++)for(var F=0;F<Y;F++){var z=a.isDark(I,F),N=F*P,Q=I*K;v.strokeStyle=z?V.colorDark:V.colorLight,v.lineWidth=1,v.fillStyle=z?V.colorDark:V.colorLight,v.fillRect(N,Q,P,K),v.strokeRect(Math.floor(N)+.5,Math.floor(Q)+.5,M,H),v.strokeRect(Math.ceil(N)-.5,Math.ceil(Q)-.5,M,H)}this._bIsPainted=!0},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},t}();D=function(a,V){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:v.H},"string"==typeof V&&(V={text:V}),V)for(var Y in V)this._htOption[Y]=V[Y];"string"==typeof a&&(a=document.getElementById(a)),this._htOption.useSVG&&(M=svgDrawer),this._el=a,this._oQRCode=null,this._oDrawing=new M(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},D.prototype.makeCode=function(a){this._oQRCode=new e(function X(a,V){for(var Y=1,P=function(a){var v=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return v.length+(v.length!=a?3:0)}(a),M=0,H=K.length;M<=H;M++){var I=0;switch(V){case v.L:I=K[M][0];break;case v.M:I=K[M][1];break;case v.Q:I=K[M][2];break;case v.H:I=K[M][3]}if(P<=I)break;Y++}if(Y>K.length)throw new Error("Too long data");return Y}(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},D.prototype.clear=function(){this._oDrawing.clear()},D.prototype.getCanvas=function(){for(let a=0;a<this._el.children.length;a++){const v=this._el.children[a];if("CANVAS"===v.tagName)return v}return null},D.CorrectLevel=v}();var E,B=D,y=function(a,v){v||(v={}),"function"==typeof v&&(v={cmp:v});var V,Y="boolean"==typeof v.cycles&&v.cycles,P=v.cmp&&(V=v.cmp,function(a){return function(v,Y){var P={key:v,value:a[v]},K={key:Y,value:a[Y]};return V(P,K)}}),K=[];return function t(a){if(a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),void 0!==a){if("number"==typeof a)return isFinite(a)?""+a:"null";if("object"!=typeof a)return JSON.stringify(a);var v,V;if(Array.isArray(a)){for(V="[",v=0;v<a.length;v++)v&&(V+=","),V+=t(a[v])||"null";return V+"]"}if(null===a)return"null";if(-1!==K.indexOf(a)){if(Y)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var M=K.push(a)-1,H=Object.keys(a).sort(P&&P(a));for(V="",v=0;v<H.length;v++){var I=H[v],F=t(a[I]);F&&(V&&(V+=","),V+=JSON.stringify(I)+":"+F)}return K.splice(M,1),"{"+V+"}"}}(a)},O={exports:{}};O.exports=(E=E||function(a,v){var P;if("undefined"!=typeof window&&window.crypto&&(P=window.crypto),"undefined"!=typeof self&&self.crypto&&(P=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(P=globalThis.crypto),!P&&"undefined"!=typeof window&&window.msCrypto&&(P=window.msCrypto),!P&&void 0!==Y&&Y.crypto&&(P=Y.crypto),!P)try{P=V(3700)}catch(a){}var i=function(){if(P){if("function"==typeof P.getRandomValues)try{return P.getRandomValues(new Uint32Array(1))[0]}catch(a){}if("function"==typeof P.randomBytes)try{return P.randomBytes(4).readInt32LE()}catch(a){}}throw new Error("Native crypto module could not be used to get secure random number.")},K=Object.create||function(){function t(){}return function(a){var v;return t.prototype=a,v=new t,t.prototype=null,v}}(),M={},H=M.lib={},I=H.Base={extend:function(a){var v=K(this);return a&&v.mixIn(a),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var v in a)a.hasOwnProperty(v)&&(this[v]=a[v]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},F=H.WordArray=I.extend({init:function(a,v){a=this.words=a||[],this.sigBytes=null!=v?v:4*a.length},toString:function(a){return(a||N).stringify(this)},concat:function(a){var v=this.words,V=a.words,Y=this.sigBytes,P=a.sigBytes;if(this.clamp(),Y%4)for(var K=0;K<P;K++){var M=V[K>>>2]>>>24-K%4*8&255;v[Y+K>>>2]|=M<<24-(Y+K)%4*8}else for(var H=0;H<P;H+=4)v[Y+H>>>2]=V[H>>>2];return this.sigBytes+=P,this},clamp:function(){var v=this.words,V=this.sigBytes;v[V>>>2]&=4294967295<<32-V%4*8,v.length=a.ceil(V/4)},clone:function(){var a=I.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var v=[],V=0;V<a;V+=4)v.push(i());return new F.init(v,a)}}),z=M.enc={},N=z.Hex={stringify:function(a){for(var v=a.words,V=a.sigBytes,Y=[],P=0;P<V;P++){var K=v[P>>>2]>>>24-P%4*8&255;Y.push((K>>>4).toString(16)),Y.push((15&K).toString(16))}return Y.join("")},parse:function(a){for(var v=a.length,V=[],Y=0;Y<v;Y+=2)V[Y>>>3]|=parseInt(a.substr(Y,2),16)<<24-Y%8*4;return new F.init(V,v/2)}},Q=z.Latin1={stringify:function(a){for(var v=a.words,V=a.sigBytes,Y=[],P=0;P<V;P++){var K=v[P>>>2]>>>24-P%4*8&255;Y.push(String.fromCharCode(K))}return Y.join("")},parse:function(a){for(var v=a.length,V=[],Y=0;Y<v;Y++)V[Y>>>2]|=(255&a.charCodeAt(Y))<<24-Y%4*8;return new F.init(V,v)}},j=z.Utf8={stringify:function(a){try{return decodeURIComponent(escape(Q.stringify(a)))}catch(a){throw new Error("Malformed UTF-8 data")}},parse:function(a){return Q.parse(unescape(encodeURIComponent(a)))}},U=H.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new F.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(v){var V,Y=this._data,P=Y.words,K=Y.sigBytes,M=this.blockSize,H=K/(4*M),I=(H=v?a.ceil(H):a.max((0|H)-this._minBufferSize,0))*M,z=a.min(4*I,K);if(I){for(var N=0;N<I;N+=M)this._doProcessBlock(P,N);V=P.splice(0,I),Y.sigBytes-=z}return new F.init(V,z)},clone:function(){var a=I.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});H.Hasher=U.extend({cfg:I.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(v,V){return new a.init(V).finalize(v)}},_createHmacHelper:function(a){return function(v,V){return new D.HMAC.init(a,V).finalize(v)}}});var D=M.algo={};return M}(Math),E);var A={exports:{}}.exports=function(a){return function(){if("function"==typeof ArrayBuffer){var v=a.lib.WordArray,V=v.init,Y=v.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var v=a.byteLength,Y=[],P=0;P<v;P++)Y[P>>>2]|=a[P]<<24-P%4*8;V.call(this,Y,v)}else V.apply(this,arguments)};Y.prototype=v}}(),a.lib.WordArray}(O.exports),st={exports:{}}.exports=function(a){return function(v){var V=a,Y=V.lib,P=Y.WordArray,K=Y.Hasher,M=V.algo,H=[],I=[];!function(){function t(a){for(var V=v.sqrt(a),Y=2;Y<=V;Y++)if(!(a%Y))return!1;return!0}function s(a){return 4294967296*(a-(0|a))|0}for(var a=2,V=0;V<64;)t(a)&&(V<8&&(H[V]=s(v.pow(a,.5))),I[V]=s(v.pow(a,1/3)),V++),a++}();var F=[],z=M.SHA256=K.extend({_doReset:function(){this._hash=new P.init(H.slice(0))},_doProcessBlock:function(a,v){for(var V=this._hash.words,Y=V[0],P=V[1],K=V[2],M=V[3],H=V[4],z=V[5],N=V[6],Q=V[7],j=0;j<64;j++){if(j<16)F[j]=0|a[v+j];else{var U=F[j-15],D=(U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3,_=F[j-2],E=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;F[j]=D+F[j-7]+E+F[j-16]}var B=Y&P^Y&K^P&K,O=(Y<<30|Y>>>2)^(Y<<19|Y>>>13)^(Y<<10|Y>>>22),A=Q+((H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25))+(H&z^~H&N)+I[j]+F[j];Q=N,N=z,z=H,H=M+A|0,M=K,K=P,P=Y,Y=A+(O+B)|0}V[0]=V[0]+Y|0,V[1]=V[1]+P|0,V[2]=V[2]+K|0,V[3]=V[3]+M|0,V[4]=V[4]+H|0,V[5]=V[5]+z|0,V[6]=V[6]+N|0,V[7]=V[7]+Q|0},_doFinalize:function(){var a=this._data,V=a.words,Y=8*this._nDataBytes,P=8*a.sigBytes;return V[P>>>5]|=128<<24-P%32,V[14+(P+64>>>9<<4)]=v.floor(Y/4294967296),V[15+(P+64>>>9<<4)]=Y,a.sigBytes=4*V.length,this._process(),this._hash},clone:function(){var a=K.clone.call(this);return a._hash=this._hash.clone(),a}});V.SHA256=K._createHelper(z),V.HmacSHA256=K._createHmacHelper(z)}(Math),a.SHA256}(O.exports);const it="node"===P.CROQUET_PLATFORM;let nt;function G(a){const v=a.sigBytes,V=a.words,Y=new Uint8Array(v);let P=0,K=0;for(;P<v;){const a=V[K++];if(Y[P++]=(4278190080&a)>>>24,P===v)break;if(Y[P++]=(16711680&a)>>>16,P===v)break;if(Y[P++]=(65280&a)>>>8,P===v)break;Y[P++]=255&a}return Y}function S(a){function e(a){const v=a.indexOf("{"),V=a.lastIndexOf("}");if(-1===v||-1===V||V<v)return a;const Y=a.slice(0,v).replace(/\s+/g," ").replace(/\s\(/,"("),P=a.slice(v+1,V);return`${Y.trim()}{${P.trim()}}`}let v=e(""+a);if(!v.startsWith("class")){const V=a.prototype;V&&(v+=Object.getOwnPropertyNames(V).map((a=>`${a}:${e(""+V[a])}`)).join(""))}return v}function k(a){return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function W(){return I.has("debug","hashing",!1)}nt=globalThis.crypto&&globalThis.crypto.subtle&&"function"==typeof globalThis.crypto.subtle.digest?globalThis.crypto.subtle.digest.bind(globalThis.crypto.subtle):(a,v)=>{if("SHA-256"!==a)throw Error("Croquet: only SHA-256 available");const V=A.create(v);return G(st(V)).buffer};const ot={},rt=new TextEncoder;async function R(a){const v=rt.encode(a),V=await async function(a){return 0===a.length?"47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU":k(await nt("SHA-256",a))}(v);return W()&&(ot[V]={string:a,buffer:v}),V}const lt=[],at={},ct=new Set,dt=Date.now();"undefined"==typeof performance&&(window.performance={now:()=>Date.now()-dt});const ut=["simulate","update","render","snapshot"],mt={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"};let pt,Zt,Gt=null,St=null,Vt=null,Yt=0,Ct=null,Kt=null;const Rt=[];let kt=0,Qt=!1,jt=tt(0);const Ut=1e3/60;function $(a){return 20*(1-a/Ut)+60}function tt(a){return{start:a,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:Qt}}function et(a){jt.total=a-jt.start;const v=Math.min(120,window.innerWidth);if(Rt.length>=v&&Rt.splice(0,Rt.length-v+1),Rt.push(jt),Rt.length<=1)return;if(!Gt)return;if(0===Gt.offsetHeight)return;const V=Rt.slice(1).filter((a=>a.total)),Y=V.map((a=>a.total)).reduce(((a,v)=>a+v),0)/V.length,P=Math.max(...V.map((a=>a.total)));Math.max(...V.map((a=>Math.max(a.backlog,a.network)))),kt=1e3,function(a,v){Kt.globalCompositeOperation="copy",Kt.fillStyle="rgb(255, 255, 255, 0)",Kt.fillRect(0,0,Ct.width,Ct.height),Kt.fillStyle="rgb(0, 0, 0, 1)",Kt.globalCompositeOperation="source-over";let V=`${jt.users} users, ${Math.round(1e3/a)} fps`;v>70&&(V+=` ${Math.ceil(v).toLocaleString()}ms`),Kt.fillText(V,2,15),V=jt.backlog<100&&jt.activity<1e3?`latency: ${jt.latency} ms`:`backlog: ${jt.backlog<100?"0.0":(jt.backlog/1e3).toFixed(1)} s`,Kt.fillText(V,2,33)}(Y,P),pt||function q(a){pt=function(a){const v=document.createElement("canvas");return v.width=a.width,v.height=a.height,v.style.width="100%",v.style.position="absolute",v.style.left="0px",Gt.querySelector("#innerDiv").appendChild(v),v}(a),Zt=pt.getContext("2d"),Zt.strokeStyle="rgba(255, 255, 255, 0.5)";for(let a=0;a<60;a+=Ut){const v=$(a);Zt.moveTo(0,v),Zt.lineTo(pt.width,v),Zt.stroke()}}(St),Yt===St.width?(Vt.globalCompositeOperation="copy",Vt.drawImage(St,1,0,St.width-1,St.height,0,0,St.width-1,St.height),Vt.globalCompositeOperation="source-over",Vt.fillStyle="transparent",Vt.fillRect(St.width-1,0,1,St.height)):Yt++;const o=a=>$(a/kt*-2*Ut)+5;{const a=Rt[Rt.length-1],v=Yt-.5;let V=$(0);Vt.beginPath(),Vt.moveTo(v,V),Vt.lineTo(v,$(a.total)),Vt.strokeStyle=mt[a.connected?"total":"network"],Vt.stroke(),Vt.beginPath(),Vt.moveTo(v,V),V=$(a.total);let Y=0;for(const P of ut)a.items[P]&&(Y+=a.items[P],V=$(Y),Vt.lineTo(v,V),Vt.strokeStyle=mt[P],Vt.stroke(),Vt.beginPath(),Vt.moveTo(v,V));a.network&&(Vt.beginPath(),Vt.moveTo(v,o(0)),Vt.lineTo(v,o(a.network)),Vt.strokeStyle=mt.network,Vt.stroke())}}const Dt=[],_t={};let Et={};const Bt={frames:Rt,animationFrame(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};et(a),jt=tt(a);for(const[a,V]of Object.entries(v))this[a](V)},begin(a){const v=performance.now();jt.items[a]=(jt.items[a]||0)-v;const V=Dt[Dt.length-1];return V&&(jt.items[V]+=v),Dt.push(a),v},end(a){const v=performance.now();jt.items[a]+=v;const V=Dt.pop();if(V!==a)throw Error(`Unmatched stats calls: expected end("${V}"), got end("${a}")`);const Y=Dt[Dt.length-1];return Y&&(jt.items[Y]-=v),v},backlog(a){jt.backlog=Math.max(a,jt.backlog)},network(a){jt.network=a},starvation(a){jt.network=a},latency(a){jt.latency=a},activity(a){jt.activity=a},users(a){jt.users=a},connected(a){const v=Qt;jt.connected=Qt=a,v&&!Qt&&pt&&(pt.remove(),Zt=null)},networkTraffic:_t,addNetworkTraffic(a,v){_t[a]=(_t[a]||0)+v},perSecondTally(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.logMessageStats)for(const[v,V]of Object.entries(a))Et[v]=(Et[v]||0)+V},stepSession(a){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const V=Math.floor(Date.now()/1e3);if(!window.logMessageStats)return Et={second:V},null;let Y=null;if(V!==Et.second){if(Et.second&&v&&(Et.requestedMessages||Et.sentMessagesTotal)){Y={...Et};const a=V-Et.second;1!==a&&(Y.sampleSeconds=a),Y.sentBundles&&(Y.averageDelay=Math.round(10*Y.sendDelay/Y.sentMessagesTotal)/10,Y.averageBundlePayload=Math.round(Y.sentBundlePayload/Y.sentBundles)),delete Y.second,delete Y.sendDelay,delete Y.sentBundlePayload}Et={second:V}}return Y}};globalThis.CROQUETSTATS=Bt;const Ot="ontouchstart"in document.documentElement,At=window.parent!==window,qt=Ot?20:12,$t=Ot?0:15;let te=!1;let ee,se=!1,ie=!1;function ft(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...v,level:"warning"})}function bt(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...v,level:"status"})}function yt(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";console.error(`Error during ${a}`,v);const Y=(v.stack||"").split("\n").filter((a=>!a.match(/croquet-.*\.min.js/))).join("\n");ce.showMessage(`Error during ${a}: ${v.message}\n\n${Y}`,{level:V,duration:"error"===V?1e4:void 0,stopOnFocus:!0})}try{if(ee=window.localStorage,ee["croquet-debug-persist-allowed"]="true","true"!==ee["croquet-debug-persist-allowed"])throw Error("localStorage not persisted");delete ee["croquet-debug-persist-allowed"]}catch(Yo){console.warn("localStorage not allowed"),ee={}}const ne={get pinned(){return"true"===ee[window.location.pathname+"/croquet-debug-ui-pinned"]},set pinned(a){ee[window.location.pathname+"/croquet-debug-ui-pinned"]=!!a},get activePage(){return ee[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(a){ee[window.location.pathname+"/croquet-debug-ui-activePage"]=a}},wt=a=>{a.preventDefault(),a.stopPropagation()};function Xt(a,v,V){const Y=document.createElement("canvas"),P=Y.width=40*qt/12,K=Y.height=60,M=Y.getContext("2d");M.font="36px Arial",M.textAlign="center",M.textBaseline="middle",M.fillStyle="black",M.fillText(a,P/2,.55*K);const H=document.createElement("button");H.id=v,H.className="croquet_dock_button";const l=a=>{a.preventDefault(),a.stopPropagation(),V()};return Ot?(H.ontouchstart=l,H.ontouchend=wt,H.onpointerdown=wt,H.onpointerup=wt):(H.onclick=l,H.onpointerdown=wt,H.onpointerup=wt),H.appendChild(Y),H}function Lt(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(;a.firstChild;)a.removeChild(a.firstChild);return new B(a,{text:v,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:B.CorrectLevel.L,...V})}let oe,re,le=0;function Tt(a,v){if(!1===a)return!1;if(a instanceof Element)return a;if("string"==typeof a){const v=document.getElementById(a);if(v)return v}return v?v():null}const ae=new Set,ce={sessionURL:function(){let a=null;const v=document.getElementsByTagName("link");for(const V of v)if("canonical"===V.getAttribute("rel")){a=V.getAttribute("href");break}return a||window.location.href}(),root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(I.nodock)return;const v=a.debug||I.debug,V=document.getElementById("croquet_dock");V&&V.parentElement.removeChild(V);const Y=Tt(ce.root,(()=>document.body));if(!Y)return;!function ht(){if(te)return;te=!0;const a=`\n        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all 0.3s ease; }\n        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }\n        #croquet_dock.debug { width: 84px; }\n        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }\n\n        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }\n        #croquet_dock.active #croquet_badge { left: 2%; }\n        #croquet_dock:not(.debug) #croquet_badge { display: none; }\n\n        .croquet_dock_button { position: absolute; width: ${qt}%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }\n        .croquet_dock_button:focus { outline: 0; }\n        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }\n        #croquet_dock:not(.active) .croquet_dock_button { display: none; }\n        #croquet_dock_left { right: ${2+$t+qt+2}% }\n        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }\n        #croquet_dock_right { right: ${2+$t}%; }\n        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }\n        #croquet_dock_pin { right: 2%; }\n        #croquet_dock_pin.pinned { background: #cce6ff; }\n\n        #croquet_dock_content { position: absolute; left: 2px; top: 2px; right: 2px; bottom: 2px; background: white; overflow: hidden; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }\n\n        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }\n        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }\n        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }\n        #croquet_qrcode canvas { image-rendering: pixelated; }\n\n        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }\n        #croquet_stats:not(.active) { display: none; }\n`,v=document.createElement("style");v.innerHTML=a,document.head.insertBefore(v,document.head.getElementsByTagName("style")[0])}();const P=document.createElement("div");P.id="croquet_dock",v&&P.classList.add("debug"),At&&!a.iframe&&(P.style.display="none"),Y.appendChild(P);const K=document.createElement("div");let M;K.id="croquet_dock_bar",P.appendChild(K),!1!==a.badge&&(M=document.createElement("div"),M.id="croquet_badge",K.appendChild(M),ce.badge=M);const H=document.createElement("div");H.id="croquet_dock_content",P.appendChild(H);const F=[];let z,N;if(!1!==a.qrcode&&ce.sessionURL&&(z=document.createElement("div"),z.id="croquet_qrcode",H.appendChild(z),F.push(z.id),ce.qrcode=z,v||(ne.activePage=z.id)),!1!==a.stats&&(N=document.createElement("div"),N.id="croquet_stats",H.appendChild(N),F.push(N.id),ce.stats=N),F.length){function X(a){const v=F.length;let V,Y=0;if(ne.activePage){const a=F.indexOf(ne.activePage);a>=0?(Y=a,V=document.getElementById(ne.activePage)):ne.activePage=null}const P=F[(Y+v+a)%v];let K;P===ne.activePage?K=V:(V&&V.classList.remove("active"),K=document.getElementById(P)),K&&K.classList.add("active"),ne.activePage=P}F.length>1&&(K.appendChild(Xt("<","croquet_dock_left",(()=>X(-1)))),K.appendChild(Xt(">","croquet_dock_right",(()=>X(1))))),X(0)}if(!Ot&&!a.alwaysPinned){const j=Xt("📌","croquet_dock_pin",(()=>{ne.pinned=!ne.pinned,L()})),L=()=>{ne.pinned?j.classList.add("pinned"):j.classList.remove("pinned")};L(),K.appendChild(j)}const f=a=>{P.style.width=`${a}px`;const v=1.18*a;P.style.height=`${v}px`;const V=18*a/100;K.style.height=`${V}px`,H.style.top=`${V+2}px`,M&&(M.style.height=.9*V+"px",M.style.width=.9*V*3+"px"),z&&(z.style.border=8*a/200+"px solid white")};let Q=a.fixedSize||200;const Z=()=>{P.classList.add("active"),f(Q),setTimeout((()=>P.style.transition="none"),300)},w=()=>{P.style.transition="",P.classList.remove("active"),P.style.width=P.style.height="",K.style.height="",H.style.top="",M&&(M.style.height=M.style.width=""),z&&(z.style.border="")};if(Ot)w(),P.ontouchstart=a=>{a.preventDefault(),a.stopPropagation(),P.classList.contains("active")?w():Z()},P.ontouchend=wt,P.onpointerdown=wt,P.onpointerup=wt;else if(a.alwaysPinned?Z():(ne.pinned?Z():w(),P.onmouseenter=Z,P.onmouseleave=()=>{ne.pinned||w()}),!a.fixedSize){let U=0;P.addEventListener("wheel",(a=>{a.stopPropagation();const v=Date.now();if(v-U<100)return;U=v;let{deltaY:V}=a;V=Math.sign(V)*Math.min(5,Math.abs(V));const Y=.8*Math.min(window.innerWidth,window.innerHeight);Q=Math.max(166,Math.min(Y,P.offsetWidth/1.05**V)),f(Q)}),{passive:!0})}},makeSessionWidgets:function(a){!function(a){if(!a||!1===ce.root)return;const v=Tt(ce.badge);v&&function vt(a,v){if(!1===ce.badge)return;const V=function(a){const v=new _(a),V=["bcdfghjklmnpqrstvwxyz","aeiou"];let Y="";for(let a=0;a<5;a++)Y+=V[a%2][v.quick()*V[a%2].length|0];return Y}(v);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+V;a.firstChild;)a.removeChild(a.firstChild);const Y=document.createElement("canvas"),P=Y.width=120,K=Y.height=40;Y.style.width="100%",a.appendChild(Y);const M=Y.getContext("2d"),H=function(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const V=new _(a),Y=[];for(let a=0;a<v;a++)Y.push(`hsl(${360*V.quick()}, 50%, 70%)`);return Y}(v,2);M.fillStyle=H[0],M.beginPath(),M.moveTo(0,0),M.lineTo(0,K),M.lineTo(P,0),M.closePath(),M.fill(),M.fillStyle=H[1],M.beginPath(),M.moveTo(P,K),M.lineTo(P,0),M.lineTo(0,K),M.closePath(),M.fill(),M.font="30px Arial",M.textAlign="center",M.textBaseline="middle",M.fillStyle="black",M.fillText(V,P/2,K/2)}(v,a)}(a),function xt(){if(!1===ce.root||!1===ce.qrcode)return;if(I.noqr)return;const a=ce.sessionURL;if(!a)return void console.warn("App.sessionURL is not set");const v=Tt(ce.qrcode);v&&(Ot||(v.onclick=v=>{v.preventDefault(),v.stopPropagation(),v.shiftKey?function(){const a=document.getElementById("croquet_dock");a&&a.classList.toggle("debug")}():window.open(a)}),Lt(v,a).getCanvas().style.width="100%")}(),function(){if(!1===ce.root)return;if(I.nostats)return;const a=Tt(ce.stats);a&&function J(a){for(Gt=a;a.firstChild;)a.removeChild(a.firstChild);a.style.background="#faf0dc",Ct=document.createElement("canvas"),Kt=Ct.getContext("2d"),Ct.id="text_stats",Ct.width=Math.min(140,window.innerWidth),Ct.height=36,Ct.style.width=Ct.width,Ct.style.height=Ct.height,Kt.font="9.5pt sans-serif",a.appendChild(Ct),a.title=Object.entries(mt).map((a=>{let[v,V]=a;return`${V}: ${v}`})).join("\n"),St=document.createElement("canvas"),St.width=Math.min(125,window.innerWidth),St.height=125,St.style.width="100%";const v=document.createElement("div");v.id="innerDiv",a.appendChild(v),v.appendChild(St),Vt=St.getContext("2d")}(a)}()},makeQRCanvas(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ce.sessionURL)return null;const v=Lt(document.createElement("div"),ce.sessionURL,a);return v&&v.getCanvas()},clearSessionMoniker:function(){!1!==ce.badge&&(document.title=document.title.replace(/:.*/,""))},showSyncWait(a){!1===ce.root?a=!1:oe||(oe=function Wt(){!function(){if(se)return;se=!0;const a=`\n        ${At?"body { min-height: 100vh }":""}\n        #croquet_spinnerOverlay {\n            z-index: 1000;\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color:#333;\n            opacity:0.9;\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            transition: opacity 1.0s ease-out;\n        }\n        /* https://github.com/lukehaas/css-loaders */\n        @keyframes croquet_dots {\n            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }\n            40% { box-shadow: 0 2.5em 0 0; }\n        }\n        #croquet_loader,\n        #croquet_loader::before,\n        #croquet_loader::after {\n          border-radius: 50%;\n          width: 2.5em;\n          height: 2.5em;\n          animation: croquet_dots 1.8s infinite ease-in-out;\n        }\n        #croquet_loader {\n          color: #fff;\n          font-size: 10px;\n          margin: 80px auto;\n          position: relative;\n          text-indent: -9999em;\n          animation-delay: -0.16s;\n        }\n        #croquet_loader::before,\n        #croquet_loader::after {\n          content: '';\n          position: absolute;\n          top: 0;\n        }\n        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }\n        #croquet_loader::after { left: 3.5em; }\n        #croquet_spinnerOverlay.croquet_error>*,\n        #croquet_spinnerOverlay.croquet_error>*::before,\n        #croquet_spinnerOverlay.croquet_error>*::after {\n            color: #f00;\n        }\n        #croquet_spinnerOverlay.croquet_fatal>*,\n        #croquet_spinnerOverlay.croquet_fatal>*::before,\n        #croquet_spinnerOverlay.croquet_fatal>*::after {\n            color: #f00;\n            box-shadow: 0 2.5em 0 0 !important;\n            animation: none !important;\n        }\n`,v=document.createElement("style");v.innerHTML=a,document.head.insertBefore(v,document.head.getElementsByTagName("style")[0])}();const a=document.createElement("div");a.id="croquet_spinnerOverlay";const v=document.createElement("div");return v.id="croquet_loader",v.innerText="Catching up...",a.appendChild(v),a}()),function(a){if(re!==a&&("string"!=typeof re||!0!==a))if(!1===ce.sync&&(a=!1),re=a,a)clearTimeout(le),le=setTimeout((()=>{re&&(Tt(ce.root,(()=>document.body)).appendChild(oe),oe.style.opacity=.9,oe.className="error"===re?"croquet_error":"fatal"===re?"croquet_fatal":"")}),500);else{if(!oe)return;clearTimeout(le),oe.style.opacity=0,oe.className="",le=setTimeout((()=>{re||oe.parentElement&&oe.parentElement.removeChild(oe)}),500)}}(a)},messageFunction:function(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const V=v.level;let Y;return"error"===V?(Y="orangered,red",console.error(a)):"warning"===V?(Y="gold,orange",console.warn(a)):Y="silver,gray",function gt(a,v){const V=Tt(ce.root,(()=>document.body));if(!1===V)return null;!function(){if(ie)return;ie=!0;let a="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n";a+="\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n";const v=document.createElement("style");v.innerHTML="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n",document.head.insertBefore(v,document.head.getElementsByTagName("style")[0])}();const Y={text:a,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0,...v};let P;return V instanceof Element&&V!==document.body?(P=V.id,P||(V.id=P="_croquetToastParent")):"string"==typeof V&&(P=V),P&&(Y.selector=P),j(Y).showToast()}(a,{style:{background:`linear-gradient(90deg,${Y})`},...v})},showMessage(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("once"===v.only){if(ae.has(a))return null;ae.add(a)}return"fatal"===v.level&&(v.level="error",v.showSyncWait="fatal"),v.showSyncWait&&("fatal"!==v.showSyncWait||v.duration||(v.duration=-1),ce.showSyncWait(v.showSyncWait)),I.nomessages||!1===ce.root||!1===ce.messages||!ce.messageFunction?("warning"===v.level&&console.warn(a),"error"===v.level&&console.error(a),null):ce.messageFunction(a,v)},isCroquetHost:a=>a.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(a)||a.endsWith("ngrok.io"),referrerURL(){const a=new URL(ce.sessionURL),v=this.isCroquetHost(a.hostname);return`${a.protocol}//${a.host}${a.pathname}${v?a.search:""}`},autoSession(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"q"};"string"==typeof a&&(a={key:a}),a||(a={});const v=a.key||"q",V=new URL(ce.sessionURL);let Y="";const P=V.search.slice(1).split("&"),K=P.find((a=>a.split("=")[0]===v));if(K?Y=K.replace(/[^=]*=/,""):(Y=P.find((a=>!a.includes("="))),Y||(Y=V.hash.slice(1),Y&&(V.hash="",V.search?V.searchParams.set(v,Y):V.search=Y))),Y)try{Y=decodeURIComponent(Y)}catch(a){}else Y=Math.floor(Math.random()*36**10).toString(36),V.searchParams.set(v,Y);const M=V.toString("");window.location.href!==M&&(window.history.replaceState({},"",M),ce.sessionURL=M),I.has("debug","session")&&console.log(`Croquet.App.autoSession: "${Y}"`);const H=Promise.resolve(Y);return H[Symbol.toPrimitive]=()=>(console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),Y),H},autoPassword(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"pw",scrub:!1,keyless:!1};const v=a.key||"pw",V=a.scrub&&!I.has("debug","password"),Y=a.keyless,P=new URL(ce.sessionURL);let K="";const M=P.hash.slice(1);if(M){const a=M.split("&"),H=a.find((a=>a.split("=")[0]===v));H?(K=H.replace(/[^=]*=/,""),K&&V&&(P.hash=a.filter((a=>a.split("=")[0]!==v)).join("&"))):Y&&(K=a.find((a=>!a.includes("="))),K&&V&&(P.hash=a.filter((a=>a!==K)).join("&")))}if(!K){const a=new Uint8Array(16);window.crypto.getRandomValues(a),K=k(a.buffer),P.hash=M?`${M}&${v}=${K}`:Y?K:`${v}=${K}`,ce.sessionURL=P.href,V&&(P.hash=M)}if(I.has("debug","session")&&console.log(`Croquet.App.sessionUrl: ${ce.sessionURL}`),window.location.href!==P.href&&window.history.replaceState({},"",P.href),K)try{K=decodeURIComponent(K)}catch(a){}I.has("debug","session")&&console.log(`Croquet.App.autoPassword: "${K}"`);const H=Promise.resolve(K);return H[Symbol.toPrimitive]=()=>(console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),K),H}};function Pt(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Y="none";for(const P of["immediate","queued","oncePerFrame","oncePerFrameWhileSynced"])for(const K of a[P])K.for===v?null===V||K.unbound===V?a[P].delete(K):Y="subscriber":"none"===Y&&(Y="others");return Y}const de=new class{constructor(){this.subscriptions={},this.subscribers=new Map,this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.subscriberIds=0}register(a){return"V"+ ++this.subscriberIds}deregister(a){}addSubscription(a,v,V,Y,P){if("vote"===P)return void this.addSubscription(a,v+"#__vote",V,Y,"immediate");const K=a+":"+v,M=Y;M.for=V;let H=this.subscriptions[K];if(H||(H=this.subscriptions[K]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!H[P])throw Error(`Unknown subscribe() option: handling="${P}"`);H[P].add(M);let I=this.subscribers.get(V);I||this.subscribers.set(V,I=new Set),I.add(K)}removeSubscription(a,v,V){let Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const P=a+":"+v,K=this.subscriptions[P];if(K){const a=Pt(K,V,Y);if(a||delete this.subscriptions[P],"subscriber"!==a){const a=this.subscribers.get(V);a.delete(P),0===a.size&&this.subscribers.delete(V)}}v.endsWith("#__vote")||this.removeSubscription(a,v+"#__vote",V)}removeAllSubscriptionsFor(a){const v=this.subscribers.get(a);if(v){for(const V of v){const v=this.subscriptions[V];v?"none"===Pt(v,a)&&delete this.subscriptions[V]:console.error(`Croquet: topic ${V} not found in subscriptions table for ${a} during removeAllSubscriptionsFor()`)}this.subscribers.delete(a)}}handleEvent(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a=>a();const Y=this.subscriptions[a];Y&&(Y.queued.size>0&&this.queuedEvents.push({topic:a,data:v}),Y.oncePerFrame.size>0&&this.perFrameEvents.set(a,v),Y.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(a,v),Y.immediate.size>0&&V((()=>{for(const V of Y.immediate)try{V(v)}catch(v){console.error(v),console.warn(`Croquet: error "${v.message}" in "immediate" subscription ${a}`)}})))}processFrameEvents(a,v){let V=0;const n=(a,v,Y)=>{const P=this.subscriptions[v];if(P)for(const K of P[a]){try{K(Y)}catch(V){console.error(V),console.warn(`Croquet: error "${V.message}" in "${a}" subscription ${v}`)}V++}};for(const{topic:a,data:v}of this.queuedEvents)n("queued",a,v);if(this.queuedEvents.length=0,a){for(const[a,v]of this.perFrameEvents)n("oncePerFrame",a,v);if(this.perFrameEvents.clear(),v){for(const[a,v]of this.perSyncedFrameEvents)n("oncePerFrameWhileSynced",a,v);this.perSyncedFrameEvents.clear()}for(const{topic:a,data:v}of this.queuedEvents)n("queued",a,v);this.queuedEvents.length=0}return V}};let he={get subscribe(){return he={subscribe:I.has("debug","subscribe",!1)},he.subscribe}};class Mt{constructor(a){this.vm=a}register(a){return this.vm.registerModel(a)}deregister(a){this.vm.deregisterModel(a.id)}publish(a,v,V){this.vm.publishFromModel(V,a,v)}subscribe(a,v,V,Y){return he.subscribe&&console.log(`Model.subscribe("${v}:${V}", ${a} ${(""+Y).replace(/\([\s\S]*/,"")})`),this.vm.addSubscription(a,v,V,Y)}unsubscribe(a,v,V){let Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";he.subscribe&&console.log(`Model.unsubscribe(${v}:${V}", ${a} ${(""+Y).replace(/\([\s\S]*/,"")})`),this.vm.removeSubscription(a,v,V,Y)}unsubscribeAll(a){he.subscribe&&console.log(`Model.unsubscribeAll(${a} ${a.id})`),this.vm.removeAllSubscriptionsFor(a)}future(a,v,V,Y){if(ue&&ue.equal(this))return this.vm.future(a,v,V,Y);throw Error(`Model.future() called from outside: ${a}`)}cancelFuture(a,v){if(ue&&ue.equal(this))return this.vm.cancelFuture(a,v);throw Error(`Model.cancelFuture() called from outside: ${a}`)}random(){return this.vm.random()}now(){return this.vm.time}equal(a){return a instanceof Mt&&a.vm===this.vm}isViewRealm(){return!1}}class It{constructor(a){this.vm=a}register(a){return de.register(a)}deregister(a){de.deregister(a)}publish(a,v,V){this.vm.publishFromView(V,a,v)}subscribe(a,v,V,Y){let P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"queued";he.subscribe&&console.log(`View.subscribe("${Y}:${a}", ${v} ${V?V.name||(""+V).replace(/\([\s\S]*/,""):""+V} [${P}])`),de.addSubscription(Y,a,v,V,P)}unsubscribe(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Y=arguments.length>3?arguments[3]:void 0;he.subscribe&&console.log(`View.unsubscribe("${Y}:${a}", ${v} ${V?V.name||(""+V).replace(/\([\s\S]*/,""):"*"})`),de.removeSubscription(Y,a,v,V)}unsubscribeAll(a){he.subscribe&&console.log(`View.unsubscribeAll(${a})`),de.removeAllSubscriptionsFor(a)}future(a,v){const V=this.vm;return new Proxy(a,{get(Y,P){if("function"==typeof a[P])return new Proxy(a[P],{apply(Y,K,M){setTimeout((()=>{a.id&&Ft(V,(()=>a[P](...M)),!0)}),v)}});throw Error("Tried to call "+P+"() on future of "+Object.getPrototypeOf(a).constructor.name+" which is not a function")}})}random(){return Math.random()}now(){return this.vm.time}externalNow(){return this.vm.controller.reflectorTime}extrapolatedNow(){return this.vm.controller.extrapolatedTime}isSynced(){return!!this.vm.controller.synced}equal(a){return a instanceof It&&a.vm===this.vm}isViewRealm(){return!0}}let ue=null;function Ht(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!ue&&a)throw Error(a);return ue}function zt(a,v){if(null!==ue)throw Error("Can't switch realms from inside realm");try{return ue=new Mt(a),v()}finally{ue=null}}function Ft(a,v){if(null!==ue&&!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))throw Error("Can't switch realms from inside realm");const V=ue;try{return ue=new It(a),v()}finally{ue=V}}var me,Nt=function(a){return a!=a},pe=Math.sqrt,be=.7853981633974483,Jt=function(a){var v,V,Y,P,K;if(Nt(a))return NaN;if(a>0?Y=a:(v=!0,Y=-a),Y>1)return NaN;if(Y>.625)P=(V=1-Y)*function(a){var v,V;return 0===a?.08333333333333809:((a<0?-a:a)<=1?(v=28.536655482610616+a*(a*(6.968710824104713+a*(.002967721961301243*a-.5634242780008963))-25.56901049652825),V=342.43986579130785+a*(a*(147.0656354026815+a*(1*a-21.947795316429207))-383.8770957603691)):(v=.002967721961301243+(a=1/a)*(a*(6.968710824104713+a*(28.536655482610616*a-25.56901049652825))-.5634242780008963),V=1+a*(a*(147.0656354026815+a*(342.43986579130785*a-383.8770957603691))-21.947795316429207)),v/V)}(V),V=pe(V+V),K=be-V,K-=V=V*P-6123233995736766e-32,K+=be;else{if(Y<1e-8)return a;K=Y*(K=(V=Y*Y)*function(a){var v,V;return 0===a?.16666666666666713:((a<0?-a:a)<=1?(v=a*(19.562619833175948+a*(a*(5.444622390564711+a*(.004253011369004428*a-.6019598008014124))-16.262479672107002))-8.198089802484825,V=a*(139.51056146574857+a*(a*(70.49610280856842+a*(1*a-14.740913729888538))-147.1791292232726))-49.18853881490881):(v=.004253011369004428+(a=1/a)*(a*(5.444622390564711+a*(a*(19.562619833175948+-8.198089802484825*a)-16.262479672107002))-.6019598008014124),V=1+a*(a*(70.49610280856842+a*(a*(139.51056146574857+-49.18853881490881*a)-147.1791292232726))-14.740913729888538)),v/V)}(V))+Y}return v?-K:K},ye="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ze=Object.prototype.toString,fe=Object.prototype.hasOwnProperty,Xe="function"==typeof Symbol?Symbol.toStringTag:"",Ge=ye&&"symbol"==typeof Symbol.toStringTag?function(a){var v,V,Y;if(null==a)return Ze.call(a);V=a[Xe],v=function(a,v){return null!=a&&fe.call(a,v)}(a,Xe);try{a[Xe]=void 0}catch(v){return Ze.call(a)}return Y=Ze.call(a),v?a[Xe]=V:delete a[Xe],Y}:function(a){return Ze.call(a)},Le="function"==typeof Uint32Array,xe="function"==typeof Uint32Array?Uint32Array:null,ge="function"==typeof Uint32Array?Uint32Array:null,Se=function(){var a,v;if("function"!=typeof xe)return!1;try{a=function(a){return Le&&a instanceof Uint32Array||"[object Uint32Array]"===Ge(a)}(v=new xe(v=[1,3.14,-3.14,4294967296,4294967297]))&&1===v[0]&&3===v[1]&&4294967293===v[2]&&0===v[3]&&1===v[4]}catch(v){a=!1}return a}()?ge:function(){throw new Error("not implemented")},We="function"==typeof Float64Array,we="function"==typeof Float64Array?Float64Array:null,ve="function"==typeof Float64Array?Float64Array:null,Ve=function(){var a,v;if("function"!=typeof we)return!1;try{a=function(a){return We&&a instanceof Float64Array||"[object Float64Array]"===Ge(a)}(v=new we([1,3.14,-3.14,NaN]))&&1===v[0]&&3.14===v[1]&&-3.14===v[2]&&v[3]!=v[3]}catch(v){a=!1}return a}()?ve:function(){throw new Error("not implemented")},Ye="function"==typeof Uint8Array,Te="function"==typeof Uint8Array?Uint8Array:null,Ce="function"==typeof Uint8Array?Uint8Array:null,Pe=function(){var a,v;if("function"!=typeof Te)return!1;try{a=function(a){return Ye&&a instanceof Uint8Array||"[object Uint8Array]"===Ge(a)}(v=new Te(v=[1,3.14,-3.14,256,257]))&&1===v[0]&&3===v[1]&&253===v[2]&&0===v[3]&&1===v[4]}catch(v){a=!1}return a}()?Ce:function(){throw new Error("not implemented")},Ke="function"==typeof Uint16Array,Re="function"==typeof Uint16Array?Uint16Array:null,ke="function"==typeof Uint16Array?Uint16Array:null,Me={uint16:function(){var a,v;if("function"!=typeof Re)return!1;try{a=function(a){return Ke&&a instanceof Uint16Array||"[object Uint16Array]"===Ge(a)}(v=new Re(v=[1,3.14,-3.14,65536,65537]))&&1===v[0]&&3===v[1]&&65533===v[2]&&0===v[3]&&1===v[4]}catch(v){a=!1}return a}()?ke:function(){throw new Error("not implemented")},uint8:Pe};(me=new Me.uint16(1))[0]=4660;var He,Fe,ze=52===new Me.uint8(me.buffer)[0],Qe=!0===ze?1:0,je=new Ve(1),Je=new Se(je.buffer),Ie=function(a){return je[0]=a,Je[Qe]},De=!0===ze?1:0,_e=new Ve(1),Ee=new Se(_e.buffer),Ne=function(a,v){return _e[0]=a,Ee[De]=v>>>0,_e[0]},Be=Number.POSITIVE_INFINITY,Oe=Number.NEGATIVE_INFINITY,Ae=.6931471803691238,$e=1.9082149292705877e-10,Ue=function(a){var v,V,Y,P,K,M,H,I,F,z;if(a<-1||Nt(a))return NaN;if(-1===a)return Oe;if(a===Be)return a;if(0===a)return a;if(z=1,(Y=a<0?-a:a)<.41421356237309503){if(Y<1.862645149230957e-9)return Y<5551115123125783e-32?a:a-a*a*.5;a>-.2928932188134525&&(z=0,P=a,V=1)}return 0!==z&&(Y<9007199254740992?(K=(z=((V=Ie(F=1+a))>>20)-1023)>0?1-(F-a):a-(F-1),K/=F):(z=((V=Ie(F=a))>>20)-1023,K=0),(V&=1048575)<434334?F=Ne(F,1072693248|V):(z+=1,F=Ne(F,1071644672|V),V=1048576-V>>2),P=F-1),v=.5*P*P,0===V?0===P?z*Ae+(K+=z*$e):z*Ae-((I=v*(1-.6666666666666666*P))-(z*$e+K)-P):(I=(H=(M=P/(2+P))*M)*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.3999999999940942+a*(.2857142874366239+a*(.22222198432149784+a*(.1818357216161805+a*(.15313837699209373+.14798198605116586*a)))))}(H),0===z?P-(v-M*(v+I)):z*Ae-(v-(M*(v+I)+(z*$e+K))-P))},ts=.6931471805599453,ss=.6931471803691238,is=1.9082149292705877e-10,qe=function(a){var v,V,Y,P,K,M,H,I,F,z,N;return 0===a?Oe:Nt(a)||a<0?NaN:(P=0,(V=Ie(a))<1048576&&(P-=54,V=Ie(a*=0x40000000000000)),V>=2146435072?a+a:(P+=(V>>20)-1023|0,P+=(H=614244+(V&=1048575)&1048576|0)>>20|0,M=(a=Ne(a,V|1072693248^H))-1,(1048575&2+V)<3?0===M?0===P?0:P*ss+P*is:(K=M*M*(.5-.3333333333333333*M),0===P?M-K:P*ss-(K-P*is-M)):(H=V-398458|0,I=440401-V|0,Y=(z=(N=(F=M/(2+M))*F)*N)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(z),K=N*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(z)+Y,(H|=I)>0?(v=.5*M*M,0===P?M-(v-F*(v+K)):P*ss-(v-(F*(v+K)+P*is)-M)):0===P?M-F*(M-K):P*ss-(F*(M-K)-P*is-M))))},es=function(a){return a===Be||a===Oe},ns=1.5707963267948966,rs=function(a){var v,V,Y,P;return Nt(a)||0===a?a:a===Be?ns:a===Oe?-ns:(a<0&&(V=!0,a=-a),v=0,a>2.414213562373095?(Y=ns,v=1,a=-1/a):a<=.66?Y=0:(Y=be,v=2,a=(a-1)/(a+1)),P=a*(P=(P=a*a)*function(a){return 0===a?-64.85021904942025:a*(a*(a*(-.8750608600031904*a-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025}(P)/function(a){return 0===a?194.5506571482614:194.5506571482614+a*(485.3903996359137+a*(432.88106049129027+a*(165.02700983169885+a*(24.858464901423062+1*a))))}(P))+a,2===v?P+=3061616997868383e-32:1===v&&(P+=6123233995736766e-32),Y+=P,V?-Y:Y)};!0===ze?(He=1,Fe=0):(He=0,Fe=1);var os,ls,as={HIGH:He,LOW:Fe},cs=new Ve(1),ds=new Se(cs.buffer),hs=as.HIGH,us=as.LOW,fs=function(a,v){return cs[0]=v,a[0]=ds[hs],a[1]=ds[us],a},gs=function(a,v){return 1===arguments.length?fs([0,0],a):fs(a,v)};!0===ze?(os=1,ls=0):(os=0,ls=1);var ms={HIGH:os,LOW:ls},ps=new Ve(1),bs=new Se(ps.buffer),ys=ms.HIGH,Zs=ms.LOW,Gs=function(a,v){return bs[ys]=a,bs[Zs]=v,ps[0]},Xs=[0,0],ks=function(a,v){var V,Y;return gs(Xs,a),V=Xs[0],V&=2147483647,Y=Ie(v),Gs(V|=Y&=2147483648,Xs[1])},Ls=3.141592653589793,xs=22250738585072014e-324,Ys=function(a){var v,V,Y,P,K;return Nt(a)||es(a)||0===a?a:(V=-2147483648&(Y=Ie(a)),Y&=2147483647,K=0,a<xs?(K=0x40000000000000,v=Ie(K*=a),K=Gs(V|(v=(2147483647&v)/3+696219795),0)):K=Ne(K,V|(v=Y/3+715094163)),K*=function(a){return 0===a?1.87595182427177:1.87595182427177+a*(a*(1.6214297201053545+a*(.14599619288661245*a-.758397934778766))-1.8849797954337717)}(P=K*K*(K/a)),v=Ie(K),K=Gs(v+1,0),K+=K*(P=((P=a/(K*K))-K)/(K+K+P)))},Ks=function(a,v){var V,Y,P,K;return P=(K=a*a)*K,Y=K*function(a){return 0===a?.0416666666666666:.0416666666666666+a*(2480158728947673e-20*a-.001388888888887411)}(K),Y+=P*P*function(a){return 0===a?-2.7557314351390663e-7:a*(2.087572321298175e-9+-11359647557788195e-27*a)-2.7557314351390663e-7}(K),(P=1-(V=.5*K))+(1-P-V+(K*Y-a*v))},Ss=-.16666666666666632,zs=function(a,v){var V,Y,P;return V=.00833333333332249+(P=a*a)*(27557313707070068e-22*P-.0001984126982985795)+P*(P*P)*(1.58969099521155e-10*P-2.5050760253406863e-8),Y=P*a,0===v?a+Y*(Ss+P*V):a-(P*(.5*v-Y*V)-v-Y*Ss)},Ws=!0===ze?0:1,ws=new Ve(1),vs=new Se(ws.buffer),Vs=Math.floor,Es=function(a){return a<0?-a:0===a?0:a},Js=function(a,v){return Nt(v)||es(v)?(a[0]=v,a[1]=0,a):0!==v&&Es(v)<xs?(a[0]=4503599627370496*v,a[1]=-52,a):(a[0]=v,a[1]=0,a)},Os=function(a){var v=Ie(a);return(v=(2146435072&v)>>>20)-1023|0},Ts=[0,0],Cs=[0,0],qs=function(a,v){var V,Y;return 0===a||Nt(a)||es(a)?a:(function(a,v){1===arguments.length?Js([0,0],a):Js(a,v)}(Ts,a),v+=Ts[1],(v+=Os(a=Ts[0]))<-1074?ks(0,a):v>1023?a<0?Oe:Be:(v<=-1023?(v+=52,Y=2220446049250313e-31):Y=1,gs(Cs,a),V=Cs[0],V&=2148532223,Y*Gs(V|=v+1023<<20,Cs[1])))},Ps=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Rs=[1.570796251296997,7.549789415861596e-8,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Ms=5.960464477539063e-8,Hs=ln(new Array(20)),Is=ln(new Array(20)),Fs=ln(new Array(20)),Ns=ln(new Array(20));function ln(a){var v,V=a.length;for(v=0;v<V;v++)a[v]=0;return a}function cn(a,v,V,Y,P,K,M,H,I){var F,z,N,Q,j,U,D,_,E;for(Q=K,E=Y[V],_=V,j=0;_>0;j++)z=Ms*E|0,Ns[j]=E-16777216*z|0,E=Y[_-1]+z,_-=1;if(E=qs(E,P),E-=8*Vs(.125*E),E-=D=0|E,N=0,P>0?(D+=j=Ns[V-1]>>24-P,Ns[V-1]-=j<<24-P,N=Ns[V-1]>>23-P):0===P?N=Ns[V-1]>>23:E>=.5&&(N=2),N>0){for(D+=1,F=0,j=0;j<V;j++)_=Ns[j],0===F?0!==_&&(F=1,Ns[j]=16777216-_):Ns[j]=16777215-_;if(P>0)switch(P){case 1:Ns[V-1]&=8388607;break;case 2:Ns[V-1]&=4194303}2===N&&(E=1-E,0!==F&&(E-=qs(1,P)))}if(0===E){for(_=0,j=V-1;j>=K;j--)_|=Ns[j];if(0===_){for(U=1;0===Ns[K-U];U++);for(j=V+1;j<=V+U;j++){for(I[H+j]=Ps[M+j],z=0,_=0;_<=H;_++)z+=a[_]*I[H+(j-_)];Y[j]=z}return cn(a,v,V+=U,Y,P,K,M,H,I)}}if(0===E)for(V-=1,P-=24;0===Ns[V];)V-=1,P-=24;else(E=qs(E,-P))>=16777216?(z=Ms*E|0,Ns[V]=E-16777216*z|0,P+=24,Ns[V+=1]=z):Ns[V]=0|E;for(z=qs(1,P),j=V;j>=0;j--)Y[j]=z*Ns[j],z*=Ms;for(j=V;j>=0;j--){for(z=0,U=0;U<=Q&&U<=V-j;U++)z+=Rs[U]*Y[j+U];Fs[V-j]=z}for(z=0,j=V;j>=0;j--)z+=Fs[j];for(v[0]=0===N?z:-z,z=Fs[0]-z,j=1;j<=V;j++)z+=Fs[j];return v[1]=0===N?z:-z,7&D}var dn=function(a,v,V,Y){var P,K,M,H,I,F,z;for((K=(V-3)/24|0)<0&&(K=0),H=V-24*(K+1),F=K-(M=Y-1),z=M+4,I=0;I<=z;I++)Hs[I]=F<0?0:Ps[F],F+=1;for(I=0;I<=4;I++){for(P=0,F=0;F<=M;F++)P+=a[F]*Hs[M+(I-F)];Is[I]=P}return cn(a,v,4,Is,H,4,K,M,Hs)},Qs=Math.round,un=function(a,v,V){var Y,P,K,M,H;return K=a-1.5707963267341256*(Y=Qs(.6366197723675814*a)),M=6077100506506192e-26*Y,H=v>>20|0,V[0]=K-M,H-(Ie(V[0])>>20&2047)>16&&(M=20222662487959506e-37*Y-((P=K)-(K=P-(M=6077100506303966e-26*Y))-M),V[0]=K-M,H-(Ie(V[0])>>20&2047)>49&&(M=84784276603689e-45*Y-((P=K)-(K=P-(M=20222662487111665e-37*Y))-M),V[0]=K-M)),V[1]=K-V[0]-M,Y},js=1.5707963267341256,Us=6077100506506192e-26,Ds=2*Us,_s=4*Us,Bs=new Array(3),As=new Array(2),wn=function(a,v){var V,Y,P,K,M,H,I;if((P=2147483647&Ie(a)|0)<=1072243195)return v[0]=a,v[1]=0,0;if(P<=1074752122)return 598523==(1048575&P)?un(a,P,v):P<=1073928572?a>0?(I=a-js,v[0]=I-Us,v[1]=I-v[0]-Us,1):(I=a+js,v[0]=I+Us,v[1]=I-v[0]+Us,-1):a>0?(I=a-2*js,v[0]=I-Ds,v[1]=I-v[0]-Ds,2):(I=a+2*js,v[0]=I+Ds,v[1]=I-v[0]+Ds,-2);if(P<=1075594811)return P<=1075183036?1074977148===P?un(a,P,v):a>0?(I=a-3*js,v[0]=I-1.8231301519518578e-10,v[1]=I-v[0]-1.8231301519518578e-10,3):(I=a+3*js,v[0]=I+1.8231301519518578e-10,v[1]=I-v[0]+1.8231301519518578e-10,-3):1075388923===P?un(a,P,v):a>0?(I=a-4*js,v[0]=I-_s,v[1]=I-v[0]-_s,4):(I=a+4*js,v[0]=I+_s,v[1]=I-v[0]+_s,-4);if(P<1094263291)return un(a,P,v);if(P>=2146435072)return v[0]=NaN,v[1]=NaN,0;for(V=function(a){return ws[0]=a,vs[Ws]}(a),I=Gs(P-((Y=(P>>20)-1046)<<20|0),V),M=0;M<2;M++)Bs[M]=0|I,I=16777216*(I-Bs[M]);for(Bs[2]=I,K=3;0===Bs[K-1];)K-=1;return H=dn(Bs,As,Y,K),a<0?(v[0]=-As[0],v[1]=-As[1],-H):(v[0]=As[0],v[1]=As[1],H)},$s=[0,0],ti=Math.ceil,kn=function(a){var v;return Nt(a)||a===Be?a:a===Oe?0:a>709.782712893384?Be:a<-745.1332191019411?0:a>-3.725290298461914e-9&&a<3.725290298461914e-9?1+a:(v=function(a){return a<0?ti(a):Vs(a)}(a<0?1.4426950408889634*a-.5:1.4426950408889634*a+.5),function(a,v,V){var Y,P,K;return K=(Y=a-v)-(P=Y*Y)*function(a){return 0===a?.16666666666666602:.16666666666666602+a*(a*(6613756321437934e-20+a*(4.1381367970572385e-8*a-16533902205465252e-22))-.0027777777777015593)}(P),qs(1-(v-Y*K/(2-K)-a),V)}(a-.6931471803691238*v,1.9082149292705877e-10*v,v))},ei=.6931471803691238,si=1.9082149292705877e-10,ii=!0===ze?0:1,ni=new Ve(1),li=new Se(ni.buffer),Kn=function(a,v){return ni[0]=a,li[ii]=v>>>0,ni[0]},di=[0,0],hi=[0,0],qn=function(a,v,V){var Y,P,K,M,H,I,F,z,N;return(P=2147483647&(Y=Ie(a))|0)>=1072010280&&(a<0&&(a=-a,v=-v),a=(N=.7853981633974483-a)+(z=3061616997868383e-32-v),v=0),M=v+(N=a*a)*((H=N*a)*((M=function(a){return 0===a?.13333333333320124:.13333333333320124+a*(.021869488294859542+a*(.0035920791075913124+a*(.0005880412408202641+a*(7817944429395571e-20+-18558637485527546e-21*a))))}(z=N*N))+(F=N*function(a){return 0===a?.05396825397622605:.05396825397622605+a*(.0088632398235993+a*(.0014562094543252903+a*(.0002464631348184699+a*(7140724913826082e-20+2590730518636337e-20*a))))}(z)))+v),z=a+(M+=.3333333333333341*H),P>=1072010280?(1-(Y>>30&2))*((F=V)-2*(a-(z*z/(z+F)-M))):1===V?z:(Kn(N=z,0),F=M-(N-a),Kn(I=K=-1/z,0),I+K*((H=1+I*N)+I*F))},ui=[0,0];void 0===globalThis.CroquetMath&&(globalThis.CroquetMath={}),Object.assign(globalThis.CroquetMath,{acos:function(a){var v;return Nt(a)||a<-1||a>1?NaN:a>.5?2*Jt(pe(.5-.5*a)):(v=be-Jt(a),v+=6123233995736766e-32,v+=be)},acosh:function(a){var v;return Nt(a)||a<1?NaN:1===a?0:a>=268435456?qe(a)+ts:a>2?qe(2*a-1/(a+pe(a*a-1))):Ue((v=a-1)+pe(2*v+v*v))},asin:Jt,asinh:function(a){var v,V,Y;return Nt(a)||es(a)?a:(a<0&&(a=-a,v=!0),Y=a<3.725290298461914e-9?a:a>268435456?qe(a)+ts:a>2?qe(2*a+1/(pe(a*a+1)+a)):Ue(a+(V=a*a)/(1+pe(1+V))),v?-Y:Y)},atan:rs,atanh:function(a){var v,V;return Nt(a)||a<-1||a>1?NaN:1===a?Be:-1===a?Oe:(a<0&&(v=!0,a=-a),a<3.725290298461914e-9?v?-a:a:(V=a<.5?.5*Ue((V=a+a)+V*a/(1-a)):.5*Ue((a+a)/(1-a)),v?-V:V))},atan2:function(a,v){var V;return Nt(v)||Nt(a)?NaN:es(v)?v===Be?es(a)?ks(Ls/4,a):ks(0,a):es(a)?ks(3*Ls/4,a):ks(Ls,a):es(a)?ks(Ls/2,a):0===a?v>=0&&!function(a){return!!(Ie(a)>>>31)}(v)?ks(0,a):ks(Ls,a):0===v?ks(Ls/2,a):(V=rs(a/v),v<0?V<=0?V+Ls:V-Ls:V)},cbrt:Ys,cos:function(a){var v;if(v=Ie(a),(v&=2147483647)<=1072243195)return v<1044381696?1:Ks(a,0);if(v>=2146435072)return NaN;switch(3&wn(a,$s)){case 0:return Ks($s[0],$s[1]);case 1:return-zs($s[0],$s[1]);case 2:return-Ks($s[0],$s[1]);default:return zs($s[0],$s[1])}},cosh:function(a){return Nt(a)?a:(a<0&&(a=-a),a>21?kn(a)/2:(kn(a)+kn(-a))/2)},exp:kn,expm1:function(a){var v,V,Y,P,K,M,H,I,F,z,N,Q;if(a===Be||Nt(a))return a;if(a===Oe)return-1;if(0===a)return a;if(a<0?(V=!0,H=-a):(V=!1,H=a),H>=38.816242111356935){if(V)return-1;if(H>=709.782712893384)return Be}if(K=0|Ie(H),H>.34657359027997264)H<1.0397207708399179?V?(Y=a+ei,P=-si,Q=-1):(Y=a-ei,P=si,Q=1):(Q=V?1.4426950408889634*a-.5:1.4426950408889634*a+.5,Y=a-(z=Q|=0)*ei,P=z*si),F=Y-(a=Y-P)-P;else{if(K<1016070144)return a;Q=0}return N=(I=a*(v=.5*a))*(((M=1+I*function(a){return 0===a?-.03333333333333313:a*(.0015873015872548146+a*(a*(4008217827329362e-21+-2.0109921818362437e-7*a)-793650757867488e-19))-.03333333333333313}(I))-(z=3-M*v))/(6-a*z)),0===Q?a-(a*N-I):(N=a*(N-F)-F,N-=I,-1===Q?.5*(a-N)-.5:1===Q?a<-.25?-2*(N-(a+.5)):1+2*(a-N):Q<=-2||Q>56?(Y=Ie(H=1-(N-a))+(Q<<20)|0,(H=Ne(H,Y))-1):(z=1,Q<20?H=(z=Ne(z,Y=1072693248-(2097152>>Q)|0))-(N-a):(H=a-(N+(z=Ne(z,Y=1023-Q<<20|0))),H+=1),Y=Ie(H)+(Q<<20)|0,Ne(H,Y)))},log:qe,log1p:Ue,log10:function(a){var v,V,Y,P,K,M,H;return Nt(a)||a<0?NaN:0===a?Oe:(K=0,(V=Ie(a))<1048576&&(K-=54,V=Ie(a*=0x40000000000000)),V>=2146435072?a+a:(K+=(V>>20)-1023|0,a=Ne(a,(V&=1048575)|1072693248^(P=V+614244&1048576|0)),M=K+=P>>20|0,Y=function(a){var v,V,Y,P,K,M,H,I,F,z;return P=a-1,(1048575&2+(Y=Ie(a)))<3?0===P?0:P*P*(.3333333333333333*P-.5):(F=(Y&=1048575)-398458|0,z=440401-Y|0,V=(I=(M=(K=P/(2+P))*K)*M)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(I),H=M*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(I)+V,(F|=z)>0?K*((v=.5*P*P)+H)-v:K*(H-P))}(a),H=3694239077158931e-28*M+25082946711645275e-27*((a-=1)+Y),(H+=.4342944818781689*(a-(v=Kn(a,0))+Y)+.4342944818781689*v)+.30102999566361177*M))},log2:function(a){var v,V,Y,P,K;if(Nt(a)||a<0)return NaN;if(gs(di,a),K=0,(V=di[0])<1048576){if(0==(2147483647&V|di[1]))return Oe;K-=54,V=Ie(a*=0x40000000000000)}return V>=2146435072?a+a:(K+=(V>>20)-1023|0,a=Ne(a,(V&=1048575)|1072693248^(P=V+614244&1048576|0)),K+=P>>20|0,Y=function(a){var v,V,Y,P,K,M,H,I,F,z;return P=a-1,(1048575&2+(Y=Ie(a)))<3?0===P?0:P*P*(.3333333333333333*P-.5):(F=(Y&=1048575)-398458|0,z=440401-Y|0,V=(I=(M=(K=P/(2+P))*K)*M)*function(a){return 0===a?.3999999999940942:.3999999999940942+a*(.22222198432149784+.15313837699209373*a)}(I),H=M*function(a){return 0===a?.6666666666666735:.6666666666666735+a*(.2857142874366239+a*(.1818357216161805+.14798198605116586*a))}(I)+V,(F|=z)>0?K*((v=.5*P*P)+H)-v:K*(H-P))}(a),1.6751713164886512e-10*((a-=1)+Y)+1.4426950407214463*(a-(v=Kn(a,0))+Y)+1.4426950407214463*v+K)},sin:function(a){var v;if(v=Ie(a),(v&=2147483647)<=1072243195)return v<1045430272?a:zs(a,0);if(v>=2146435072)return NaN;switch(3&wn(a,hi)){case 0:return zs(hi[0],hi[1]);case 1:return Ks(hi[0],hi[1]);case 2:return-zs(hi[0],hi[1]);default:return-Ks(hi[0],hi[1])}},sinh:function(a){var v;return 0===a?a:(v=Es(a),a>710.4758600739439||a<-709.089565712824?a>0?Be:Oe:v>1?v>=709.0895657128241?(v=kn(.5*v),v*=.5*v,a<0&&(v=-v),v):(v=.5*(v=kn(v))-.5/v,a<0&&(v=-v),v):a+a*(v*=v)*function(a){var v,V;return 0===a?.16666666666666666:((a<0?-a:a)<=1?(v=a*(a*(-.789474443963537*a-163.72585752598383)-11561.443576500522)-351754.9648081514,V=a*(36157.827983443196+a*(1*a-277.7110814206028))-2110529.7888489086):(v=(a=1/a)*(a*(-351754.9648081514*a-11561.443576500522)-163.72585752598383)-.789474443963537,V=1+a*(a*(36157.827983443196+-2110529.7888489086*a)-277.7110814206028)),v/V)}(v))},tan:function(a){var v,V;return v=Ie(a),(v&=2147483647)<=1072243195?v<1044381696?a:qn(a,0,1):v>=2146435072?NaN:(V=wn(a,ui),qn(ui[0],ui[1],1-((1&V)<<1)))},tanh:function(a){var v,V;if((V=Es(a))>44.014845965556525)return a<0?-1:1;if(V>=.625)V=1-2/((v=kn(2*V))+1),a<0&&(V=-V);else{if(0===a)return a;V=a+a*(v=a*a)*function(a){var v,V;return 0===a?-.3333333333333332:((a<0?-a:a)<=1?(v=a*(a*(0*a-.9643991794250523)-99.28772310019185)-1614.6876844170845,V=4844.063053251255+a*(2235.4883906010045+a*(112.81167849163293+1*a))):(v=0+(a=1/a)*(a*(-1614.6876844170845*a-99.28772310019185)-.9643991794250523),V=1+a*(112.81167849163293+a*(2235.4883906010045+4844.063053251255*a))),v/V)}(v)}return V}});const mi=Math.pow;function oi(a){return a===1/0||a===-1/0}globalThis.CroquetMath.pow=(a,v)=>{if(isNaN(a)||isNaN(v))return NaN;if(oi(a)||oi(v))return mi(a,v);if(0===a||0===v)return mi(a,v);if(a<0&&!function(a){return Number.isInteger(a)}(v))return NaN;if(1===v)return a;if(2===v)return a*a;if(3===v)return a*a*a;if(4===v)return a*a*a*a;let V=1;return a<0&&(a*=-1,V=mi(-1,v)),globalThis.CroquetMath.exp(globalThis.CroquetMath.log(a)*v)*V};var ri=function(a,v){return a<v};function ai(a){if(!(this instanceof ai))return new ai(a);this.array=[],this.size=0,this.compare=a||ri}ai.prototype.clone=function(){var a=new ai(this.compare);return a.size=this.size,a.array=this.array.slice(0,this.size),a},ai.prototype.add=function(a){var v,V,Y=this.size;for(this.array[this.size]=a,this.size+=1;Y>0&&(v=Y-1>>1,V=this.array[v],this.compare(a,V));)this.array[Y]=V,Y=v;this.array[Y]=a},ai.prototype.heapify=function(a){var v;for(this.array=a,this.size=a.length,v=this.size>>1;v>=0;v--)this._percolateDown(v)},ai.prototype._percolateUp=function(a,v){for(var V,Y,P=this.array[a];a>0&&(V=a-1>>1,Y=this.array[V],v||this.compare(P,Y));)this.array[a]=Y,a=V;this.array[a]=P},ai.prototype._percolateDown=function(a){for(var v,V,Y,P=this.size,K=this.size>>>1,M=this.array[a];a<K&&(V=1+(v=1+(a<<1)),Y=this.array[v],V<P&&this.compare(this.array[V],Y)&&(v=V,Y=this.array[V]),this.compare(Y,M));)this.array[a]=Y,a=v;this.array[a]=M},ai.prototype._removeAt=function(a){if(!(a>this.size-1||a<0))return this._percolateUp(a,!0),this.poll()},ai.prototype.remove=function(a){for(var v=0;v<this.size;v++)if(!this.compare(this.array[v],a)&&!this.compare(a,this.array[v]))return this._removeAt(v),!0;return!1},ai.prototype.removeOne=function(a){if("function"==typeof a)for(var v=0;v<this.size;v++)if(a(this.array[v]))return this._removeAt(v)},ai.prototype.removeMany=function(a,v){if("function"!=typeof a||this.size<1)return[];v=v?Math.min(v,this.size):this.size;for(var V=0,Y=new Array(v),P=0,K=new Array(this.size);V<v&&!this.isEmpty();){var M=this.poll();a(M)?Y[V++]=M:K[P++]=M}Y.length=V;for(var H=0;H<P;)this.add(K[H++]);return Y},ai.prototype.peek=function(){if(0!=this.size)return this.array[0]},ai.prototype.poll=function(){if(0!=this.size){var a=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,a}},ai.prototype.replaceTop=function(a){if(0!=this.size){var v=this.array[0];return this.array[0]=a,this._percolateDown(0),v}},ai.prototype.trim=function(){this.array=this.array.slice(0,this.size)},ai.prototype.isEmpty=function(){return 0===this.size},ai.prototype.forEach=function(a){if(!this.isEmpty()&&"function"==typeof a)for(var v=0,V=this.clone();!V.isEmpty();)a(V.poll(),v++)},ai.prototype.kSmallest=function(a){if(0==this.size)return[];a=Math.min(this.size,a);var v=new ai(this.compare);const V=Math.min((a>0?Math.pow(2,a-1):0)+1,this.size);v.size=V,v.array=this.array.slice(0,V);for(var Y=new Array(a),P=0;P<a;P++)Y[P]=v.poll();return Y};var pi=ai;class ci extends pi{poll(){const a=super.poll();return this.array[this.size]=null,a}asArray(){const a=[];return this.forEach((v=>a.push(v))),a}asUnsortedArray(){return this.array.slice(0,this.size)}}var bi={exports:{}}.exports=function(a){return function(){var v=a,V=v.lib.WordArray;function n(a,v,Y){for(var P=[],K=0,M=0;M<v;M++)if(M%4){var H=Y[a.charCodeAt(M-1)]<<M%4*2|Y[a.charCodeAt(M)]>>>6-M%4*2;P[K>>>2]|=H<<24-K%4*8,K++}return V.create(P,K)}v.enc.Base64={stringify:function(a){var v=a.words,V=a.sigBytes,Y=this._map;a.clamp();for(var P=[],K=0;K<V;K+=3)for(var M=(v[K>>>2]>>>24-K%4*8&255)<<16|(v[K+1>>>2]>>>24-(K+1)%4*8&255)<<8|v[K+2>>>2]>>>24-(K+2)%4*8&255,H=0;H<4&&K+.75*H<V;H++)P.push(Y.charAt(M>>>6*(3-H)&63));var I=Y.charAt(64);if(I)for(;P.length%4;)P.push(I);return P.join("")},parse:function(a){var v=a.length,V=this._map,Y=this._reverseMap;if(!Y){Y=this._reverseMap=[];for(var P=0;P<V.length;P++)Y[V.charCodeAt(P)]=P}var K=V.charAt(64);if(K){var M=a.indexOf(K);-1!==M&&(v=M)}return n(a,v,Y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),a.enc.Base64}(O.exports),yi={exports:{}}.exports=function(a){return a.enc.Utf8}(O.exports);!function(a){(function(){var v=a,V=v.lib,Y=V.WordArray,P=V.Hasher,K=v.algo,M=[],H=K.SHA1=P.extend({_doReset:function(){this._hash=new Y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,v){for(var V=this._hash.words,Y=V[0],P=V[1],K=V[2],H=V[3],I=V[4],F=0;F<80;F++){if(F<16)M[F]=0|a[v+F];else{var z=M[F-3]^M[F-8]^M[F-14]^M[F-16];M[F]=z<<1|z>>>31}var N=(Y<<5|Y>>>27)+I+M[F];N+=F<20?1518500249+(P&K|~P&H):F<40?1859775393+(P^K^H):F<60?(P&K|P&H|K&H)-1894007588:(P^K^H)-899497514,I=H,H=K,K=P<<30|P>>>2,P=Y,Y=N}V[0]=V[0]+Y|0,V[1]=V[1]+P|0,V[2]=V[2]+K|0,V[3]=V[3]+H|0,V[4]=V[4]+I|0},_doFinalize:function(){var a=this._data,v=a.words,V=8*this._nDataBytes,Y=8*a.sigBytes;return v[Y>>>5]|=128<<24-Y%32,v[14+(Y+64>>>9<<4)]=Math.floor(V/4294967296),v[15+(Y+64>>>9<<4)]=V,a.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var a=P.clone.call(this);return a._hash=this._hash.clone(),a}});v.SHA1=P._createHelper(H),v.HmacSHA1=P._createHmacHelper(H)})(),a.SHA1}(O.exports);!function(a){!function(){var v=a,V=v.lib.Base,Y=v.enc.Utf8;v.algo.HMAC=V.extend({init:function(a,v){a=this._hasher=new a.init,"string"==typeof v&&(v=Y.parse(v));var V=a.blockSize,P=4*V;v.sigBytes>P&&(v=a.finalize(v)),v.clamp();for(var K=this._oKey=v.clone(),M=this._iKey=v.clone(),H=K.words,I=M.words,F=0;F<V;F++)H[F]^=1549556828,I[F]^=909522486;K.sigBytes=M.sigBytes=P,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var v=this._hasher,V=v.finalize(a);return v.reset(),v.finalize(this._oKey.clone().concat(V))}})}()}(O.exports);var Zi={exports:{}}.exports=function(a){return function(){var v=a,V=v.lib,Y=V.Base,P=V.WordArray,K=v.algo,M=K.SHA1,H=K.HMAC,I=K.PBKDF2=Y.extend({cfg:Y.extend({keySize:4,hasher:M,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,v){for(var V=this.cfg,Y=H.create(V.hasher,a),K=P.create(),M=P.create([1]),I=K.words,F=M.words,z=V.keySize,N=V.iterations;I.length<z;){var Q=Y.update(v).finalize(M);Y.reset();for(var j=Q.words,U=j.length,D=Q,_=1;_<N;_++){D=Y.finalize(D),Y.reset();for(var E=D.words,B=0;B<U;B++)j[B]^=E[B]}K.concat(Q),F[0]++}return K.sigBytes=4*z,K}});v.PBKDF2=function(a,v,V){return I.create(V).compute(a,v)}}(),a.PBKDF2}(O.exports);!function(a){(function(v){var V=a,Y=V.lib,P=Y.WordArray,K=Y.Hasher,M=V.algo,H=[];!function(){for(var a=0;a<64;a++)H[a]=4294967296*v.abs(v.sin(a+1))|0}();var I=M.MD5=K.extend({_doReset:function(){this._hash=new P.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,v){for(var V=0;V<16;V++){var Y=v+V,P=a[Y];a[Y]=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8)}var K=this._hash.words,M=a[v+0],I=a[v+1],F=a[v+2],z=a[v+3],N=a[v+4],Q=a[v+5],j=a[v+6],U=a[v+7],D=a[v+8],_=a[v+9],E=a[v+10],B=a[v+11],O=a[v+12],A=a[v+13],st=a[v+14],it=a[v+15],nt=K[0],ot=K[1],rt=K[2],lt=K[3];nt=c(nt,ot,rt,lt,M,7,H[0]),lt=c(lt,nt,ot,rt,I,12,H[1]),rt=c(rt,lt,nt,ot,F,17,H[2]),ot=c(ot,rt,lt,nt,z,22,H[3]),nt=c(nt,ot,rt,lt,N,7,H[4]),lt=c(lt,nt,ot,rt,Q,12,H[5]),rt=c(rt,lt,nt,ot,j,17,H[6]),ot=c(ot,rt,lt,nt,U,22,H[7]),nt=c(nt,ot,rt,lt,D,7,H[8]),lt=c(lt,nt,ot,rt,_,12,H[9]),rt=c(rt,lt,nt,ot,E,17,H[10]),ot=c(ot,rt,lt,nt,B,22,H[11]),nt=c(nt,ot,rt,lt,O,7,H[12]),lt=c(lt,nt,ot,rt,A,12,H[13]),rt=c(rt,lt,nt,ot,st,17,H[14]),nt=d(nt,ot=c(ot,rt,lt,nt,it,22,H[15]),rt,lt,I,5,H[16]),lt=d(lt,nt,ot,rt,j,9,H[17]),rt=d(rt,lt,nt,ot,B,14,H[18]),ot=d(ot,rt,lt,nt,M,20,H[19]),nt=d(nt,ot,rt,lt,Q,5,H[20]),lt=d(lt,nt,ot,rt,E,9,H[21]),rt=d(rt,lt,nt,ot,it,14,H[22]),ot=d(ot,rt,lt,nt,N,20,H[23]),nt=d(nt,ot,rt,lt,_,5,H[24]),lt=d(lt,nt,ot,rt,st,9,H[25]),rt=d(rt,lt,nt,ot,z,14,H[26]),ot=d(ot,rt,lt,nt,D,20,H[27]),nt=d(nt,ot,rt,lt,A,5,H[28]),lt=d(lt,nt,ot,rt,F,9,H[29]),rt=d(rt,lt,nt,ot,U,14,H[30]),nt=h(nt,ot=d(ot,rt,lt,nt,O,20,H[31]),rt,lt,Q,4,H[32]),lt=h(lt,nt,ot,rt,D,11,H[33]),rt=h(rt,lt,nt,ot,B,16,H[34]),ot=h(ot,rt,lt,nt,st,23,H[35]),nt=h(nt,ot,rt,lt,I,4,H[36]),lt=h(lt,nt,ot,rt,N,11,H[37]),rt=h(rt,lt,nt,ot,U,16,H[38]),ot=h(ot,rt,lt,nt,E,23,H[39]),nt=h(nt,ot,rt,lt,A,4,H[40]),lt=h(lt,nt,ot,rt,M,11,H[41]),rt=h(rt,lt,nt,ot,z,16,H[42]),ot=h(ot,rt,lt,nt,j,23,H[43]),nt=h(nt,ot,rt,lt,_,4,H[44]),lt=h(lt,nt,ot,rt,O,11,H[45]),rt=h(rt,lt,nt,ot,it,16,H[46]),nt=u(nt,ot=h(ot,rt,lt,nt,F,23,H[47]),rt,lt,M,6,H[48]),lt=u(lt,nt,ot,rt,U,10,H[49]),rt=u(rt,lt,nt,ot,st,15,H[50]),ot=u(ot,rt,lt,nt,Q,21,H[51]),nt=u(nt,ot,rt,lt,O,6,H[52]),lt=u(lt,nt,ot,rt,z,10,H[53]),rt=u(rt,lt,nt,ot,E,15,H[54]),ot=u(ot,rt,lt,nt,I,21,H[55]),nt=u(nt,ot,rt,lt,D,6,H[56]),lt=u(lt,nt,ot,rt,it,10,H[57]),rt=u(rt,lt,nt,ot,j,15,H[58]),ot=u(ot,rt,lt,nt,A,21,H[59]),nt=u(nt,ot,rt,lt,N,6,H[60]),lt=u(lt,nt,ot,rt,B,10,H[61]),rt=u(rt,lt,nt,ot,F,15,H[62]),ot=u(ot,rt,lt,nt,_,21,H[63]),K[0]=K[0]+nt|0,K[1]=K[1]+ot|0,K[2]=K[2]+rt|0,K[3]=K[3]+lt|0},_doFinalize:function(){var a=this._data,V=a.words,Y=8*this._nDataBytes,P=8*a.sigBytes;V[P>>>5]|=128<<24-P%32;var K=v.floor(Y/4294967296),M=Y;V[15+(P+64>>>9<<4)]=16711935&(K<<8|K>>>24)|4278255360&(K<<24|K>>>8),V[14+(P+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),a.sigBytes=4*(V.length+1),this._process();for(var H=this._hash,I=H.words,F=0;F<4;F++){var z=I[F];I[F]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}return H},clone:function(){var a=K.clone.call(this);return a._hash=this._hash.clone(),a}});function c(a,v,V,Y,P,K,M){var H=a+(v&V|~v&Y)+P+M;return(H<<K|H>>>32-K)+v}function d(a,v,V,Y,P,K,M){var H=a+(v&Y|V&~Y)+P+M;return(H<<K|H>>>32-K)+v}function h(a,v,V,Y,P,K,M){var H=a+(v^V^Y)+P+M;return(H<<K|H>>>32-K)+v}function u(a,v,V,Y,P,K,M){var H=a+(V^(v|~Y))+P+M;return(H<<K|H>>>32-K)+v}V.MD5=K._createHelper(I),V.HmacMD5=K._createHmacHelper(I)})(Math),a.MD5}(O.exports);!function(a){(function(){var v=a,V=v.lib,Y=V.Base,P=V.WordArray,K=v.algo,M=K.MD5,H=K.EvpKDF=Y.extend({cfg:Y.extend({keySize:4,hasher:M,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,v){for(var V,Y=this.cfg,K=Y.hasher.create(),M=P.create(),H=M.words,I=Y.keySize,F=Y.iterations;H.length<I;){V&&K.update(V),V=K.update(a).finalize(v),K.reset();for(var z=1;z<F;z++)V=K.finalize(V),K.reset();M.concat(V)}return M.sigBytes=4*I,M}});v.EvpKDF=function(a,v,V){return H.create(V).compute(a,v)}})(),a.EvpKDF}(O.exports);!function(a){a.lib.Cipher||function(v){var V=a,Y=V.lib,P=Y.Base,K=Y.WordArray,M=Y.BufferedBlockAlgorithm,H=V.enc;H.Utf8;var I=H.Base64,F=V.algo.EvpKDF,z=Y.Cipher=M.extend({cfg:P.extend(),createEncryptor:function(a,v){return this.create(this._ENC_XFORM_MODE,a,v)},createDecryptor:function(a,v){return this.create(this._DEC_XFORM_MODE,a,v)},init:function(a,v,V){this.cfg=this.cfg.extend(V),this._xformMode=a,this._key=v,this.reset()},reset:function(){M.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(a){return"string"==typeof a?O:E}return function(a){return{encrypt:function(v,V,Y){return t(V).encrypt(a,v,V,Y)},decrypt:function(v,V,Y){return t(V).decrypt(a,v,V,Y)}}}}()});Y.StreamCipher=z.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var N=V.mode={},Q=Y.BlockCipherMode=P.extend({createEncryptor:function(a,v){return this.Encryptor.create(a,v)},createDecryptor:function(a,v){return this.Decryptor.create(a,v)},init:function(a,v){this._cipher=a,this._iv=v}}),j=N.CBC=function(){var a=Q.extend();function s(a,v,V){var Y,P=this._iv;P?(Y=P,this._iv=undefined):Y=this._prevBlock;for(var K=0;K<V;K++)a[v+K]^=Y[K]}return a.Encryptor=a.extend({processBlock:function(a,v){var V=this._cipher,Y=V.blockSize;s.call(this,a,v,Y),V.encryptBlock(a,v),this._prevBlock=a.slice(v,v+Y)}}),a.Decryptor=a.extend({processBlock:function(a,v){var V=this._cipher,Y=V.blockSize,P=a.slice(v,v+Y);V.decryptBlock(a,v),s.call(this,a,v,Y),this._prevBlock=P}}),a}(),U=(V.pad={}).Pkcs7={pad:function(a,v){for(var V=4*v,Y=V-a.sigBytes%V,P=Y<<24|Y<<16|Y<<8|Y,M=[],H=0;H<Y;H+=4)M.push(P);var I=K.create(M,Y);a.concat(I)},unpad:function(a){var v=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=v}};Y.BlockCipher=z.extend({cfg:z.cfg.extend({mode:j,padding:U}),reset:function(){var a;z.reset.call(this);var v=this.cfg,V=v.iv,Y=v.mode;this._xformMode==this._ENC_XFORM_MODE?a=Y.createEncryptor:(a=Y.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==a?this._mode.init(this,V&&V.words):(this._mode=a.call(Y,this,V&&V.words),this._mode.__creator=a)},_doProcessBlock:function(a,v){this._mode.processBlock(a,v)},_doFinalize:function(){var a,v=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(v.pad(this._data,this.blockSize),a=this._process(!0)):(a=this._process(!0),v.unpad(a)),a},blockSize:4});var D=Y.CipherParams=P.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),_=(V.format={}).OpenSSL={stringify:function(a){var v=a.ciphertext,V=a.salt;return(V?K.create([1398893684,1701076831]).concat(V).concat(v):v).toString(I)},parse:function(a){var v,V=I.parse(a),Y=V.words;return 1398893684==Y[0]&&1701076831==Y[1]&&(v=K.create(Y.slice(2,4)),Y.splice(0,4),V.sigBytes-=16),D.create({ciphertext:V,salt:v})}},E=Y.SerializableCipher=P.extend({cfg:P.extend({format:_}),encrypt:function(a,v,V,Y){Y=this.cfg.extend(Y);var P=a.createEncryptor(V,Y),K=P.finalize(v),M=P.cfg;return D.create({ciphertext:K,key:V,iv:M.iv,algorithm:a,mode:M.mode,padding:M.padding,blockSize:a.blockSize,formatter:Y.format})},decrypt:function(a,v,V,Y){return Y=this.cfg.extend(Y),v=this._parse(v,Y.format),a.createDecryptor(V,Y).finalize(v.ciphertext)},_parse:function(a,v){return"string"==typeof a?v.parse(a,this):a}}),B=(V.kdf={}).OpenSSL={execute:function(a,v,V,Y){Y||(Y=K.random(8));var P=F.create({keySize:v+V}).compute(a,Y),M=K.create(P.words.slice(v),4*V);return P.sigBytes=4*v,D.create({key:P,iv:M,salt:Y})}},O=Y.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:B}),encrypt:function(a,v,V,Y){var P=(Y=this.cfg.extend(Y)).kdf.execute(V,a.keySize,a.ivSize);Y.iv=P.iv;var K=E.encrypt.call(this,a,v,P.key,Y);return K.mixIn(P),K},decrypt:function(a,v,V,Y){Y=this.cfg.extend(Y),v=this._parse(v,Y.format);var P=Y.kdf.execute(V,a.keySize,a.ivSize,v.salt);return Y.iv=P.iv,E.decrypt.call(this,a,v,P.key,Y)}})}()}(O.exports);var fi={exports:{}}.exports=function(a){return function(){var v=a,V=v.lib.BlockCipher,Y=v.algo,P=[],K=[],M=[],H=[],I=[],F=[],z=[],N=[],Q=[],j=[];!function(){for(var a=[],v=0;v<256;v++)a[v]=v<128?v<<1:v<<1^283;var V=0,Y=0;for(v=0;v<256;v++){var U=Y^Y<<1^Y<<2^Y<<3^Y<<4;U=U>>>8^255&U^99,P[V]=U,K[U]=V;var D=a[V],_=a[D],E=a[_],B=257*a[U]^16843008*U;M[V]=B<<24|B>>>8,H[V]=B<<16|B>>>16,I[V]=B<<8|B>>>24,F[V]=B,B=16843009*E^65537*_^257*D^16843008*V,z[U]=B<<24|B>>>8,N[U]=B<<16|B>>>16,Q[U]=B<<8|B>>>24,j[U]=B,V?(V=D^a[a[a[E^D]]],Y^=a[a[Y]]):V=Y=1}}();var U=[0,1,2,4,8,16,32,64,128,27,54],D=Y.AES=V.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var a=this._keyPriorReset=this._key,v=a.words,V=a.sigBytes/4,Y=4*((this._nRounds=V+6)+1),K=this._keySchedule=[],M=0;M<Y;M++)M<V?K[M]=v[M]:(F=K[M-1],M%V?V>6&&M%V==4&&(F=P[F>>>24]<<24|P[F>>>16&255]<<16|P[F>>>8&255]<<8|P[255&F]):(F=P[(F=F<<8|F>>>24)>>>24]<<24|P[F>>>16&255]<<16|P[F>>>8&255]<<8|P[255&F],F^=U[M/V|0]<<24),K[M]=K[M-V]^F);for(var H=this._invKeySchedule=[],I=0;I<Y;I++){if(M=Y-I,I%4)var F=K[M];else F=K[M-4];H[I]=I<4||M<=4?F:z[P[F>>>24]]^N[P[F>>>16&255]]^Q[P[F>>>8&255]]^j[P[255&F]]}}},encryptBlock:function(a,v){this._doCryptBlock(a,v,this._keySchedule,M,H,I,F,P)},decryptBlock:function(a,v){var V=a[v+1];a[v+1]=a[v+3],a[v+3]=V,this._doCryptBlock(a,v,this._invKeySchedule,z,N,Q,j,K),V=a[v+1],a[v+1]=a[v+3],a[v+3]=V},_doCryptBlock:function(a,v,V,Y,P,K,M,H){for(var I=this._nRounds,F=a[v]^V[0],z=a[v+1]^V[1],N=a[v+2]^V[2],Q=a[v+3]^V[3],j=4,U=1;U<I;U++){var D=Y[F>>>24]^P[z>>>16&255]^K[N>>>8&255]^M[255&Q]^V[j++],_=Y[z>>>24]^P[N>>>16&255]^K[Q>>>8&255]^M[255&F]^V[j++],E=Y[N>>>24]^P[Q>>>16&255]^K[F>>>8&255]^M[255&z]^V[j++],B=Y[Q>>>24]^P[F>>>16&255]^K[z>>>8&255]^M[255&N]^V[j++];F=D,z=_,N=E,Q=B}D=(H[F>>>24]<<24|H[z>>>16&255]<<16|H[N>>>8&255]<<8|H[255&Q])^V[j++],_=(H[z>>>24]<<24|H[N>>>16&255]<<16|H[Q>>>8&255]<<8|H[255&F])^V[j++],E=(H[N>>>24]<<24|H[Q>>>16&255]<<16|H[F>>>8&255]<<8|H[255&z])^V[j++],B=(H[Q>>>24]<<24|H[F>>>16&255]<<16|H[z>>>8&255]<<8|H[255&N])^V[j++],a[v]=D,a[v+1]=_,a[v+2]=E,a[v+3]=B},keySize:8});v.AES=V._createHelper(D)}(),a.AES}(O.exports),Xi={exports:{}}.exports=function(a){return a.HmacSHA256}(O.exports);function Gi(a){let v=a.length;for(;--v>=0;)a[v]=0}const Li=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),xi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Si=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wi=new Array(576);Gi(Wi);const wi=new Array(60);Gi(wi);const vi=new Array(512);Gi(vi);const Vi=new Array(256);Gi(Vi);const Yi=new Array(29);Gi(Yi);const Ti=new Array(30);function Ii(a,v,V,Y,P){this.static_tree=a,this.extra_bits=v,this.extra_base=V,this.elems=Y,this.max_length=P,this.has_stree=a&&a.length}let Ci,Pi,Ki;function Fi(a,v){this.dyn_tree=a,this.max_code=0,this.stat_desc=v}Gi(Ti);const Ni=a=>a<256?vi[a]:vi[256+(a>>>7)],_i=(a,v)=>{a.pending_buf[a.pending++]=255&v,a.pending_buf[a.pending++]=v>>>8&255},ji=(a,v,V)=>{a.bi_valid>16-V?(a.bi_buf|=v<<a.bi_valid&65535,_i(a,a.bi_buf),a.bi_buf=v>>16-a.bi_valid,a.bi_valid+=V-16):(a.bi_buf|=v<<a.bi_valid&65535,a.bi_valid+=V)},Qi=(a,v,V)=>{ji(a,V[2*v],V[2*v+1])},Ei=(a,v)=>{let V=0;do{V|=1&a,a>>>=1,V<<=1}while(--v>0);return V>>>1},Ji=(a,v,V)=>{const Y=new Array(16);let P,K,M=0;for(P=1;P<=15;P++)Y[P]=M=M+V[P-1]<<1;for(K=0;K<=v;K++){let v=a[2*K+1];0!==v&&(a[2*K]=Ei(Y[v]++,v))}},Ui=a=>{let v;for(v=0;v<286;v++)a.dyn_ltree[2*v]=0;for(v=0;v<30;v++)a.dyn_dtree[2*v]=0;for(v=0;v<19;v++)a.bl_tree[2*v]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Di=a=>{a.bi_valid>8?_i(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Oi=(a,v,V,Y)=>{const P=2*v,K=2*V;return a[P]<a[K]||a[P]===a[K]&&Y[v]<=Y[V]},Bi=(a,v,V)=>{const Y=a.heap[V];let P=V<<1;for(;P<=a.heap_len&&(P<a.heap_len&&Oi(v,a.heap[P+1],a.heap[P],a.depth)&&P++,!Oi(v,Y,a.heap[P],a.depth));)a.heap[V]=a.heap[P],V=P,P<<=1;a.heap[V]=Y},Ai=(a,v,V)=>{let Y,P,K,M,H=0;if(0!==a.last_lit)do{Y=a.pending_buf[a.d_buf+2*H]<<8|a.pending_buf[a.d_buf+2*H+1],P=a.pending_buf[a.l_buf+H],H++,0===Y?Qi(a,P,v):(K=Vi[P],Qi(a,K+256+1,v),M=Li[K],0!==M&&(P-=Yi[K],ji(a,P,M)),Y--,K=Ni(Y),Qi(a,K,V),M=xi[K],0!==M&&(Y-=Ti[K],ji(a,Y,M)))}while(H<a.last_lit);Qi(a,256,v)},$i=(a,v)=>{const V=v.dyn_tree,Y=v.stat_desc.static_tree,P=v.stat_desc.has_stree,K=v.stat_desc.elems;let M,H,I,F=-1;for(a.heap_len=0,a.heap_max=573,M=0;M<K;M++)0!==V[2*M]?(a.heap[++a.heap_len]=F=M,a.depth[M]=0):V[2*M+1]=0;for(;a.heap_len<2;)I=a.heap[++a.heap_len]=F<2?++F:0,V[2*I]=1,a.depth[I]=0,a.opt_len--,P&&(a.static_len-=Y[2*I+1]);for(v.max_code=F,M=a.heap_len>>1;M>=1;M--)Bi(a,V,M);I=K;do{M=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Bi(a,V,1),H=a.heap[1],a.heap[--a.heap_max]=M,a.heap[--a.heap_max]=H,V[2*I]=V[2*M]+V[2*H],a.depth[I]=(a.depth[M]>=a.depth[H]?a.depth[M]:a.depth[H])+1,V[2*M+1]=V[2*H+1]=I,a.heap[1]=I++,Bi(a,V,1)}while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],((a,v)=>{const V=v.dyn_tree,Y=v.max_code,P=v.stat_desc.static_tree,K=v.stat_desc.has_stree,M=v.stat_desc.extra_bits,H=v.stat_desc.extra_base,I=v.stat_desc.max_length;let F,z,N,Q,j,U,D=0;for(Q=0;Q<=15;Q++)a.bl_count[Q]=0;for(V[2*a.heap[a.heap_max]+1]=0,F=a.heap_max+1;F<573;F++)z=a.heap[F],Q=V[2*V[2*z+1]+1]+1,Q>I&&(Q=I,D++),V[2*z+1]=Q,z>Y||(a.bl_count[Q]++,j=0,z>=H&&(j=M[z-H]),U=V[2*z],a.opt_len+=U*(Q+j),K&&(a.static_len+=U*(P[2*z+1]+j)));if(0!==D){do{for(Q=I-1;0===a.bl_count[Q];)Q--;a.bl_count[Q]--,a.bl_count[Q+1]+=2,a.bl_count[I]--,D-=2}while(D>0);for(Q=I;0!==Q;Q--)for(z=a.bl_count[Q];0!==z;)N=a.heap[--F],N>Y||(V[2*N+1]!==Q&&(a.opt_len+=(Q-V[2*N+1])*V[2*N],V[2*N+1]=Q),z--)}})(a,v),Ji(V,F,a.bl_count)},qi=(a,v,V)=>{let Y,P,K=-1,M=v[1],H=0,I=7,F=4;for(0===M&&(I=138,F=3),v[2*(V+1)+1]=65535,Y=0;Y<=V;Y++)P=M,M=v[2*(Y+1)+1],++H<I&&P===M||(H<F?a.bl_tree[2*P]+=H:0!==P?(P!==K&&a.bl_tree[2*P]++,a.bl_tree[32]++):H<=10?a.bl_tree[34]++:a.bl_tree[36]++,H=0,K=P,0===M?(I=138,F=3):P===M?(I=6,F=3):(I=7,F=4))},to=(a,v,V)=>{let Y,P,K=-1,M=v[1],H=0,I=7,F=4;for(0===M&&(I=138,F=3),Y=0;Y<=V;Y++)if(P=M,M=v[2*(Y+1)+1],!(++H<I&&P===M)){if(H<F)do{Qi(a,P,a.bl_tree)}while(0!=--H);else 0!==P?(P!==K&&(Qi(a,P,a.bl_tree),H--),Qi(a,16,a.bl_tree),ji(a,H-3,2)):H<=10?(Qi(a,17,a.bl_tree),ji(a,H-3,3)):(Qi(a,18,a.bl_tree),ji(a,H-11,7));H=0,K=P,0===M?(I=138,F=3):P===M?(I=6,F=3):(I=7,F=4)}};let Ri=!1;const so=(a,v,V,Y)=>{ji(a,0+(Y?1:0),3),((a,v,V,Y)=>{Di(a),_i(a,V),_i(a,~V),a.pending_buf.set(a.window.subarray(v,v+V),a.pending),a.pending+=V})(a,v,V)};var ki={_tr_init:a=>{Ri||((()=>{let a,v,V,Y,P;const K=new Array(16);for(V=0,Y=0;Y<28;Y++)for(Yi[Y]=V,a=0;a<1<<Li[Y];a++)Vi[V++]=Y;for(Vi[V-1]=Y,P=0,Y=0;Y<16;Y++)for(Ti[Y]=P,a=0;a<1<<xi[Y];a++)vi[P++]=Y;for(P>>=7;Y<30;Y++)for(Ti[Y]=P<<7,a=0;a<1<<xi[Y]-7;a++)vi[256+P++]=Y;for(v=0;v<=15;v++)K[v]=0;for(a=0;a<=143;)Wi[2*a+1]=8,a++,K[8]++;for(;a<=255;)Wi[2*a+1]=9,a++,K[9]++;for(;a<=279;)Wi[2*a+1]=7,a++,K[7]++;for(;a<=287;)Wi[2*a+1]=8,a++,K[8]++;for(Ji(Wi,287,K),a=0;a<30;a++)wi[2*a+1]=5,wi[2*a]=Ei(a,5);Ci=new Ii(Wi,Li,257,286,15),Pi=new Ii(wi,xi,0,30,15),Ki=new Ii(new Array(0),gi,0,19,7)})(),Ri=!0),a.l_desc=new Fi(a.dyn_ltree,Ci),a.d_desc=new Fi(a.dyn_dtree,Pi),a.bl_desc=new Fi(a.bl_tree,Ki),a.bi_buf=0,a.bi_valid=0,Ui(a)},_tr_stored_block:so,_tr_flush_block:(a,v,V,Y)=>{let P,K,M=0;a.level>0?(2===a.strm.data_type&&(a.strm.data_type=(a=>{let v,V=4093624447;for(v=0;v<=31;v++,V>>>=1)if(1&V&&0!==a.dyn_ltree[2*v])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(v=32;v<256;v++)if(0!==a.dyn_ltree[2*v])return 1;return 0})(a)),$i(a,a.l_desc),$i(a,a.d_desc),M=(a=>{let v;for(qi(a,a.dyn_ltree,a.l_desc.max_code),qi(a,a.dyn_dtree,a.d_desc.max_code),$i(a,a.bl_desc),v=18;v>=3&&0===a.bl_tree[2*Si[v]+1];v--);return a.opt_len+=3*(v+1)+5+5+4,v})(a),P=a.opt_len+3+7>>>3,K=a.static_len+3+7>>>3,K<=P&&(P=K)):P=K=V+5,V+4<=P&&-1!==v?so(a,v,V,Y):4===a.strategy||K===P?(ji(a,2+(Y?1:0),3),Ai(a,Wi,wi)):(ji(a,4+(Y?1:0),3),((a,v,V,Y)=>{let P;for(ji(a,v-257,5),ji(a,V-1,5),ji(a,Y-4,4),P=0;P<Y;P++)ji(a,a.bl_tree[2*Si[P]+1],3);to(a,a.dyn_ltree,v-1),to(a,a.dyn_dtree,V-1)})(a,a.l_desc.max_code+1,a.d_desc.max_code+1,M+1),Ai(a,a.dyn_ltree,a.dyn_dtree)),Ui(a),Y&&Di(a)},_tr_tally:(a,v,V)=>(a.pending_buf[a.d_buf+2*a.last_lit]=v>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&v,a.pending_buf[a.l_buf+a.last_lit]=255&V,a.last_lit++,0===v?a.dyn_ltree[2*V]++:(a.matches++,v--,a.dyn_ltree[2*(Vi[V]+256+1)]++,a.dyn_dtree[2*Ni(v)]++),a.last_lit===a.lit_bufsize-1),_tr_align:a=>{ji(a,2,3),Qi(a,256,Wi),(a=>{16===a.bi_valid?(_i(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)})(a)}},oo=(a,v,V,Y)=>{let P=65535&a|0,K=a>>>16&65535|0,M=0;for(;0!==V;){M=V>2e3?2e3:V,V-=M;do{P=P+v[Y++]|0,K=K+P|0}while(--M);P%=65521,K%=65521}return P|K<<16|0};const Mi=new Uint32Array((()=>{let a,v=[];for(var V=0;V<256;V++){a=V;for(var Y=0;Y<8;Y++)a=1&a?3988292384^a>>>1:a>>>1;v[V]=a}return v})());var ao=(a,v,V,Y)=>{const P=Mi,K=Y+V;a^=-1;for(let V=Y;V<K;V++)a=a>>>8^P[255&(a^v[V])];return-1^a},Hi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tn,_tr_stored_block:en,_tr_flush_block:sn,_tr_tally:nn,_tr_align:on}=ki,{Z_NO_FLUSH:rn,Z_PARTIAL_FLUSH:an,Z_FULL_FLUSH:hn,Z_FINISH:mn,Z_BLOCK:pn,Z_OK:bn,Z_STREAM_END:yn,Z_STREAM_ERROR:Zn,Z_DATA_ERROR:fn,Z_BUF_ERROR:Xn,Z_DEFAULT_COMPRESSION:Gn,Z_FILTERED:Ln,Z_HUFFMAN_ONLY:xn,Z_RLE:gn,Z_FIXED:Sn,Z_DEFAULT_STRATEGY:Wn,Z_UNKNOWN:vn,Z_DEFLATED:Vn}=zi,Yo=(a,v)=>(a.msg=Hi[v],v),Mo=a=>(a<<1)-(a>4?9:0),Io=a=>{let v=a.length;for(;--v>=0;)a[v]=0};let Ko=(a,v,V)=>(v<<a.hash_shift^V)&a.hash_mask;const Ho=a=>{const v=a.state;let V=v.pending;V>a.avail_out&&(V=a.avail_out),0!==V&&(a.output.set(v.pending_buf.subarray(v.pending_out,v.pending_out+V),a.next_out),a.next_out+=V,v.pending_out+=V,a.total_out+=V,a.avail_out-=V,v.pending-=V,0===v.pending&&(v.pending_out=0))},zo=(a,v)=>{sn(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,v),a.block_start=a.strstart,Ho(a.strm)},Fo=(a,v)=>{a.pending_buf[a.pending++]=v},No=(a,v)=>{a.pending_buf[a.pending++]=v>>>8&255,a.pending_buf[a.pending++]=255&v},_o=(a,v,V,Y)=>{let P=a.avail_in;return P>Y&&(P=Y),0===P?0:(a.avail_in-=P,v.set(a.input.subarray(a.next_in,a.next_in+P),V),1===a.state.wrap?a.adler=oo(a.adler,v,P,V):2===a.state.wrap&&(a.adler=ao(a.adler,v,P,V)),a.next_in+=P,a.total_in+=P,P)},jo=(a,v)=>{let V,Y,P=a.max_chain_length,K=a.strstart,M=a.prev_length,H=a.nice_match;const I=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,F=a.window,z=a.w_mask,N=a.prev,Q=a.strstart+258;let j=F[K+M-1],U=F[K+M];a.prev_length>=a.good_match&&(P>>=2),H>a.lookahead&&(H=a.lookahead);do{if(V=v,F[V+M]===U&&F[V+M-1]===j&&F[V]===F[K]&&F[++V]===F[K+1]){K+=2,V++;do{}while(F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&F[++K]===F[++V]&&K<Q);if(Y=258-(Q-K),K=Q-258,Y>M){if(a.match_start=v,M=Y,Y>=H)break;j=F[K+M-1],U=F[K+M]}}}while((v=N[v&z])>I&&0!=--P);return M<=a.lookahead?M:a.lookahead},Qo=a=>{const v=a.w_size;let V,Y,P,K,M;do{if(K=a.window_size-a.lookahead-a.strstart,a.strstart>=v+(v-262)){a.window.set(a.window.subarray(v,v+v),0),a.match_start-=v,a.strstart-=v,a.block_start-=v,Y=a.hash_size,V=Y;do{P=a.head[--V],a.head[V]=P>=v?P-v:0}while(--Y);Y=v,V=Y;do{P=a.prev[--V],a.prev[V]=P>=v?P-v:0}while(--Y);K+=v}if(0===a.strm.avail_in)break;if(Y=_o(a.strm,a.window,a.strstart+a.lookahead,K),a.lookahead+=Y,a.lookahead+a.insert>=3)for(M=a.strstart-a.insert,a.ins_h=a.window[M],a.ins_h=Ko(a,a.ins_h,a.window[M+1]);a.insert&&(a.ins_h=Ko(a,a.ins_h,a.window[M+3-1]),a.prev[M&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=M,M++,a.insert--,!(a.lookahead+a.insert<3)););}while(a.lookahead<262&&0!==a.strm.avail_in)},Eo=(a,v)=>{let V,Y;for(;;){if(a.lookahead<262){if(Qo(a),a.lookahead<262&&v===rn)return 1;if(0===a.lookahead)break}if(V=0,a.lookahead>=3&&(a.ins_h=Ko(a,a.ins_h,a.window[a.strstart+3-1]),V=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==V&&a.strstart-V<=a.w_size-262&&(a.match_length=jo(a,V)),a.match_length>=3)if(Y=nn(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=3){a.match_length--;do{a.strstart++,a.ins_h=Ko(a,a.ins_h,a.window[a.strstart+3-1]),V=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart}while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ko(a,a.ins_h,a.window[a.strstart+1]);else Y=nn(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(Y&&(zo(a,!1),0===a.strm.avail_out))return 1}return a.insert=a.strstart<2?a.strstart:2,v===mn?(zo(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(zo(a,!1),0===a.strm.avail_out)?1:2},Jo=(a,v)=>{let V,Y,P;for(;;){if(a.lookahead<262){if(Qo(a),a.lookahead<262&&v===rn)return 1;if(0===a.lookahead)break}if(V=0,a.lookahead>=3&&(a.ins_h=Ko(a,a.ins_h,a.window[a.strstart+3-1]),V=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==V&&a.prev_length<a.max_lazy_match&&a.strstart-V<=a.w_size-262&&(a.match_length=jo(a,V),a.match_length<=5&&(a.strategy===Ln||3===a.match_length&&a.strstart-a.match_start>4096)&&(a.match_length=2)),a.prev_length>=3&&a.match_length<=a.prev_length){P=a.strstart+a.lookahead-3,Y=nn(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do{++a.strstart<=P&&(a.ins_h=Ko(a,a.ins_h,a.window[a.strstart+3-1]),V=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart)}while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,Y&&(zo(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(Y=nn(a,0,a.window[a.strstart-1]),Y&&zo(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(Y=nn(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<2?a.strstart:2,v===mn?(zo(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(zo(a,!1),0===a.strm.avail_out)?1:2};function Uo(a,v,V,Y,P){this.good_length=a,this.max_lazy=v,this.nice_length=V,this.max_chain=Y,this.func=P}const Yn=[new Uo(0,0,0,0,((a,v)=>{let V=65535;for(V>a.pending_buf_size-5&&(V=a.pending_buf_size-5);;){if(a.lookahead<=1){if(Qo(a),0===a.lookahead&&v===rn)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;const Y=a.block_start+V;if((0===a.strstart||a.strstart>=Y)&&(a.lookahead=a.strstart-Y,a.strstart=Y,zo(a,!1),0===a.strm.avail_out))return 1;if(a.strstart-a.block_start>=a.w_size-262&&(zo(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,v===mn?(zo(a,!0),0===a.strm.avail_out?3:4):(a.strstart>a.block_start&&(zo(a,!1),a.strm.avail_out),1)})),new Uo(4,4,8,4,Eo),new Uo(4,5,16,8,Eo),new Uo(4,6,32,32,Eo),new Uo(4,4,16,16,Jo),new Uo(8,16,32,32,Jo),new Uo(8,16,128,128,Jo),new Uo(8,32,128,256,Jo),new Uo(32,128,258,1024,Jo),new Uo(32,258,258,4096,Jo)];function Oo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Io(this.dyn_ltree),Io(this.dyn_dtree),Io(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Io(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Io(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Bo=a=>{if(!a||!a.state)return Yo(a,Zn);a.total_in=a.total_out=0,a.data_type=vn;const v=a.state;return v.pending=0,v.pending_out=0,v.wrap<0&&(v.wrap=-v.wrap),v.status=v.wrap?42:113,a.adler=2===v.wrap?0:1,v.last_flush=rn,tn(v),bn},Ao=a=>{const v=Bo(a);var V;return v===bn&&((V=a.state).window_size=2*V.w_size,Io(V.head),V.max_lazy_match=Yn[V.level].max_lazy,V.good_match=Yn[V.level].good_length,V.nice_match=Yn[V.level].nice_length,V.max_chain_length=Yn[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=2,V.match_available=0,V.ins_h=0),v},$o=(a,v,V,Y,P,K)=>{if(!a)return Zn;let M=1;if(v===Gn&&(v=6),Y<0?(M=0,Y=-Y):Y>15&&(M=2,Y-=16),P<1||P>9||V!==Vn||Y<8||Y>15||v<0||v>9||K<0||K>Sn)return Yo(a,Zn);8===Y&&(Y=9);const H=new Oo;return a.state=H,H.strm=a,H.wrap=M,H.gzhead=null,H.w_bits=Y,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=P+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+3-1)/3),H.window=new Uint8Array(2*H.w_size),H.head=new Uint16Array(H.hash_size),H.prev=new Uint16Array(H.w_size),H.lit_bufsize=1<<P+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new Uint8Array(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=v,H.strategy=K,H.method=V,Ao(a)};var Tn={deflateInit:(a,v)=>$o(a,v,Vn,15,8,Wn),deflateInit2:$o,deflateReset:Ao,deflateResetKeep:Bo,deflateSetHeader:(a,v)=>a&&a.state?2!==a.state.wrap?Zn:(a.state.gzhead=v,bn):Zn,deflate:(a,v)=>{let V,Y;if(!a||!a.state||v>pn||v<0)return a?Yo(a,Zn):Zn;const P=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===P.status&&v!==mn)return Yo(a,0===a.avail_out?Xn:Zn);P.strm=a;const K=P.last_flush;if(P.last_flush=v,42===P.status)if(2===P.wrap)a.adler=0,Fo(P,31),Fo(P,139),Fo(P,8),P.gzhead?(Fo(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),Fo(P,255&P.gzhead.time),Fo(P,P.gzhead.time>>8&255),Fo(P,P.gzhead.time>>16&255),Fo(P,P.gzhead.time>>24&255),Fo(P,9===P.level?2:P.strategy>=xn||P.level<2?4:0),Fo(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(Fo(P,255&P.gzhead.extra.length),Fo(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(a.adler=ao(a.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(Fo(P,0),Fo(P,0),Fo(P,0),Fo(P,0),Fo(P,0),Fo(P,9===P.level?2:P.strategy>=xn||P.level<2?4:0),Fo(P,3),P.status=113);else{let v=Vn+(P.w_bits-8<<4)<<8,V=-1;V=P.strategy>=xn||P.level<2?0:P.level<6?1:6===P.level?2:3,v|=V<<6,0!==P.strstart&&(v|=32),v+=31-v%31,P.status=113,No(P,v),0!==P.strstart&&(No(P,a.adler>>>16),No(P,65535&a.adler)),a.adler=1}if(69===P.status)if(P.gzhead.extra){for(V=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),Ho(a),V=P.pending,P.pending!==P.pending_buf_size));)Fo(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(73===P.status)if(P.gzhead.name){V=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),Ho(a),V=P.pending,P.pending===P.pending_buf_size)){Y=1;break}Y=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,Fo(P,Y)}while(0!==Y);P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),0===Y&&(P.gzindex=0,P.status=91)}else P.status=91;if(91===P.status)if(P.gzhead.comment){V=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),Ho(a),V=P.pending,P.pending===P.pending_buf_size)){Y=1;break}Y=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,Fo(P,Y)}while(0!==Y);P.gzhead.hcrc&&P.pending>V&&(a.adler=ao(a.adler,P.pending_buf,P.pending-V,V)),0===Y&&(P.status=103)}else P.status=103;if(103===P.status&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&Ho(a),P.pending+2<=P.pending_buf_size&&(Fo(P,255&a.adler),Fo(P,a.adler>>8&255),a.adler=0,P.status=113)):P.status=113),0!==P.pending){if(Ho(a),0===a.avail_out)return P.last_flush=-1,bn}else if(0===a.avail_in&&Mo(v)<=Mo(K)&&v!==mn)return Yo(a,Xn);if(666===P.status&&0!==a.avail_in)return Yo(a,Xn);if(0!==a.avail_in||0!==P.lookahead||v!==rn&&666!==P.status){let V=P.strategy===xn?((a,v)=>{let V;for(;;){if(0===a.lookahead&&(Qo(a),0===a.lookahead)){if(v===rn)return 1;break}if(a.match_length=0,V=nn(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,V&&(zo(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,v===mn?(zo(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(zo(a,!1),0===a.strm.avail_out)?1:2})(P,v):P.strategy===gn?((a,v)=>{let V,Y,P,K;const M=a.window;for(;;){if(a.lookahead<=258){if(Qo(a),a.lookahead<=258&&v===rn)return 1;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(P=a.strstart-1,Y=M[P],Y===M[++P]&&Y===M[++P]&&Y===M[++P])){K=a.strstart+258;do{}while(Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&Y===M[++P]&&P<K);a.match_length=258-(K-P),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(V=nn(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(V=nn(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),V&&(zo(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,v===mn?(zo(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(zo(a,!1),0===a.strm.avail_out)?1:2})(P,v):Yn[P.level].func(P,v);if(3!==V&&4!==V||(P.status=666),1===V||3===V)return 0===a.avail_out&&(P.last_flush=-1),bn;if(2===V&&(v===an?on(P):v!==pn&&(en(P,0,0,!1),v===hn&&(Io(P.head),0===P.lookahead&&(P.strstart=0,P.block_start=0,P.insert=0))),Ho(a),0===a.avail_out))return P.last_flush=-1,bn}return v!==mn?bn:P.wrap<=0?yn:(2===P.wrap?(Fo(P,255&a.adler),Fo(P,a.adler>>8&255),Fo(P,a.adler>>16&255),Fo(P,a.adler>>24&255),Fo(P,255&a.total_in),Fo(P,a.total_in>>8&255),Fo(P,a.total_in>>16&255),Fo(P,a.total_in>>24&255)):(No(P,a.adler>>>16),No(P,65535&a.adler)),Ho(a),P.wrap>0&&(P.wrap=-P.wrap),0!==P.pending?bn:yn)},deflateEnd:a=>{if(!a||!a.state)return Zn;const v=a.state.status;return 42!==v&&69!==v&&73!==v&&91!==v&&103!==v&&113!==v&&666!==v?Yo(a,Zn):(a.state=null,113===v?Yo(a,fn):bn)},deflateSetDictionary:(a,v)=>{let V=v.length;if(!a||!a.state)return Zn;const Y=a.state,P=Y.wrap;if(2===P||1===P&&42!==Y.status||Y.lookahead)return Zn;if(1===P&&(a.adler=oo(a.adler,v,V,0)),Y.wrap=0,V>=Y.w_size){0===P&&(Io(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0);let a=new Uint8Array(Y.w_size);a.set(v.subarray(V-Y.w_size,V),0),v=a,V=Y.w_size}const K=a.avail_in,M=a.next_in,H=a.input;for(a.avail_in=V,a.next_in=0,a.input=v,Qo(Y);Y.lookahead>=3;){let a=Y.strstart,v=Y.lookahead-2;do{Y.ins_h=Ko(Y,Y.ins_h,Y.window[a+3-1]),Y.prev[a&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=a,a++}while(--v);Y.strstart=a,Y.lookahead=2,Qo(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=2,Y.match_available=0,a.next_in=M,a.input=H,a.avail_in=K,Y.wrap=P,bn},deflateInfo:"pako deflate (from Nodeca project)"};const tr=(a,v)=>Object.prototype.hasOwnProperty.call(a,v);var er=function(a){const v=Array.prototype.slice.call(arguments,1);for(;v.length;){const V=v.shift();if(V){if("object"!=typeof V)throw new TypeError(V+"must be non-object");for(const v in V)tr(V,v)&&(a[v]=V[v])}}return a},sr=a=>{let v=0;for(let V=0,Y=a.length;V<Y;V++)v+=a[V].length;const V=new Uint8Array(v);for(let v=0,Y=0,P=a.length;v<P;v++){let P=a[v];V.set(P,Y),Y+=P.length}return V};let Cn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Y){Cn=!1}const Pn=new Uint8Array(256);for(let a=0;a<256;a++)Pn[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;Pn[254]=Pn[254]=1;var or=a=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(a);let v,V,Y,P,K,M=a.length,H=0;for(P=0;P<M;P++)V=a.charCodeAt(P),55296==(64512&V)&&P+1<M&&(Y=a.charCodeAt(P+1),56320==(64512&Y)&&(V=65536+(V-55296<<10)+(Y-56320),P++)),H+=V<128?1:V<2048?2:V<65536?3:4;for(v=new Uint8Array(H),K=0,P=0;K<H;P++)V=a.charCodeAt(P),55296==(64512&V)&&P+1<M&&(Y=a.charCodeAt(P+1),56320==(64512&Y)&&(V=65536+(V-55296<<10)+(Y-56320),P++)),V<128?v[K++]=V:V<2048?(v[K++]=192|V>>>6,v[K++]=128|63&V):V<65536?(v[K++]=224|V>>>12,v[K++]=128|V>>>6&63,v[K++]=128|63&V):(v[K++]=240|V>>>18,v[K++]=128|V>>>12&63,v[K++]=128|V>>>6&63,v[K++]=128|63&V);return v},rr=(a,v)=>{const V=v||a.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(a.subarray(0,v));let Y,P;const K=new Array(2*V);for(P=0,Y=0;Y<V;){let v=a[Y++];if(v<128){K[P++]=v;continue}let M=Pn[v];if(M>4)K[P++]=65533,Y+=M-1;else{for(v&=2===M?31:3===M?15:7;M>1&&Y<V;)v=v<<6|63&a[Y++],M--;M>1?K[P++]=65533:v<65536?K[P++]=v:(v-=65536,K[P++]=55296|v>>10&1023,K[P++]=56320|1023&v)}}return((a,v)=>{if(v<65534&&a.subarray&&Cn)return String.fromCharCode.apply(null,a.length===v?a:a.subarray(0,v));let V="";for(let Y=0;Y<v;Y++)V+=String.fromCharCode(a[Y]);return V})(K,P)},ar=(a,v)=>{(v=v||a.length)>a.length&&(v=a.length);let V=v-1;for(;V>=0&&128==(192&a[V]);)V--;return V<0||0===V?v:V+Pn[a[V]]>v?V:v},lr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Rn=Object.prototype.toString,{Z_NO_FLUSH:Mn,Z_SYNC_FLUSH:Hn,Z_FULL_FLUSH:In,Z_FINISH:Fn,Z_OK:zn,Z_STREAM_END:Nn,Z_DEFAULT_COMPRESSION:Qn,Z_DEFAULT_STRATEGY:jn,Z_DEFLATED:Jn}=zi;function Zr(a){this.options=er({level:Qn,method:Jn,chunkSize:16384,windowBits:15,memLevel:8,strategy:jn},a||{});let v=this.options;v.raw&&v.windowBits>0?v.windowBits=-v.windowBits:v.gzip&&v.windowBits>0&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lr,this.strm.avail_out=0;let V=Tn.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(V!==zn)throw new Error(Hi[V]);if(v.header&&Tn.deflateSetHeader(this.strm,v.header),v.dictionary){let a;if(a="string"==typeof v.dictionary?or(v.dictionary):"[object ArrayBuffer]"===Rn.call(v.dictionary)?new Uint8Array(v.dictionary):v.dictionary,V=Tn.deflateSetDictionary(this.strm,a),V!==zn)throw new Error(Hi[V]);this._dict_set=!0}}function wr(a,v){const V=new Zr(v);if(V.push(a,!0),V.err)throw V.msg||Hi[V.err];return V.result}Zr.prototype.push=function(a,v){const V=this.strm,Y=this.options.chunkSize;let P,K;if(this.ended)return!1;for(K=v===~~v?v:!0===v?Fn:Mn,"string"==typeof a?V.input=or(a):"[object ArrayBuffer]"===Rn.call(a)?V.input=new Uint8Array(a):V.input=a,V.next_in=0,V.avail_in=V.input.length;;)if(0===V.avail_out&&(V.output=new Uint8Array(Y),V.next_out=0,V.avail_out=Y),(K===Hn||K===In)&&V.avail_out<=6)this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;else{if(P=Tn.deflate(V,K),P===Nn)return V.next_out>0&&this.onData(V.output.subarray(0,V.next_out)),P=Tn.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===zn;if(0!==V.avail_out){if(K>0&&V.next_out>0)this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;else if(0===V.avail_in)break}else this.onData(V.output)}return!0},Zr.prototype.onData=function(a){this.chunks.push(a)},Zr.prototype.onEnd=function(a){a===zn&&(this.result=sr(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var Un={Deflate:Zr,deflate:wr,deflateRaw:function(a,v){return(v=v||{}).raw=!0,wr(a,v)},gzip:function(a,v){return(v=v||{}).gzip=!0,wr(a,v)},constants:zi},vr=function(a,v){let V,Y,P,K,M,H,I,F,z,N,Q,j,U,D,_,E,B,O,A,st,it,nt,ot,rt;const lt=a.state;V=a.next_in,ot=a.input,Y=V+(a.avail_in-5),P=a.next_out,rt=a.output,K=P-(v-a.avail_out),M=P+(a.avail_out-257),H=lt.dmax,I=lt.wsize,F=lt.whave,z=lt.wnext,N=lt.window,Q=lt.hold,j=lt.bits,U=lt.lencode,D=lt.distcode,_=(1<<lt.lenbits)-1,E=(1<<lt.distbits)-1;t:do{j<15&&(Q+=ot[V++]<<j,j+=8,Q+=ot[V++]<<j,j+=8),B=U[Q&_];e:for(;;){if(O=B>>>24,Q>>>=O,j-=O,O=B>>>16&255,0===O)rt[P++]=65535&B;else{if(!(16&O)){if(0==(64&O)){B=U[(65535&B)+(Q&(1<<O)-1)];continue e}if(32&O){lt.mode=12;break t}a.msg="invalid literal/length code",lt.mode=30;break t}A=65535&B,O&=15,O&&(j<O&&(Q+=ot[V++]<<j,j+=8),A+=Q&(1<<O)-1,Q>>>=O,j-=O),j<15&&(Q+=ot[V++]<<j,j+=8,Q+=ot[V++]<<j,j+=8),B=D[Q&E];s:for(;;){if(O=B>>>24,Q>>>=O,j-=O,O=B>>>16&255,!(16&O)){if(0==(64&O)){B=D[(65535&B)+(Q&(1<<O)-1)];continue s}a.msg="invalid distance code",lt.mode=30;break t}if(st=65535&B,O&=15,j<O&&(Q+=ot[V++]<<j,j+=8,j<O&&(Q+=ot[V++]<<j,j+=8)),st+=Q&(1<<O)-1,st>H){a.msg="invalid distance too far back",lt.mode=30;break t}if(Q>>>=O,j-=O,O=P-K,st>O){if(O=st-O,O>F&&lt.sane){a.msg="invalid distance too far back",lt.mode=30;break t}if(it=0,nt=N,0===z){if(it+=I-O,O<A){A-=O;do{rt[P++]=N[it++]}while(--O);it=P-st,nt=rt}}else if(z<O){if(it+=I+z-O,O-=z,O<A){A-=O;do{rt[P++]=N[it++]}while(--O);if(it=0,z<A){O=z,A-=O;do{rt[P++]=N[it++]}while(--O);it=P-st,nt=rt}}}else if(it+=z-O,O<A){A-=O;do{rt[P++]=N[it++]}while(--O);it=P-st,nt=rt}for(;A>2;)rt[P++]=nt[it++],rt[P++]=nt[it++],rt[P++]=nt[it++],A-=3;A&&(rt[P++]=nt[it++],A>1&&(rt[P++]=nt[it++]))}else{it=P-st;do{rt[P++]=rt[it++],rt[P++]=rt[it++],rt[P++]=rt[it++],A-=3}while(A>2);A&&(rt[P++]=rt[it++],A>1&&(rt[P++]=rt[it++]))}break}}break}}while(V<Y&&P<M);A=j>>3,V-=A,j-=A<<3,Q&=(1<<j)-1,a.next_in=V,a.next_out=P,a.avail_in=V<Y?Y-V+5:5-(V-Y),a.avail_out=P<M?M-P+257:257-(P-M),lt.hold=Q,lt.bits=j};const Dn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),En=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Bn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var kr=(a,v,V,Y,P,K,M,H)=>{const I=H.bits;let F,z,N,Q,j,U,D=0,_=0,E=0,B=0,O=0,A=0,st=0,it=0,nt=0,ot=0,rt=null,lt=0;const at=new Uint16Array(16),ct=new Uint16Array(16);let dt,ut,mt,pt=null,Zt=0;for(D=0;D<=15;D++)at[D]=0;for(_=0;_<Y;_++)at[v[V+_]]++;for(O=I,B=15;B>=1&&0===at[B];B--);if(O>B&&(O=B),0===B)return P[K++]=20971520,P[K++]=20971520,H.bits=1,0;for(E=1;E<B&&0===at[E];E++);for(O<E&&(O=E),it=1,D=1;D<=15;D++)if(it<<=1,it-=at[D],it<0)return-1;if(it>0&&(0===a||1!==B))return-1;for(ct[1]=0,D=1;D<15;D++)ct[D+1]=ct[D]+at[D];for(_=0;_<Y;_++)0!==v[V+_]&&(M[ct[v[V+_]]++]=_);if(0===a?(rt=pt=M,U=19):1===a?(rt=Dn,lt-=257,pt=_n,Zt-=257,U=256):(rt=En,pt=Bn,U=-1),ot=0,_=0,D=E,j=K,A=O,st=0,N=-1,nt=1<<O,Q=nt-1,1===a&&nt>852||2===a&&nt>592)return 1;for(;;){dt=D-st,M[_]<U?(ut=0,mt=M[_]):M[_]>U?(ut=pt[Zt+M[_]],mt=rt[lt+M[_]]):(ut=96,mt=0),F=1<<D-st,z=1<<A,E=z;do{z-=F,P[j+(ot>>st)+z]=dt<<24|ut<<16|mt|0}while(0!==z);for(F=1<<D-1;ot&F;)F>>=1;if(0!==F?(ot&=F-1,ot+=F):ot=0,_++,0==--at[D]){if(D===B)break;D=v[V+M[_]]}if(D>O&&(ot&Q)!==N){for(0===st&&(st=O),j+=E,A=D-st,it=1<<A;A+st<B&&(it-=at[A+st],!(it<=0));)A++,it<<=1;if(nt+=1<<A,1===a&&nt>852||2===a&&nt>592)return 1;N=ot&Q,P[N]=O<<24|A<<16|j-K|0}}return 0!==ot&&(P[j+ot]=D-st<<24|64<<16|0),H.bits=O,0};const{Z_FINISH:On,Z_BLOCK:An,Z_TREES:$n,Z_OK:eo,Z_STREAM_END:io,Z_NEED_DICT:no,Z_STREAM_ERROR:ro,Z_DATA_ERROR:lo,Z_MEM_ERROR:co,Z_BUF_ERROR:ho,Z_DEFLATED:uo}=zi,zr=a=>(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24);function Fr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nr=a=>{if(!a||!a.state)return ro;const v=a.state;return a.total_in=a.total_out=v.total=0,a.msg="",v.wrap&&(a.adler=1&v.wrap),v.mode=1,v.last=0,v.havedict=0,v.dmax=32768,v.head=null,v.hold=0,v.bits=0,v.lencode=v.lendyn=new Int32Array(852),v.distcode=v.distdyn=new Int32Array(592),v.sane=1,v.back=-1,eo},_r=a=>{if(!a||!a.state)return ro;const v=a.state;return v.wsize=0,v.whave=0,v.wnext=0,Nr(a)},jr=(a,v)=>{let V;if(!a||!a.state)return ro;const Y=a.state;return v<0?(V=0,v=-v):(V=1+(v>>4),v<48&&(v&=15)),v&&(v<8||v>15)?ro:(null!==Y.window&&Y.wbits!==v&&(Y.window=null),Y.wrap=V,Y.wbits=v,_r(a))},Qr=(a,v)=>{if(!a)return ro;const V=new Fr;a.state=V,V.window=null;const Y=jr(a,v);return Y!==eo&&(a.state=null),Y};let mo,po,bo=!0;const Dr=a=>{if(bo){mo=new Int32Array(512),po=new Int32Array(32);let v=0;for(;v<144;)a.lens[v++]=8;for(;v<256;)a.lens[v++]=9;for(;v<280;)a.lens[v++]=7;for(;v<288;)a.lens[v++]=8;for(kr(1,a.lens,0,288,mo,0,a.work,{bits:9}),v=0;v<32;)a.lens[v++]=5;kr(2,a.lens,0,32,po,0,a.work,{bits:5}),bo=!1}a.lencode=mo,a.lenbits=9,a.distcode=po,a.distbits=5},Or=(a,v,V,Y)=>{let P;const K=a.state;return null===K.window&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new Uint8Array(K.wsize)),Y>=K.wsize?(K.window.set(v.subarray(V-K.wsize,V),0),K.wnext=0,K.whave=K.wsize):(P=K.wsize-K.wnext,P>Y&&(P=Y),K.window.set(v.subarray(V-Y,V-Y+P),K.wnext),(Y-=P)?(K.window.set(v.subarray(V-Y,V),0),K.wnext=Y,K.whave=K.wsize):(K.wnext+=P,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=P))),0};var yo={inflateReset:_r,inflateReset2:jr,inflateResetKeep:Nr,inflateInit:a=>Qr(a,15),inflateInit2:Qr,inflate:(a,v)=>{let V,Y,P,K,M,H,I,F,z,N,Q,j,U,D,_,E,B,O,A,st,it,nt,ot=0;const rt=new Uint8Array(4);let lt,at;const ct=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return ro;V=a.state,12===V.mode&&(V.mode=13),M=a.next_out,P=a.output,I=a.avail_out,K=a.next_in,Y=a.input,H=a.avail_in,F=V.hold,z=V.bits,N=H,Q=I,nt=eo;t:for(;;)switch(V.mode){case 1:if(0===V.wrap){V.mode=13;break}for(;z<16;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(2&V.wrap&&35615===F){V.check=0,rt[0]=255&F,rt[1]=F>>>8&255,V.check=ao(V.check,rt,2,0),F=0,z=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&F)<<8)+(F>>8))%31){a.msg="incorrect header check",V.mode=30;break}if((15&F)!==uo){a.msg="unknown compression method",V.mode=30;break}if(F>>>=4,z-=4,it=8+(15&F),0===V.wbits)V.wbits=it;else if(it>V.wbits){a.msg="invalid window size",V.mode=30;break}V.dmax=1<<V.wbits,a.adler=V.check=1,V.mode=512&F?10:12,F=0,z=0;break;case 2:for(;z<16;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(V.flags=F,(255&V.flags)!==uo){a.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){a.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=F>>8&1),512&V.flags&&(rt[0]=255&F,rt[1]=F>>>8&255,V.check=ao(V.check,rt,2,0)),F=0,z=0,V.mode=3;case 3:for(;z<32;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.head&&(V.head.time=F),512&V.flags&&(rt[0]=255&F,rt[1]=F>>>8&255,rt[2]=F>>>16&255,rt[3]=F>>>24&255,V.check=ao(V.check,rt,4,0)),F=0,z=0,V.mode=4;case 4:for(;z<16;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.head&&(V.head.xflags=255&F,V.head.os=F>>8),512&V.flags&&(rt[0]=255&F,rt[1]=F>>>8&255,V.check=ao(V.check,rt,2,0)),F=0,z=0,V.mode=5;case 5:if(1024&V.flags){for(;z<16;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.length=F,V.head&&(V.head.extra_len=F),512&V.flags&&(rt[0]=255&F,rt[1]=F>>>8&255,V.check=ao(V.check,rt,2,0)),F=0,z=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(j=V.length,j>H&&(j=H),j&&(V.head&&(it=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Uint8Array(V.head.extra_len)),V.head.extra.set(Y.subarray(K,K+j),it)),512&V.flags&&(V.check=ao(V.check,Y,j,K)),H-=j,K+=j,V.length-=j),V.length))break t;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(0===H)break t;j=0;do{it=Y[K+j++],V.head&&it&&V.length<65536&&(V.head.name+=String.fromCharCode(it))}while(it&&j<H);if(512&V.flags&&(V.check=ao(V.check,Y,j,K)),H-=j,K+=j,it)break t}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(0===H)break t;j=0;do{it=Y[K+j++],V.head&&it&&V.length<65536&&(V.head.comment+=String.fromCharCode(it))}while(it&&j<H);if(512&V.flags&&(V.check=ao(V.check,Y,j,K)),H-=j,K+=j,it)break t}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;z<16;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(F!==(65535&V.check)){a.msg="header crc mismatch",V.mode=30;break}F=0,z=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),a.adler=V.check=0,V.mode=12;break;case 10:for(;z<32;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}a.adler=V.check=zr(F),F=0,z=0,V.mode=11;case 11:if(0===V.havedict)return a.next_out=M,a.avail_out=I,a.next_in=K,a.avail_in=H,V.hold=F,V.bits=z,no;a.adler=V.check=1,V.mode=12;case 12:if(v===An||v===$n)break t;case 13:if(V.last){F>>>=7&z,z-=7&z,V.mode=27;break}for(;z<3;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}switch(V.last=1&F,F>>>=1,z-=1,3&F){case 0:V.mode=14;break;case 1:if(Dr(V),V.mode=20,v===$n){F>>>=2,z-=2;break t}break;case 2:V.mode=17;break;case 3:a.msg="invalid block type",V.mode=30}F>>>=2,z-=2;break;case 14:for(F>>>=7&z,z-=7&z;z<32;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if((65535&F)!=(F>>>16^65535)){a.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&F,F=0,z=0,V.mode=15,v===$n)break t;case 15:V.mode=16;case 16:if(j=V.length,j){if(j>H&&(j=H),j>I&&(j=I),0===j)break t;P.set(Y.subarray(K,K+j),M),H-=j,K+=j,I-=j,M+=j,V.length-=j;break}V.mode=12;break;case 17:for(;z<14;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(V.nlen=257+(31&F),F>>>=5,z-=5,V.ndist=1+(31&F),F>>>=5,z-=5,V.ncode=4+(15&F),F>>>=4,z-=4,V.nlen>286||V.ndist>30){a.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;z<3;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.lens[ct[V.have++]]=7&F,F>>>=3,z-=3}for(;V.have<19;)V.lens[ct[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,lt={bits:V.lenbits},nt=kr(0,V.lens,0,19,V.lencode,0,V.work,lt),V.lenbits=lt.bits,nt){a.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;ot=V.lencode[F&(1<<V.lenbits)-1],_=ot>>>24,E=ot>>>16&255,B=65535&ot,!(_<=z);){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(B<16)F>>>=_,z-=_,V.lens[V.have++]=B;else{if(16===B){for(at=_+2;z<at;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(F>>>=_,z-=_,0===V.have){a.msg="invalid bit length repeat",V.mode=30;break}it=V.lens[V.have-1],j=3+(3&F),F>>>=2,z-=2}else if(17===B){for(at=_+3;z<at;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}F>>>=_,z-=_,it=0,j=3+(7&F),F>>>=3,z-=3}else{for(at=_+7;z<at;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}F>>>=_,z-=_,it=0,j=11+(127&F),F>>>=7,z-=7}if(V.have+j>V.nlen+V.ndist){a.msg="invalid bit length repeat",V.mode=30;break}for(;j--;)V.lens[V.have++]=it}}if(30===V.mode)break;if(0===V.lens[256]){a.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,lt={bits:V.lenbits},nt=kr(1,V.lens,0,V.nlen,V.lencode,0,V.work,lt),V.lenbits=lt.bits,nt){a.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,lt={bits:V.distbits},nt=kr(2,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,lt),V.distbits=lt.bits,nt){a.msg="invalid distances set",V.mode=30;break}if(V.mode=20,v===$n)break t;case 20:V.mode=21;case 21:if(H>=6&&I>=258){a.next_out=M,a.avail_out=I,a.next_in=K,a.avail_in=H,V.hold=F,V.bits=z,vr(a,Q),M=a.next_out,P=a.output,I=a.avail_out,K=a.next_in,Y=a.input,H=a.avail_in,F=V.hold,z=V.bits,12===V.mode&&(V.back=-1);break}for(V.back=0;ot=V.lencode[F&(1<<V.lenbits)-1],_=ot>>>24,E=ot>>>16&255,B=65535&ot,!(_<=z);){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(E&&0==(240&E)){for(O=_,A=E,st=B;ot=V.lencode[st+((F&(1<<O+A)-1)>>O)],_=ot>>>24,E=ot>>>16&255,B=65535&ot,!(O+_<=z);){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}F>>>=O,z-=O,V.back+=O}if(F>>>=_,z-=_,V.back+=_,V.length=B,0===E){V.mode=26;break}if(32&E){V.back=-1,V.mode=12;break}if(64&E){a.msg="invalid literal/length code",V.mode=30;break}V.extra=15&E,V.mode=22;case 22:if(V.extra){for(at=V.extra;z<at;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.length+=F&(1<<V.extra)-1,F>>>=V.extra,z-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;ot=V.distcode[F&(1<<V.distbits)-1],_=ot>>>24,E=ot>>>16&255,B=65535&ot,!(_<=z);){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(0==(240&E)){for(O=_,A=E,st=B;ot=V.distcode[st+((F&(1<<O+A)-1)>>O)],_=ot>>>24,E=ot>>>16&255,B=65535&ot,!(O+_<=z);){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}F>>>=O,z-=O,V.back+=O}if(F>>>=_,z-=_,V.back+=_,64&E){a.msg="invalid distance code",V.mode=30;break}V.offset=B,V.extra=15&E,V.mode=24;case 24:if(V.extra){for(at=V.extra;z<at;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}V.offset+=F&(1<<V.extra)-1,F>>>=V.extra,z-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){a.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(0===I)break t;if(j=Q-I,V.offset>j){if(j=V.offset-j,j>V.whave&&V.sane){a.msg="invalid distance too far back",V.mode=30;break}j>V.wnext?(j-=V.wnext,U=V.wsize-j):U=V.wnext-j,j>V.length&&(j=V.length),D=V.window}else D=P,U=M-V.offset,j=V.length;j>I&&(j=I),I-=j,V.length-=j;do{P[M++]=D[U++]}while(--j);0===V.length&&(V.mode=21);break;case 26:if(0===I)break t;P[M++]=V.length,I--,V.mode=21;break;case 27:if(V.wrap){for(;z<32;){if(0===H)break t;H--,F|=Y[K++]<<z,z+=8}if(Q-=I,a.total_out+=Q,V.total+=Q,Q&&(a.adler=V.check=V.flags?ao(V.check,P,Q,M-Q):oo(V.check,P,Q,M-Q)),Q=I,(V.flags?F:zr(F))!==V.check){a.msg="incorrect data check",V.mode=30;break}F=0,z=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;z<32;){if(0===H)break t;H--,F+=Y[K++]<<z,z+=8}if(F!==(4294967295&V.total)){a.msg="incorrect length check",V.mode=30;break}F=0,z=0}V.mode=29;case 29:nt=io;break t;case 30:nt=lo;break t;case 31:return co;default:return ro}return a.next_out=M,a.avail_out=I,a.next_in=K,a.avail_in=H,V.hold=F,V.bits=z,(V.wsize||Q!==a.avail_out&&V.mode<30&&(V.mode<27||v!==On))&&Or(a,a.output,a.next_out,Q-a.avail_out),N-=a.avail_in,Q-=a.avail_out,a.total_in+=N,a.total_out+=Q,V.total+=Q,V.wrap&&Q&&(a.adler=V.check=V.flags?ao(V.check,P,Q,a.next_out-Q):oo(V.check,P,Q,a.next_out-Q)),a.data_type=V.bits+(V.last?64:0)+(12===V.mode?128:0)+(20===V.mode||15===V.mode?256:0),(0===N&&0===Q||v===On)&&nt===eo&&(nt=ho),nt},inflateEnd:a=>{if(!a||!a.state)return ro;let v=a.state;return v.window&&(v.window=null),a.state=null,eo},inflateGetHeader:(a,v)=>{if(!a||!a.state)return ro;const V=a.state;return 0==(2&V.wrap)?ro:(V.head=v,v.done=!1,eo)},inflateSetDictionary:(a,v)=>{const V=v.length;let Y,P,K;return a&&a.state?(Y=a.state,0!==Y.wrap&&11!==Y.mode?ro:11===Y.mode&&(P=1,P=oo(P,v,V,0),P!==Y.check)?lo:(K=Or(a,v,V,V),K?(Y.mode=31,co):(Y.havedict=1,eo))):ro},inflateInfo:"pako inflate (from Nodeca project)"},$r=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Zo=Object.prototype.toString,{Z_NO_FLUSH:fo,Z_FINISH:Xo,Z_OK:Go,Z_STREAM_END:Lo,Z_NEED_DICT:xo,Z_STREAM_ERROR:go,Z_DATA_ERROR:So,Z_MEM_ERROR:Wo}=zi;function la(a){this.options=er({chunkSize:65536,windowBits:15,to:""},a||{});const v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,0===v.windowBits&&(v.windowBits=-15)),!(v.windowBits>=0&&v.windowBits<16)||a&&a.windowBits||(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&0==(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lr,this.strm.avail_out=0;let V=yo.inflateInit2(this.strm,v.windowBits);if(V!==Go)throw new Error(Hi[V]);if(this.header=new $r,yo.inflateGetHeader(this.strm,this.header),v.dictionary&&("string"==typeof v.dictionary?v.dictionary=or(v.dictionary):"[object ArrayBuffer]"===Zo.call(v.dictionary)&&(v.dictionary=new Uint8Array(v.dictionary)),v.raw&&(V=yo.inflateSetDictionary(this.strm,v.dictionary),V!==Go)))throw new Error(Hi[V])}function ca(a,v){const V=new la(v);if(V.push(a),V.err)throw V.msg||Hi[V.err];return V.result}la.prototype.push=function(a,v){const V=this.strm,Y=this.options.chunkSize,P=this.options.dictionary;let K,M,H;if(this.ended)return!1;for(M=v===~~v?v:!0===v?Xo:fo,"[object ArrayBuffer]"===Zo.call(a)?V.input=new Uint8Array(a):V.input=a,V.next_in=0,V.avail_in=V.input.length;;){for(0===V.avail_out&&(V.output=new Uint8Array(Y),V.next_out=0,V.avail_out=Y),K=yo.inflate(V,M),K===xo&&P&&(K=yo.inflateSetDictionary(V,P),K===Go?K=yo.inflate(V,M):K===So&&(K=xo));V.avail_in>0&&K===Lo&&V.state.wrap>0&&0!==a[V.next_in];)yo.inflateReset(V),K=yo.inflate(V,M);switch(K){case go:case So:case xo:case Wo:return this.onEnd(K),this.ended=!0,!1}if(H=V.avail_out,V.next_out&&(0===V.avail_out||K===Lo))if("string"===this.options.to){let a=ar(V.output,V.next_out),v=V.next_out-a,P=rr(V.output,a);V.next_out=v,V.avail_out=Y-v,v&&V.output.set(V.output.subarray(a,a+v),0),this.onData(P)}else this.onData(V.output.length===V.next_out?V.output:V.output.subarray(0,V.next_out));if(K!==Go||0!==H){if(K===Lo)return K=yo.inflateEnd(this.strm),this.onEnd(K),this.ended=!0,!0;if(0===V.avail_in)break}}return!0},la.prototype.onData=function(a){this.chunks.push(a)},la.prototype.onEnd=function(a){a===Go&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=sr(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var wo={Inflate:la,inflate:ca,inflateRaw:function(a,v){return(v=v||{}).raw=!0,ca(a,v)},ungzip:ca,constants:zi};const{Deflate:vo,deflate:Vo,deflateRaw:To,gzip:Co}=Un,{Inflate:Po,inflate:Ro,inflateRaw:ko,ungzip:Do}=wo;var qo={Deflate:vo,deflate:Vo,deflateRaw:To,gzip:Co,Inflate:Po,inflate:Ro,inflateRaw:ko,ungzip:Do,constants:zi};var ir,nr=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMwogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIzLTA0LTA3CiAqIFZlcnNpb246IDEuMS4wLTIxCiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB0PSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9T2JqZWN0LnByb3RvdHlwZSxuPXIuaGFzT3duUHJvcGVydHksaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxhPWkuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixzPWkuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsbz1pLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gaCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtoKHt9LCIiKX1jYXRjaCh0KXtoPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBsKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZz9lOmcsYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxzPW5ldyBCKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj11O3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1fKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1mKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBEKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgcz1yLmRlbGVnYXRlO2lmKHMpe3ZhciBvPUEocyxyKTtpZihvKXtpZihvPT09cCljb250aW51ZTtyZXR1cm4gb319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT11KXRocm93IG49ZixyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249Xzt2YXIgaD1jKHQsZSxyKTtpZigibm9ybWFsIj09PWgudHlwZSl7aWYobj1yLmRvbmU/ZjpkLGguYXJnPT09cCljb250aW51ZTtyZXR1cm57dmFsdWU6aC5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1oLnR5cGUmJihuPWYsci5tZXRob2Q9InRocm93IixyLmFyZz1oLmFyZyl9fX0odCxyLHMpLGF9ZnVuY3Rpb24gYyh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6dH19fXQud3JhcD1sO3ZhciB1PSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLF89ImV4ZWN1dGluZyIsZj0iY29tcGxldGVkIixwPXt9O2Z1bmN0aW9uIGcoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiB2KCl7fXZhciB3PXt9O2godyxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBtPU9iamVjdC5nZXRQcm90b3R5cGVPZixiPW0mJm0obShSKFtdKSkpO2ImJmIhPT1yJiZuLmNhbGwoYixhKSYmKHc9Yik7dmFyIHg9di5wcm90b3R5cGU9Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3KTtmdW5jdGlvbiBrKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aCh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiB6KHQsZSl7ZnVuY3Rpb24gcihpLGEscyxvKXt2YXIgaD1jKHRbaV0sdCxhKTtpZigidGhyb3ciIT09aC50eXBlKXt2YXIgbD1oLmFyZyx1PWwudmFsdWU7cmV0dXJuIHUmJiJvYmplY3QiPT10eXBlb2YgdSYmbi5jYWxsKHUsIl9fYXdhaXQiKT9lLnJlc29sdmUodS5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtyKCJuZXh0Iix0LHMsbyl9KSwoZnVuY3Rpb24odCl7cigidGhyb3ciLHQscyxvKX0pKTplLnJlc29sdmUodSkudGhlbigoZnVuY3Rpb24odCl7bC52YWx1ZT10LHMobCl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIHIoInRocm93Iix0LHMsbyl9KSl9byhoLmFyZyl9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gYSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBpPWk/aS50aGVuKGEsYSk6YSgpfX1mdW5jdGlvbiBBKHQscil7dmFyIG49dC5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PWUpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxBKHQsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gcDtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gcH12YXIgaT1jKG4sdC5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwscDt2YXIgYT1pLmFyZztyZXR1cm4gYT9hLmRvbmU/KHJbdC5yZXN1bHROYW1lXT1hLnZhbHVlLHIubmV4dD10Lm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSxyLmRlbGVnYXRlPW51bGwscCk6YTooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCxwKX1mdW5jdGlvbiBFKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIFModCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIEIodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChFLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIFIodCl7aWYodCl7dmFyIHI9dFthXTtpZihyKXJldHVybiByLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxzPWZ1bmN0aW9uIHIoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYobi5jYWxsKHQsaSkpcmV0dXJuIHIudmFsdWU9dFtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT1lLHIuZG9uZT0hMCxyfTtyZXR1cm4gcy5uZXh0PXN9fXJldHVybntuZXh0OkR9fWZ1bmN0aW9uIEQoKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEwfX1yZXR1cm4geS5wcm90b3R5cGU9dixoKHgsImNvbnN0cnVjdG9yIix2KSxoKHYsImNvbnN0cnVjdG9yIix5KSx5LmRpc3BsYXlOYW1lPWgodixvLCJHZW5lcmF0b3JGdW5jdGlvbiIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09eXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShlLmRpc3BsYXlOYW1lfHxlLm5hbWUpKX0sdC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsdik6KHQuX19wcm90b19fPXYsaCh0LG8sIkdlbmVyYXRvckZ1bmN0aW9uIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeCksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sayh6LnByb3RvdHlwZSksaCh6LnByb3RvdHlwZSxzLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj16LHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4saSxhKXt2b2lkIDA9PT1hJiYoYT1Qcm9taXNlKTt2YXIgcz1uZXcgeihsKGUscixuLGkpLGEpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/czpzLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6cy5uZXh0KCl9KSl9LGsoeCksaCh4LG8sIkdlbmVyYXRvciIpLGgoeCxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLGgoeCwidG9TdHJpbmciLChmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSkpLHQua2V5cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCllLnB1c2gocik7cmV0dXJuIGUucmV2ZXJzZSgpLGZ1bmN0aW9uIHIoKXtmb3IoO2UubGVuZ3RoOyl7dmFyIG49ZS5wb3AoKTtpZihuIGluIHQpcmV0dXJuIHIudmFsdWU9bixyLmRvbmU9ITEscn1yZXR1cm4gci5kb25lPSEwLHJ9fSx0LnZhbHVlcz1SLEIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpCLHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PWUsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChTKSwhdClmb3IodmFyIHIgaW4gdGhpcykidCI9PT1yLmNoYXJBdCgwKSYmbi5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7aWYodGhpcy5kb25lKXRocm93IHQ7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIG8udHlwZT0idGhyb3ciLG8uYXJnPXQsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSwhIWl9Zm9yKHZhciBhPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTthPj0wOy0tYSl7dmFyIHM9dGhpcy50cnlFbnRyaWVzW2FdLG89cy5jb21wbGV0aW9uO2lmKCJyb290Ij09PXMudHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihzLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgaD1uLmNhbGwocywiY2F0Y2hMb2MiKSxsPW4uY2FsbChzLCJmaW5hbGx5TG9jIik7aWYoaCYmbCl7aWYodGhpcy5wcmV2PHMuY2F0Y2hMb2MpcmV0dXJuIGkocy5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PHMuZmluYWxseUxvYylyZXR1cm4gaShzLmZpbmFsbHlMb2MpfWVsc2UgaWYoaCl7aWYodGhpcy5wcmV2PHMuY2F0Y2hMb2MpcmV0dXJuIGkocy5jYXRjaExvYywhMCl9ZWxzZXtpZighbCl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PHMuZmluYWxseUxvYylyZXR1cm4gaShzLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmbi5jYWxsKGksImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PGkuZmluYWxseUxvYyl7dmFyIGE9aTticmVha319YSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmEudHJ5TG9jPD1lJiZlPD1hLmZpbmFsbHlMb2MmJihhPW51bGwpO3ZhciBzPWE/YS5jb21wbGV0aW9uOnt9O3JldHVybiBzLnR5cGU9dCxzLmFyZz1lLGE/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9YS5maW5hbGx5TG9jLHApOnRoaXMuY29tcGxldGUocyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSkscH0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxTKHIpLHB9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7UyhyKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOlIodCkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1lKSxwfX0sdH0odC5leHBvcnRzKTt0cnl7Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZX1jYXRjaCh0KXsib2JqZWN0Ij09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZTpGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShlKX19KHtleHBvcnRzOnt9fSk7dmFyIGU9e2V4cG9ydHM6e319OyhmdW5jdGlvbih0KXtjb25zdCBlPTQscj0wLG49MSxpPTI7ZnVuY3Rpb24gYSh0KXtsZXQgZT10Lmxlbmd0aDtmb3IoOy0tZT49MDspdFtlXT0wfWNvbnN0IHM9MCxvPTEsaD0yLGw9MyxjPTI1OCx1PTI5LGQ9MjU2LF89ZCsxK3UsZj0zMCxwPTE5LGc9MipfKzEseT0xNSx2PTE2LHc9NyxtPTI1NixiPTE2LHg9MTcsaz0xOCx6PW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKSxBPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSksRT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pLFM9bmV3IFVpbnQ4QXJyYXkoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxCPTUxMixSPW5ldyBBcnJheSgyKihfKzIpKTthKFIpO2NvbnN0IEQ9bmV3IEFycmF5KDIqZik7YShEKTtjb25zdCBMPW5ldyBBcnJheShCKTthKEwpO2NvbnN0IFU9bmV3IEFycmF5KGMtbCsxKTthKFUpO2NvbnN0IEM9bmV3IEFycmF5KHUpO2EoQyk7Y29uc3QgTz1uZXcgQXJyYXkoZik7ZnVuY3Rpb24gRih0LGUscixuLGkpe3RoaXMuc3RhdGljX3RyZWU9dCx0aGlzLmV4dHJhX2JpdHM9ZSx0aGlzLmV4dHJhX2Jhc2U9cix0aGlzLmVsZW1zPW4sdGhpcy5tYXhfbGVuZ3RoPWksdGhpcy5oYXNfc3RyZWU9dCYmdC5sZW5ndGh9bGV0IFQsSCxaO2Z1bmN0aW9uIE0odCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9YShPKTtjb25zdCBOPXQ9PnQ8MjU2P0xbdF06TFsyNTYrKHQ+Pj43KV0sST0odCxlKT0+e3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0sUD0odCxlLHIpPT57dC5iaV92YWxpZD52LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LEkodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+di10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdik6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSwkPSh0LGUscik9PntQKHQsclsyKmVdLHJbMiplKzFdKX0saj0odCxlKT0+e2xldCByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxLPXQ9PnsxNj09PXQuYmlfdmFsaWQ/KEkodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSxYPSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5tYXhfY29kZSxpPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLGE9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLHM9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxvPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsaD1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoO2xldCBsLGMsdSxkLF8sZixwPTA7Zm9yKGQ9MDtkPD15O2QrKyl0LmJsX2NvdW50W2RdPTA7Zm9yKHJbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxsPXQuaGVhcF9tYXgrMTtsPGc7bCsrKWM9dC5oZWFwW2xdLGQ9clsyKnJbMipjKzFdKzFdKzEsZD5oJiYoZD1oLHArKyksclsyKmMrMV09ZCxjPm58fCh0LmJsX2NvdW50W2RdKyssXz0wLGM+PW8mJihfPXNbYy1vXSksZj1yWzIqY10sdC5vcHRfbGVuKz1mKihkK18pLGEmJih0LnN0YXRpY19sZW4rPWYqKGlbMipjKzFdK18pKSk7aWYoMCE9PXApe2Rve2ZvcihkPWgtMTswPT09dC5ibF9jb3VudFtkXTspZC0tO3QuYmxfY291bnRbZF0tLSx0LmJsX2NvdW50W2QrMV0rPTIsdC5ibF9jb3VudFtoXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoZD1oOzAhPT1kO2QtLSlmb3IoYz10LmJsX2NvdW50W2RdOzAhPT1jOyl1PXQuaGVhcFstLWxdLHU+bnx8KHJbMip1KzFdIT09ZCYmKHQub3B0X2xlbis9KGQtclsyKnUrMV0pKnJbMip1XSxyWzIqdSsxXT1kKSxjLS0pfX0scT0odCxlLHIpPT57Y29uc3Qgbj1uZXcgQXJyYXkoeSsxKTtsZXQgaSxhLHM9MDtmb3IoaT0xO2k8PXk7aSsrKW5baV09cz1zK3JbaS0xXTw8MTtmb3IoYT0wO2E8PWU7YSsrKXtsZXQgZT10WzIqYSsxXTswIT09ZSYmKHRbMiphXT1qKG5bZV0rKyxlKSl9fSxHPSgpPT57bGV0IHQsZSxyLG4saTtjb25zdCBhPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248dS0xO24rKylmb3IoQ1tuXT1yLHQ9MDt0PDE8PHpbbl07dCsrKVVbcisrXT1uO2ZvcihVW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihPW25dPWksdD0wO3Q8MTw8QVtuXTt0KyspTFtpKytdPW47Zm9yKGk+Pj03O248ZjtuKyspZm9yKE9bbl09aTw8Nyx0PTA7dDwxPDxBW25dLTc7dCsrKUxbMjU2K2krK109bjtmb3IoZT0wO2U8PXk7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspUlsyKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylSWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KVJbMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspUlsyKnQrMV09OCx0KyssYVs4XSsrO2ZvcihxKFIsXysxLGEpLHQ9MDt0PGY7dCsrKURbMip0KzFdPTUsRFsyKnRdPWoodCw1KTtUPW5ldyBGKFIseixkKzEsXyx5KSxIPW5ldyBGKEQsQSwwLGYseSksWj1uZXcgRihuZXcgQXJyYXkoMCksRSwwLHAsdyl9LFc9dD0+e2xldCBlO2ZvcihlPTA7ZTxfO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPGY7ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKm1dPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9LFk9dD0+e3QuYmlfdmFsaWQ+OD9JKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sVj0odCxlLHIsbik9PntZKHQpLG4mJihJKHQsciksSSh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxRPSh0LGUscixuKT0+e2NvbnN0IGk9MiplLGE9MipyO3JldHVybiB0W2ldPHRbYV18fHRbaV09PT10W2FdJiZuW2VdPD1uW3JdfSxKPSh0LGUscik9Pntjb25zdCBuPXQuaGVhcFtyXTtsZXQgaT1yPDwxO2Zvcig7aTw9dC5oZWFwX2xlbiYmKGk8dC5oZWFwX2xlbiYmUShlLHQuaGVhcFtpKzFdLHQuaGVhcFtpXSx0LmRlcHRoKSYmaSsrLCFRKGUsbix0LmhlYXBbaV0sdC5kZXB0aCkpOyl0LmhlYXBbcl09dC5oZWFwW2ldLHI9aSxpPDw9MTt0LmhlYXBbcl09bn0sdHQ9KHQsZSxyKT0+e2xldCBuLGksYSxzLG89MDtpZigwIT09dC5sYXN0X2xpdClkb3tuPXQucGVuZGluZ19idWZbdC5kX2J1ZisyKm9dPDw4fHQucGVuZGluZ19idWZbdC5kX2J1ZisyKm8rMV0saT10LnBlbmRpbmdfYnVmW3QubF9idWYrb10sbysrLDA9PT1uPyQodCxpLGUpOihhPVVbaV0sJCh0LGErZCsxLGUpLHM9elthXSwwIT09cyYmKGktPUNbYV0sUCh0LGkscykpLG4tLSxhPU4obiksJCh0LGEscikscz1BW2FdLDAhPT1zJiYobi09T1thXSxQKHQsbixzKSkpfXdoaWxlKG88dC5sYXN0X2xpdCk7JCh0LG0sZSl9LGV0PSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYT1lLnN0YXRfZGVzYy5lbGVtcztsZXQgcyxvLGgsbD0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9ZyxzPTA7czxhO3MrKykwIT09clsyKnNdPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1sPXMsdC5kZXB0aFtzXT0wKTpyWzIqcysxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOyloPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWw8Mj8rK2w6MCxyWzIqaF09MSx0LmRlcHRoW2hdPTAsdC5vcHRfbGVuLS0saSYmKHQuc3RhdGljX2xlbi09blsyKmgrMV0pO2ZvcihlLm1heF9jb2RlPWwscz10LmhlYXBfbGVuPj4xO3M+PTE7cy0tKUoodCxyLHMpO2g9YTtkb3tzPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sSih0LHIsMSksbz10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09cyx0LmhlYXBbLS10LmhlYXBfbWF4XT1vLHJbMipoXT1yWzIqc10rclsyKm9dLHQuZGVwdGhbaF09KHQuZGVwdGhbc10+PXQuZGVwdGhbb10/dC5kZXB0aFtzXTp0LmRlcHRoW29dKSsxLHJbMipzKzFdPXJbMipvKzFdPWgsdC5oZWFwWzFdPWgrKyxKKHQsciwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWCh0LGUpLHEocixsLHQuYmxfY291bnQpfSxydD0odCxlLHIpPT57bGV0IG4saSxhPS0xLHM9ZVsxXSxvPTAsaD03LGw9NDtmb3IoMD09PXMmJihoPTEzOCxsPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1zLHM9ZVsyKihuKzEpKzFdLCsrbzxoJiZpPT09c3x8KG88bD90LmJsX3RyZWVbMippXSs9bzowIT09aT8oaSE9PWEmJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzIqYl0rKyk6bzw9MTA/dC5ibF90cmVlWzIqeF0rKzp0LmJsX3RyZWVbMiprXSsrLG89MCxhPWksMD09PXM/KGg9MTM4LGw9Myk6aT09PXM/KGg9NixsPTMpOihoPTcsbD00KSl9LG50PSh0LGUscik9PntsZXQgbixpLGE9LTEscz1lWzFdLG89MCxoPTcsbD00O2ZvcigwPT09cyYmKGg9MTM4LGw9Myksbj0wO248PXI7bisrKWlmKGk9cyxzPWVbMioobisxKSsxXSwhKCsrbzxoJiZpPT09cykpe2lmKG88bClkb3skKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tbyk7ZWxzZSAwIT09aT8oaSE9PWEmJigkKHQsaSx0LmJsX3RyZWUpLG8tLSksJCh0LGIsdC5ibF90cmVlKSxQKHQsby0zLDIpKTpvPD0xMD8oJCh0LHgsdC5ibF90cmVlKSxQKHQsby0zLDMpKTooJCh0LGssdC5ibF90cmVlKSxQKHQsby0xMSw3KSk7bz0wLGE9aSwwPT09cz8oaD0xMzgsbD0zKTppPT09cz8oaD02LGw9Myk6KGg9NyxsPTQpfX0saXQ9dD0+e2xldCBlO2ZvcihydCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxydCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxldCh0LHQuYmxfZGVzYyksZT1wLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKlNbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LGF0PSh0LGUscixuKT0+e2xldCBpO2ZvcihQKHQsZS0yNTcsNSksUCh0LHItMSw1KSxQKHQsbi00LDQpLGk9MDtpPG47aSsrKVAodCx0LmJsX3RyZWVbMipTW2ldKzFdLDMpO250KHQsdC5keW5fbHRyZWUsZS0xKSxudCh0LHQuZHluX2R0cmVlLHItMSl9LHN0PXQ9PntsZXQgZSxpPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKyssaT4+Pj0xKWlmKDEmaSYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIHI7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gbjtmb3IoZT0zMjtlPGQ7ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBuO3JldHVybiByfTtsZXQgb3Q9ITE7Y29uc3QgaHQ9KHQsZSxyLG4pPT57UCh0LChzPDwxKSsobj8xOjApLDMpLFYodCxlLHIsITApfSxsdD0odCxyLG4sYSk9PntsZXQgcyxsLGM9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1pJiYodC5zdHJtLmRhdGFfdHlwZT1zdCh0KSksZXQodCx0LmxfZGVzYyksZXQodCx0LmRfZGVzYyksYz1pdCh0KSxzPXQub3B0X2xlbiszKzc+Pj4zLGw9dC5zdGF0aWNfbGVuKzMrNz4+PjMsbDw9cyYmKHM9bCkpOnM9bD1uKzUsbis0PD1zJiYtMSE9PXI/aHQodCxyLG4sYSk6dC5zdHJhdGVneT09PWV8fGw9PT1zPyhQKHQsKG88PDEpKyhhPzE6MCksMyksdHQodCxSLEQpKTooUCh0LChoPDwxKSsoYT8xOjApLDMpLGF0KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGMrMSksdHQodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFcodCksYSYmWSh0KX07dmFyIGN0PXtfdHJfaW5pdDp0PT57b3R8fChHKCksb3Q9ITApLHQubF9kZXNjPW5ldyBNKHQuZHluX2x0cmVlLFQpLHQuZF9kZXNjPW5ldyBNKHQuZHluX2R0cmVlLEgpLHQuYmxfZGVzYz1uZXcgTSh0LmJsX3RyZWUsWiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsVyh0KX0sX3RyX3N0b3JlZF9ibG9jazpodCxfdHJfZmx1c2hfYmxvY2s6bHQsX3RyX3RhbGx5Oih0LGUscik9Pih0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKFVbcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTEpLF90cl9hbGlnbjp0PT57UCh0LG88PDEsMyksJCh0LG0sUiksSyh0KX19LHV0PSh0LGUscixuKT0+e2xldCBpPTY1NTM1JnR8MCxhPXQ+Pj4xNiY2NTUzNXwwLHM9MDtmb3IoOzAhPT1yOyl7cz1yPjJlMz8yZTM6cixyLT1zO2Rve2k9aStlW24rK118MCxhPWEraXwwfXdoaWxlKC0tcyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH07Y29uc3QgZHQ9bmV3IFVpbnQzMkFycmF5KCgoKT0+e2xldCB0LGU9W107Zm9yKHZhciByPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0pKCkpO3ZhciBfdD0odCxlLHIsbik9Pntjb25zdCBpPWR0LGE9bityO3RePS0xO2ZvcihsZXQgcj1uO3I8YTtyKyspdD10Pj4+OF5pWzI1NSYodF5lW3JdKV07cmV0dXJuLTFedH0sZnQ9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxwdD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fTtjb25zdHtfdHJfaW5pdDpndCxfdHJfc3RvcmVkX2Jsb2NrOnl0LF90cl9mbHVzaF9ibG9jazp2dCxfdHJfdGFsbHk6d3QsX3RyX2FsaWduOm10fT1jdCx7Wl9OT19GTFVTSDpidCxaX1BBUlRJQUxfRkxVU0g6eHQsWl9GVUxMX0ZMVVNIOmt0LFpfRklOSVNIOnp0LFpfQkxPQ0s6QXQsWl9PSzpFdCxaX1NUUkVBTV9FTkQ6U3QsWl9TVFJFQU1fRVJST1I6QnQsWl9EQVRBX0VSUk9SOlJ0LFpfQlVGX0VSUk9SOkR0LFpfREVGQVVMVF9DT01QUkVTU0lPTjpMdCxaX0ZJTFRFUkVEOlV0LFpfSFVGRk1BTl9PTkxZOkN0LFpfUkxFOk90LFpfRklYRUQ6RnQsWl9ERUZBVUxUX1NUUkFURUdZOlR0LFpfVU5LTk9XTjpIdCxaX0RFRkxBVEVEOlp0fT1wdCxNdD05LE50PTE1LEl0PTgsUHQ9Mjg2LCR0PTMwLGp0PTE5LEt0PTIqUHQrMSxYdD0xNSxxdD0zLEd0PTI1OCxXdD1HdCtxdCsxLFl0PTMyLFZ0PTQyLFF0PTY5LEp0PTczLHRlPTkxLGVlPTEwMyxyZT0xMTMsbmU9NjY2LGllPTEsYWU9MixzZT0zLG9lPTQsaGU9MyxsZT0odCxlKT0+KHQubXNnPWZ0W2VdLGUpLGNlPXQ9Pih0PDwxKS0odD40Pzk6MCksdWU9dD0+e2xldCBlPXQubGVuZ3RoO2Zvcig7LS1lPj0wOyl0W2VdPTB9O2xldCBkZT0odCxlLHIpPT4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrO2NvbnN0IF9lPXQ9Pntjb25zdCBlPXQuc3RhdGU7bGV0IHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0sZmU9KHQsZSk9Pnt2dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LF9lKHQuc3RybSl9LHBlPSh0LGUpPT57dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0sZ2U9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHllPSh0LGUscixuKT0+e2xldCBpPXQuYXZhaWxfaW47cmV0dXJuIGk+biYmKGk9biksMD09PWk/MDoodC5hdmFpbF9pbi09aSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4raSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPXV0KHQuYWRsZXIsZSxpLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPV90KHQuYWRsZXIsZSxpLHIpKSx0Lm5leHRfaW4rPWksdC50b3RhbF9pbis9aSxpKX0sdmU9KHQsZSk9PntsZXQgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxzPXQucHJldl9sZW5ndGgsbz10Lm5pY2VfbWF0Y2g7Y29uc3QgaD10LnN0cnN0YXJ0PnQud19zaXplLVd0P3Quc3Ryc3RhcnQtKHQud19zaXplLVd0KTowLGw9dC53aW5kb3csYz10LndfbWFzayx1PXQucHJldixkPXQuc3Ryc3RhcnQrR3Q7bGV0IF89bFthK3MtMV0sZj1sW2Erc107dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLG8+dC5sb29rYWhlYWQmJihvPXQubG9va2FoZWFkKTtkb3tpZihyPWUsbFtyK3NdPT09ZiYmbFtyK3MtMV09PT1fJiZsW3JdPT09bFthXSYmbFsrK3JdPT09bFthKzFdKXthKz0yLHIrKztkb3t9d2hpbGUobFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmxbKythXT09PWxbKytyXSYmbFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmxbKythXT09PWxbKytyXSYmbFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmE8ZCk7aWYobj1HdC0oZC1hKSxhPWQtR3Qsbj5zKXtpZih0Lm1hdGNoX3N0YXJ0PWUscz1uLG4+PW8pYnJlYWs7Xz1sW2Ercy0xXSxmPWxbYStzXX19fXdoaWxlKChlPXVbZSZjXSk+aCYmMCE9LS1pKTtyZXR1cm4gczw9dC5sb29rYWhlYWQ/czp0Lmxvb2thaGVhZH0sd2U9dD0+e2NvbnN0IGU9dC53X3NpemU7bGV0IHIsbixpLGEscztkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1lKyhlLVd0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStlKSwwKSx0Lm1hdGNoX3N0YXJ0LT1lLHQuc3Ryc3RhcnQtPWUsdC5ibG9ja19zdGFydC09ZSxuPXQuaGFzaF9zaXplLHI9bjtkb3tpPXQuaGVhZFstLXJdLHQuaGVhZFtyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7bj1lLHI9bjtkb3tpPXQucHJldlstLXJdLHQucHJldltyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7YSs9ZX1pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKG49eWUodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPW4sdC5sb29rYWhlYWQrdC5pbnNlcnQ+PXF0KWZvcihzPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tzXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tzKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3MrcXQtMV0pLHQucHJldltzJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXMscysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxxdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFd0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sbWU9KHQsZSk9PntsZXQgcixuO2Zvcig7Oyl7aWYodC5sb29rYWhlYWQ8V3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPFd0JiZlPT09YnQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PXF0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSwwIT09ciYmdC5zdHJzdGFydC1yPD10Lndfc2l6ZS1XdCYmKHQubWF0Y2hfbGVuZ3RoPXZlKHQscikpLHQubWF0Y2hfbGVuZ3RoPj1xdClpZihuPXd0KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLXF0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg8PXQubWF4X2xhenlfbWF0Y2gmJnQubG9va2FoZWFkPj1xdCl7dC5tYXRjaF9sZW5ndGgtLTtkb3t0LnN0cnN0YXJ0KyssdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0fXdoaWxlKDAhPS0tdC5tYXRjaF9sZW5ndGgpO3Quc3Ryc3RhcnQrK31lbHNlIHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTAsdC5pbnNfaD10LndpbmRvd1t0LnN0cnN0YXJ0XSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0KzFdKTtlbHNlIG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKztpZihuJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxiZT0odCxlKT0+e2xldCByLG4saTtmb3IoOzspe2lmKHQubG9va2FoZWFkPFd0KXtpZih3ZSh0KSx0Lmxvb2thaGVhZDxXdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1xdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1xdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtV3QmJih0Lm1hdGNoX2xlbmd0aD12ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PVV0fHx0Lm1hdGNoX2xlbmd0aD09PXF0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1xdC0xKSksdC5wcmV2X2xlbmd0aD49cXQmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXtpPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtcXQsbj13dCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1xdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPXF0LTEsdC5zdHJzdGFydCsrLG4mJihmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLG4mJmZlKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSx4ZT0odCxlKT0+e2xldCByLG4saSxhO2NvbnN0IHM9dC53aW5kb3c7Zm9yKDs7KXtpZih0Lmxvb2thaGVhZDw9R3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPD1HdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCx0Lmxvb2thaGVhZD49cXQmJnQuc3Ryc3RhcnQ+MCYmKGk9dC5zdHJzdGFydC0xLG49c1tpXSxuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldKSl7YT10LnN0cnN0YXJ0K0d0O2Rve313aGlsZShuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZpPGEpO3QubWF0Y2hfbGVuZ3RoPUd0LShhLWkpLHQubWF0Y2hfbGVuZ3RoPnQubG9va2FoZWFkJiYodC5tYXRjaF9sZW5ndGg9dC5sb29rYWhlYWQpfWlmKHQubWF0Y2hfbGVuZ3RoPj1xdD8ocj13dCh0LDEsdC5tYXRjaF9sZW5ndGgtcXQpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wKToocj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrKSxyJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxrZT0odCxlKT0+e2xldCByO2Zvcig7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYod2UodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PWJ0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfTtmdW5jdGlvbiB6ZSh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9Y29uc3QgQWU9W25ldyB6ZSgwLDAsMCwwLCgodCxlKT0+e2xldCByPTY1NTM1O2ZvcihyPnQucGVuZGluZ19idWZfc2l6ZS01JiYocj10LnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYodC5sb29rYWhlYWQ8PTEpe2lmKHdlKHQpLDA9PT10Lmxvb2thaGVhZCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9dC5zdHJzdGFydCs9dC5sb29rYWhlYWQsdC5sb29rYWhlYWQ9MDtjb25zdCBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllO2lmKHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydD49dC53X3NpemUtV3QmJihmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT16dD8oZmUodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/c2U6b2UpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihmZSh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxpZSl9KSksbmV3IHplKDQsNCw4LDQsbWUpLG5ldyB6ZSg0LDUsMTYsOCxtZSksbmV3IHplKDQsNiwzMiwzMixtZSksbmV3IHplKDQsNCwxNiwxNixiZSksbmV3IHplKDgsMTYsMzIsMzIsYmUpLG5ldyB6ZSg4LDE2LDEyOCwxMjgsYmUpLG5ldyB6ZSg4LDMyLDEyOCwyNTYsYmUpLG5ldyB6ZSgzMiwxMjgsMjU4LDEwMjQsYmUpLG5ldyB6ZSgzMiwyNTgsMjU4LDQwOTYsYmUpXSxFZT10PT57dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLHVlKHQuaGVhZCksdC5tYXhfbGF6eV9tYXRjaD1BZVt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9QWVbdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPUFlW3QubGV2ZWxdLm5pY2VfbGVuZ3RoLHQubWF4X2NoYWluX2xlbmd0aD1BZVt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1xdC0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfTtmdW5jdGlvbiBTZSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPVp0LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBVaW50MTZBcnJheSgyKkt0KSx0aGlzLmR5bl9kdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMiokdCsxKSksdGhpcy5ibF90cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKmp0KzEpKSx1ZSh0aGlzLmR5bl9sdHJlZSksdWUodGhpcy5keW5fZHRyZWUpLHVlKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFVpbnQxNkFycmF5KFh0KzEpLHRoaXMuaGVhcD1uZXcgVWludDE2QXJyYXkoMipQdCsxKSx1ZSh0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgVWludDE2QXJyYXkoMipQdCsxKSx1ZSh0aGlzLmRlcHRoKSx0aGlzLmxfYnVmPTAsdGhpcy5saXRfYnVmc2l6ZT0wLHRoaXMubGFzdF9saXQ9MCx0aGlzLmRfYnVmPTAsdGhpcy5vcHRfbGVuPTAsdGhpcy5zdGF0aWNfbGVuPTAsdGhpcy5tYXRjaGVzPTAsdGhpcy5pbnNlcnQ9MCx0aGlzLmJpX2J1Zj0wLHRoaXMuYmlfdmFsaWQ9MH1jb25zdCBCZT10PT57aWYoIXR8fCF0LnN0YXRlKXJldHVybiBsZSh0LEJ0KTt0LnRvdGFsX2luPXQudG90YWxfb3V0PTAsdC5kYXRhX3R5cGU9SHQ7Y29uc3QgZT10LnN0YXRlO3JldHVybiBlLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP1Z0OnJlLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPWJ0LGd0KGUpLEV0fSxSZT10PT57Y29uc3QgZT1CZSh0KTtyZXR1cm4gZT09PUV0JiZFZSh0LnN0YXRlKSxlfSxEZT0odCxlLHIsbixpLGEpPT57aWYoIXQpcmV0dXJuIEJ0O2xldCBzPTE7aWYoZT09PUx0JiYoZT02KSxuPDA/KHM9MCxuPS1uKTpuPjE1JiYocz0yLG4tPTE2KSxpPDF8fGk+TXR8fHIhPT1adHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8YTwwfHxhPkZ0KXJldHVybiBsZSh0LEJ0KTs4PT09biYmKG49OSk7Y29uc3Qgbz1uZXcgU2U7cmV0dXJuIHQuc3RhdGU9byxvLnN0cm09dCxvLndyYXA9cyxvLmd6aGVhZD1udWxsLG8ud19iaXRzPW4sby53X3NpemU9MTw8by53X2JpdHMsby53X21hc2s9by53X3NpemUtMSxvLmhhc2hfYml0cz1pKzcsby5oYXNoX3NpemU9MTw8by5oYXNoX2JpdHMsby5oYXNoX21hc2s9by5oYXNoX3NpemUtMSxvLmhhc2hfc2hpZnQ9fn4oKG8uaGFzaF9iaXRzK3F0LTEpL3F0KSxvLndpbmRvdz1uZXcgVWludDhBcnJheSgyKm8ud19zaXplKSxvLmhlYWQ9bmV3IFVpbnQxNkFycmF5KG8uaGFzaF9zaXplKSxvLnByZXY9bmV3IFVpbnQxNkFycmF5KG8ud19zaXplKSxvLmxpdF9idWZzaXplPTE8PGkrNixvLnBlbmRpbmdfYnVmX3NpemU9NCpvLmxpdF9idWZzaXplLG8ucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkoby5wZW5kaW5nX2J1Zl9zaXplKSxvLmRfYnVmPTEqby5saXRfYnVmc2l6ZSxvLmxfYnVmPTMqby5saXRfYnVmc2l6ZSxvLmxldmVsPWUsby5zdHJhdGVneT1hLG8ubWV0aG9kPXIsUmUodCl9O3ZhciBMZT17ZGVmbGF0ZUluaXQ6KHQsZSk9PkRlKHQsZSxadCxOdCxJdCxUdCksZGVmbGF0ZUluaXQyOkRlLGRlZmxhdGVSZXNldDpSZSxkZWZsYXRlUmVzZXRLZWVwOkJlLGRlZmxhdGVTZXRIZWFkZXI6KHQsZSk9PnQmJnQuc3RhdGU/MiE9PXQuc3RhdGUud3JhcD9CdDoodC5zdGF0ZS5nemhlYWQ9ZSxFdCk6QnQsZGVmbGF0ZToodCxlKT0+e2xldCByLG47aWYoIXR8fCF0LnN0YXRlfHxlPkF0fHxlPDApcmV0dXJuIHQ/bGUodCxCdCk6QnQ7Y29uc3QgaT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxpLnN0YXR1cz09PW5lJiZlIT09enQpcmV0dXJuIGxlKHQsMD09PXQuYXZhaWxfb3V0P0R0OkJ0KTtpLnN0cm09dDtjb25zdCBhPWkubGFzdF9mbHVzaDtpZihpLmxhc3RfZmx1c2g9ZSxpLnN0YXR1cz09PVZ0KWlmKDI9PT1pLndyYXApdC5hZGxlcj0wLHBlKGksMzEpLHBlKGksMTM5KSxwZShpLDgpLGkuZ3poZWFkPyhwZShpLChpLmd6aGVhZC50ZXh0PzE6MCkrKGkuZ3poZWFkLmhjcmM/MjowKSsoaS5nemhlYWQuZXh0cmE/NDowKSsoaS5nemhlYWQubmFtZT84OjApKyhpLmd6aGVhZC5jb21tZW50PzE2OjApKSxwZShpLDI1NSZpLmd6aGVhZC50aW1lKSxwZShpLGkuZ3poZWFkLnRpbWU+PjgmMjU1KSxwZShpLGkuZ3poZWFkLnRpbWU+PjE2JjI1NSkscGUoaSxpLmd6aGVhZC50aW1lPj4yNCYyNTUpLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSwyNTUmaS5nemhlYWQub3MpLGkuZ3poZWFkLmV4dHJhJiZpLmd6aGVhZC5leHRyYS5sZW5ndGgmJihwZShpLDI1NSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpLHBlKGksaS5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGkuZ3poZWFkLmhjcmMmJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmcsMCkpLGkuZ3ppbmRleD0wLGkuc3RhdHVzPVF0KToocGUoaSwwKSxwZShpLDApLHBlKGksMCkscGUoaSwwKSxwZShpLDApLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSxoZSksaS5zdGF0dXM9cmUpO2Vsc2V7bGV0IGU9WnQrKGkud19iaXRzLTg8PDQpPDw4LHI9LTE7cj1pLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzA6aS5sZXZlbDw2PzE6Nj09PWkubGV2ZWw/MjozLGV8PXI8PDYsMCE9PWkuc3Ryc3RhcnQmJihlfD1ZdCksZSs9MzEtZSUzMSxpLnN0YXR1cz1yZSxnZShpLGUpLDAhPT1pLnN0cnN0YXJ0JiYoZ2UoaSx0LmFkbGVyPj4+MTYpLGdlKGksNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihpLnN0YXR1cz09PVF0KWlmKGkuZ3poZWFkLmV4dHJhKXtmb3Iocj1pLnBlbmRpbmc7aS5nemluZGV4PCg2NTUzNSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplfHwoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksX2UodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplKSk7KXBlKGksMjU1JmkuZ3poZWFkLmV4dHJhW2kuZ3ppbmRleF0pLGkuZ3ppbmRleCsrO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGkuZ3ppbmRleD09PWkuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkuZ3ppbmRleD0wLGkuc3RhdHVzPUp0KX1lbHNlIGkuc3RhdHVzPUp0O2lmKGkuc3RhdHVzPT09SnQpaWYoaS5nemhlYWQubmFtZSl7cj1pLnBlbmRpbmc7ZG97aWYoaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplJiYoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksX2UodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49aS5nemluZGV4PGkuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZpLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoaS5nemluZGV4KyspOjAscGUoaSxuKX13aGlsZSgwIT09bik7aS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksMD09PW4mJihpLmd6aW5kZXg9MCxpLnN0YXR1cz10ZSl9ZWxzZSBpLnN0YXR1cz10ZTtpZihpLnN0YXR1cz09PXRlKWlmKGkuZ3poZWFkLmNvbW1lbnQpe3I9aS5wZW5kaW5nO2Rve2lmKGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSYmKGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLF9lKHQpLHI9aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWkuZ3ppbmRleDxpLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHBlKGksbil9d2hpbGUoMCE9PW4pO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLDA9PT1uJiYoaS5zdGF0dXM9ZWUpfWVsc2UgaS5zdGF0dXM9ZWU7aWYoaS5zdGF0dXM9PT1lZSYmKGkuZ3poZWFkLmhjcmM/KGkucGVuZGluZysyPmkucGVuZGluZ19idWZfc2l6ZSYmX2UodCksaS5wZW5kaW5nKzI8PWkucGVuZGluZ19idWZfc2l6ZSYmKHBlKGksMjU1JnQuYWRsZXIpLHBlKGksdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxpLnN0YXR1cz1yZSkpOmkuc3RhdHVzPXJlKSwwIT09aS5wZW5kaW5nKXtpZihfZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGkubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZjZShlKTw9Y2UoYSkmJmUhPT16dClyZXR1cm4gbGUodCxEdCk7aWYoaS5zdGF0dXM9PT1uZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGxlKHQsRHQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09aS5sb29rYWhlYWR8fGUhPT1idCYmaS5zdGF0dXMhPT1uZSl7bGV0IHI9aS5zdHJhdGVneT09PUN0P2tlKGksZSk6aS5zdHJhdGVneT09PU90P3hlKGksZSk6QWVbaS5sZXZlbF0uZnVuYyhpLGUpO2lmKHIhPT1zZSYmciE9PW9lfHwoaS5zdGF0dXM9bmUpLHI9PT1pZXx8cj09PXNlKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihpLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHI9PT1hZSYmKGU9PT14dD9tdChpKTplIT09QXQmJih5dChpLDAsMCwhMSksZT09PWt0JiYodWUoaS5oZWFkKSwwPT09aS5sb29rYWhlYWQmJihpLnN0cnN0YXJ0PTAsaS5ibG9ja19zdGFydD0wLGkuaW5zZXJ0PTApKSksX2UodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09enQ/RXQ6aS53cmFwPD0wP1N0OigyPT09aS53cmFwPyhwZShpLDI1NSZ0LmFkbGVyKSxwZShpLHQuYWRsZXI+PjgmMjU1KSxwZShpLHQuYWRsZXI+PjE2JjI1NSkscGUoaSx0LmFkbGVyPj4yNCYyNTUpLHBlKGksMjU1JnQudG90YWxfaW4pLHBlKGksdC50b3RhbF9pbj4+OCYyNTUpLHBlKGksdC50b3RhbF9pbj4+MTYmMjU1KSxwZShpLHQudG90YWxfaW4+PjI0JjI1NSkpOihnZShpLHQuYWRsZXI+Pj4xNiksZ2UoaSw2NTUzNSZ0LmFkbGVyKSksX2UodCksaS53cmFwPjAmJihpLndyYXA9LWkud3JhcCksMCE9PWkucGVuZGluZz9FdDpTdCl9LGRlZmxhdGVFbmQ6dD0+e2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gQnQ7Y29uc3QgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVZ0JiZlIT09UXQmJmUhPT1KdCYmZSE9PXRlJiZlIT09ZWUmJmUhPT1yZSYmZSE9PW5lP2xlKHQsQnQpOih0LnN0YXRlPW51bGwsZT09PXJlP2xlKHQsUnQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6KHQsZSk9PntsZXQgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIEJ0O2NvbnN0IG49dC5zdGF0ZSxpPW4ud3JhcDtpZigyPT09aXx8MT09PWkmJm4uc3RhdHVzIT09VnR8fG4ubG9va2FoZWFkKXJldHVybiBCdDtpZigxPT09aSYmKHQuYWRsZXI9dXQodC5hZGxlcixlLHIsMCkpLG4ud3JhcD0wLHI+PW4ud19zaXplKXswPT09aSYmKHVlKG4uaGVhZCksbi5zdHJzdGFydD0wLG4uYmxvY2tfc3RhcnQ9MCxuLmluc2VydD0wKTtsZXQgdD1uZXcgVWludDhBcnJheShuLndfc2l6ZSk7dC5zZXQoZS5zdWJhcnJheShyLW4ud19zaXplLHIpLDApLGU9dCxyPW4ud19zaXplfWNvbnN0IGE9dC5hdmFpbF9pbixzPXQubmV4dF9pbixvPXQuaW5wdXQ7Zm9yKHQuYXZhaWxfaW49cix0Lm5leHRfaW49MCx0LmlucHV0PWUsd2Uobik7bi5sb29rYWhlYWQ+PXF0Oyl7bGV0IHQ9bi5zdHJzdGFydCxlPW4ubG9va2FoZWFkLShxdC0xKTtkb3tuLmluc19oPWRlKG4sbi5pbnNfaCxuLndpbmRvd1t0K3F0LTFdKSxuLnByZXZbdCZuLndfbWFza109bi5oZWFkW24uaW5zX2hdLG4uaGVhZFtuLmluc19oXT10LHQrK313aGlsZSgtLWUpO24uc3Ryc3RhcnQ9dCxuLmxvb2thaGVhZD1xdC0xLHdlKG4pfXJldHVybiBuLnN0cnN0YXJ0Kz1uLmxvb2thaGVhZCxuLmJsb2NrX3N0YXJ0PW4uc3Ryc3RhcnQsbi5pbnNlcnQ9bi5sb29rYWhlYWQsbi5sb29rYWhlYWQ9MCxuLm1hdGNoX2xlbmd0aD1uLnByZXZfbGVuZ3RoPXF0LTEsbi5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49cyx0LmlucHV0PW8sdC5hdmFpbF9pbj1hLG4ud3JhcD1pLEV0fSxkZWZsYXRlSW5mbzoicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O2NvbnN0IFVlPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgQ2U9ZnVuY3Rpb24odCl7Y29uc3QgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Zm9yKDtlLmxlbmd0aDspe2NvbnN0IHI9ZS5zaGlmdCgpO2lmKHIpe2lmKCJvYmplY3QiIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKHIrIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcihjb25zdCBlIGluIHIpVWUocixlKSYmKHRbZV09cltlXSl9fXJldHVybiB0fSxPZT17YXNzaWduOkNlLGZsYXR0ZW5DaHVua3M6dD0+e2xldCBlPTA7Zm9yKGxldCByPTAsbj10Lmxlbmd0aDtyPG47cisrKWUrPXRbcl0ubGVuZ3RoO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoZSk7Zm9yKGxldCBlPTAsbj0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7bGV0IGk9dFtlXTtyLnNldChpLG4pLG4rPWkubGVuZ3RofXJldHVybiByfX07bGV0IEZlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe0ZlPSExfWNvbnN0IFRlPW5ldyBVaW50OEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwyNTY7dCsrKVRlW3RdPXQ+PTI1Mj82OnQ+PTI0OD81OnQ+PTI0MD80OnQ+PTIyND8zOnQ+PTE5Mj8yOjE7VGVbMjU0XT1UZVsyNTRdPTE7Y29uc3QgSGU9KHQsZSk9PntpZihlPDY1NTM0JiZ0LnN1YmFycmF5JiZGZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQubGVuZ3RoPT09ZT90OnQuc3ViYXJyYXkoMCxlKSk7bGV0IHI9IiI7Zm9yKGxldCBuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfTt2YXIgWmU9e3N0cmluZzJidWY6dD0+e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RW5jb2RlciYmVGV4dEVuY29kZXIucHJvdG90eXBlLmVuY29kZSlyZXR1cm4obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7bGV0IGUscixuLGksYSxzPXQubGVuZ3RoLG89MDtmb3IoaT0wO2k8cztpKyspcj10LmNoYXJDb2RlQXQoaSksNTUyOTY9PSg2NDUxMiZyKSYmaSsxPHMmJihuPXQuY2hhckNvZGVBdChpKzEpLDU2MzIwPT0oNjQ1MTImbikmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykpLG8rPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFVpbnQ4QXJyYXkobyksYT0wLGk9MDthPG87aSsrKXI9dC5jaGFyQ29kZUF0KGkpLDU1Mjk2PT0oNjQ1MTImcikmJmkrMTxzJiYobj10LmNoYXJDb2RlQXQoaSsxKSw1NjMyMD09KDY0NTEyJm4pJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspKSxyPDEyOD9lW2ErK109cjpyPDIwNDg/KGVbYSsrXT0xOTJ8cj4+PjYsZVthKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2ErK109MjI0fHI+Pj4xMixlW2ErK109MTI4fHI+Pj42JjYzLGVbYSsrXT0xMjh8NjMmcik6KGVbYSsrXT0yNDB8cj4+PjE4LGVbYSsrXT0xMjh8cj4+PjEyJjYzLGVbYSsrXT0xMjh8cj4+PjYmNjMsZVthKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzoodCxlKT0+e2NvbnN0IHI9ZXx8dC5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0LnN1YmFycmF5KDAsZSkpO2xldCBuLGk7Y29uc3QgYT1uZXcgQXJyYXkoMipyKTtmb3IoaT0wLG49MDtuPHI7KXtsZXQgZT10W24rK107aWYoZTwxMjgpe2FbaSsrXT1lO2NvbnRpbnVlfWxldCBzPVRlW2VdO2lmKHM+NClhW2krK109NjU1MzMsbis9cy0xO2Vsc2V7Zm9yKGUmPTI9PT1zPzMxOjM9PT1zPzE1Ojc7cz4xJiZuPHI7KWU9ZTw8Nnw2MyZ0W24rK10scy0tO3M+MT9hW2krK109NjU1MzM6ZTw2NTUzNj9hW2krK109ZTooZS09NjU1MzYsYVtpKytdPTU1Mjk2fGU+PjEwJjEwMjMsYVtpKytdPTU2MzIwfDEwMjMmZSl9fXJldHVybiBIZShhLGkpfSx1dGY4Ym9yZGVyOih0LGUpPT57KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7bGV0IHI9ZS0xO2Zvcig7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK1RlW3Rbcl1dPmU/cjplfX07ZnVuY3Rpb24gTWUoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfXZhciBOZT1NZTtjb25zdCBJZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHtaX05PX0ZMVVNIOlBlLFpfU1lOQ19GTFVTSDokZSxaX0ZVTExfRkxVU0g6amUsWl9GSU5JU0g6S2UsWl9PSzpYZSxaX1NUUkVBTV9FTkQ6cWUsWl9ERUZBVUxUX0NPTVBSRVNTSU9OOkdlLFpfREVGQVVMVF9TVFJBVEVHWTpXZSxaX0RFRkxBVEVEOlllfT1wdDtmdW5jdGlvbiBWZSh0KXt0aGlzLm9wdGlvbnM9T2UuYXNzaWduKHtsZXZlbDpHZSxtZXRob2Q6WWUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpXZX0sdHx8e30pO2xldCBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO2xldCByPUxlLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09WGUpdGhyb3cgbmV3IEVycm9yKGZ0W3JdKTtpZihlLmhlYWRlciYmTGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7bGV0IHQ7aWYodD0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9aZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSxyPUxlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0KSxyIT09WGUpdGhyb3cgbmV3IEVycm9yKGZ0W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gUWUodCxlKXtjb25zdCByPW5ldyBWZShlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fGZ0W3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9ZnVuY3Rpb24gSmUodCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLFFlKHQsZSl9ZnVuY3Rpb24gdHIodCxlKXtyZXR1cm4oZT1lfHx7fSkuZ3ppcD0hMCxRZSh0LGUpfVZlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj10aGlzLnN0cm0sbj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2xldCBpLGE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtmb3IoYT1lPT09fn5lP2U6ITA9PT1lP0tlOlBlLCJzdHJpbmciPT10eXBlb2YgdD9yLmlucHV0PVplLnN0cmluZzJidWYodCk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwodCk/ci5pbnB1dD1uZXcgVWludDhBcnJheSh0KTpyLmlucHV0PXQsci5uZXh0X2luPTAsci5hdmFpbF9pbj1yLmlucHV0Lmxlbmd0aDs7KWlmKDA9PT1yLmF2YWlsX291dCYmKHIub3V0cHV0PW5ldyBVaW50OEFycmF5KG4pLHIubmV4dF9vdXQ9MCxyLmF2YWlsX291dD1uKSwoYT09PSRlfHxhPT09amUpJiZyLmF2YWlsX291dDw9Nil0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2V7aWYoaT1MZS5kZWZsYXRlKHIsYSksaT09PXFlKXJldHVybiByLm5leHRfb3V0PjAmJnRoaXMub25EYXRhKHIub3V0cHV0LnN1YmFycmF5KDAsci5uZXh0X291dCkpLGk9TGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoaSksdGhpcy5lbmRlZD0hMCxpPT09WGU7aWYoMCE9PXIuYXZhaWxfb3V0KXtpZihhPjAmJnIubmV4dF9vdXQ+MCl0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2UgaWYoMD09PXIuYXZhaWxfaW4pYnJlYWt9ZWxzZSB0aGlzLm9uRGF0YShyLm91dHB1dCl9cmV0dXJuITB9LFZlLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sVmUucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpe3Q9PT1YZSYmKHRoaXMucmVzdWx0PU9lLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj10LHRoaXMubXNnPXRoaXMuc3RybS5tc2d9O3ZhciBlcj1WZSxycj1RZSxucj1KZSxpcj10cixhcj1wdCxzcj17RGVmbGF0ZTplcixkZWZsYXRlOnJyLGRlZmxhdGVSYXc6bnIsZ3ppcDppcixjb25zdGFudHM6YXJ9O3QuRGVmbGF0ZT1lcix0LmNvbnN0YW50cz1hcix0LmRlZmF1bHQ9c3IsdC5kZWZsYXRlPXJyLHQuZGVmbGF0ZVJhdz1ucix0Lmd6aXA9aXIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSkoZS5leHBvcnRzKTt2YXIgcixuPXtleHBvcnRzOnt9fSxpPXtleHBvcnRzOnt9fTtpLmV4cG9ydHM9KHI9cnx8ZnVuY3Rpb24oZSxyKXt2YXIgbjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKG49d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKG49c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihuPWdsb2JhbFRoaXMuY3J5cHRvKSwhbiYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKG49d2luZG93Lm1zQ3J5cHRvKSwhbiYmdm9pZCAwIT09dCYmdC5jcnlwdG8mJihuPXQuY3J5cHRvKSwhbil0cnl7bj11bmRlZmluZWR9Y2F0Y2godCl7fXZhciBpPWZ1bmN0aW9uKCl7aWYobil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uZ2V0UmFuZG9tVmFsdWVzKXRyeXtyZXR1cm4gbi5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXX1jYXRjaCh0KXt9aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4ucmFuZG9tQnl0ZXMpdHJ5e3JldHVybiBuLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCl9Y2F0Y2godCl7fX10aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKX0sYT1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiB0LnByb3RvdHlwZT1lLHI9bmV3IHQsdC5wcm90b3R5cGU9bnVsbCxyfX0oKSxzPXt9LG89cy5saWI9e30saD1vLkJhc2U9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMpO3JldHVybiB0JiZlLm1peEluKHQpLGUuaGFzT3duUHJvcGVydHkoImluaXQiKSYmdGhpcy5pbml0IT09ZS5pbml0fHwoZS5pbml0PWZ1bmN0aW9uKCl7ZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmluaXQucHJvdG90eXBlPWUsZS4kc3VwZXI9dGhpcyxlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPXQudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LGw9by5Xb3JkQXJyYXk9aC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlKXt0PXRoaXMud29yZHM9dHx8W10sdGhpcy5zaWdCeXRlcz1lIT1yP2U6NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fHUpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud29yZHMscj10LndvcmRzLG49dGhpcy5zaWdCeXRlcyxpPXQuc2lnQnl0ZXM7aWYodGhpcy5jbGFtcCgpLG4lNClmb3IodmFyIGE9MDthPGk7YSsrKXt2YXIgcz1yW2E+Pj4yXT4+PjI0LWElNCo4JjI1NTtlW24rYT4+PjJdfD1zPDwyNC0obithKSU0Kjh9ZWxzZSBmb3IodmFyIG89MDtvPGk7bys9NCllW24rbz4+PjJdPXJbbz4+PjJdO3JldHVybiB0aGlzLnNpZ0J5dGVzKz1pLHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53b3JkcyxyPXRoaXMuc2lnQnl0ZXM7dFtyPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLXIlNCo4LHQubGVuZ3RoPWUuY2VpbChyLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWguY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHR9LHJhbmRvbTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dDtyKz00KWUucHVzaChpKCkpO3JldHVybiBuZXcgbC5pbml0KGUsdCl9fSksYz1zLmVuYz17fSx1PWMuSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaCgoYT4+PjQpLnRvU3RyaW5nKDE2KSksbi5wdXNoKCgxNSZhKS50b1N0cmluZygxNikpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rPTIpcltuPj4+M118PXBhcnNlSW50KHQuc3Vic3RyKG4sMiksMTYpPDwyNC1uJTgqNDtyZXR1cm4gbmV3IGwuaW5pdChyLGUvMil9fSxkPWMuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLHI9W10sbj0wO248ZTtuKyspcltuPj4+Ml18PSgyNTUmdC5jaGFyQ29kZUF0KG4pKTw8MjQtbiU0Kjg7cmV0dXJuIG5ldyBsLmluaXQocixlKX19LF89Yy5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGQuc3RyaW5naWZ5KHQpKSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGQucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSl9fSxmPW8uQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1oLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBsLmluaXQsdGhpcy5fbkRhdGFCeXRlcz0wfSxfYXBwZW5kOmZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9Xy5wYXJzZSh0KSksdGhpcy5fZGF0YS5jb25jYXQodCksdGhpcy5fbkRhdGFCeXRlcys9dC5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIHIsbj10aGlzLl9kYXRhLGk9bi53b3JkcyxhPW4uc2lnQnl0ZXMscz10aGlzLmJsb2NrU2l6ZSxvPWEvKDQqcyksaD0obz10P2UuY2VpbChvKTplLm1heCgoMHxvKS10aGlzLl9taW5CdWZmZXJTaXplLDApKSpzLGM9ZS5taW4oNCpoLGEpO2lmKGgpe2Zvcih2YXIgdT0wO3U8aDt1Kz1zKXRoaXMuX2RvUHJvY2Vzc0Jsb2NrKGksdSk7cj1pLnNwbGljZSgwLGgpLG4uc2lnQnl0ZXMtPWN9cmV0dXJuIG5ldyBsLmluaXQocixjKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1oLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLHR9LF9taW5CdWZmZXJTaXplOjB9KTtvLkhhc2hlcj1mLmV4dGVuZCh7Y2ZnOmguZXh0ZW5kKCksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2YucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5fYXBwZW5kKHQpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0LmluaXQocikuZmluYWxpemUoZSl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHAuSE1BQy5pbml0KHQscikuZmluYWxpemUoZSl9fX0pO3ZhciBwPXMuYWxnbz17fTtyZXR1cm4gc30oTWF0aCksciksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQsZSxuKXtmb3IodmFyIGk9W10sYT0wLHM9MDtzPGU7cysrKWlmKHMlNCl7dmFyIG89blt0LmNoYXJDb2RlQXQocy0xKV08PHMlNCoyfG5bdC5jaGFyQ29kZUF0KHMpXT4+PjYtcyU0KjI7aVthPj4+Ml18PW88PDI0LWElNCo4LGErK31yZXR1cm4gci5jcmVhdGUoaSxhKX1lLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIHM9KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxvPTA7bzw0JiZhKy43NSpvPHI7bysrKWkucHVzaChuLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciBoPW4uY2hhckF0KDY0KTtpZihoKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGgpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgcz1yLmNoYXJBdCg2NCk7aWYocyl7dmFyIG89dC5pbmRleE9mKHMpOy0xIT09byYmKGU9byl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHQuZW5jLkJhc2U2NH0oaS5leHBvcnRzKX0obik7dmFyIGE9bi5leHBvcnRzLHM9e2V4cG9ydHM6e319LG89e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dCxuPXIubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixzPXIuYWxnbyxvPVtdOyFmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8NjQ7dCsrKW9bdF09NDI5NDk2NzI5NiplLmFicyhlLnNpbih0KzEpKXwwfSgpO3ZhciBoPXMuTUQ1PWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8MTY7cisrKXt2YXIgbj1lK3IsaT10W25dO3Rbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxzPXRbZSswXSxoPXRbZSsxXSxfPXRbZSsyXSxmPXRbZSszXSxwPXRbZSs0XSxnPXRbZSs1XSx5PXRbZSs2XSx2PXRbZSs3XSx3PXRbZSs4XSxtPXRbZSs5XSxiPXRbZSsxMF0seD10W2UrMTFdLGs9dFtlKzEyXSx6PXRbZSsxM10sQT10W2UrMTRdLEU9dFtlKzE1XSxTPWFbMF0sQj1hWzFdLFI9YVsyXSxEPWFbM107Uz1sKFMsQixSLEQscyw3LG9bMF0pLEQ9bChELFMsQixSLGgsMTIsb1sxXSksUj1sKFIsRCxTLEIsXywxNyxvWzJdKSxCPWwoQixSLEQsUyxmLDIyLG9bM10pLFM9bChTLEIsUixELHAsNyxvWzRdKSxEPWwoRCxTLEIsUixnLDEyLG9bNV0pLFI9bChSLEQsUyxCLHksMTcsb1s2XSksQj1sKEIsUixELFMsdiwyMixvWzddKSxTPWwoUyxCLFIsRCx3LDcsb1s4XSksRD1sKEQsUyxCLFIsbSwxMixvWzldKSxSPWwoUixELFMsQixiLDE3LG9bMTBdKSxCPWwoQixSLEQsUyx4LDIyLG9bMTFdKSxTPWwoUyxCLFIsRCxrLDcsb1sxMl0pLEQ9bChELFMsQixSLHosMTIsb1sxM10pLFI9bChSLEQsUyxCLEEsMTcsb1sxNF0pLFM9YyhTLEI9bChCLFIsRCxTLEUsMjIsb1sxNV0pLFIsRCxoLDUsb1sxNl0pLEQ9YyhELFMsQixSLHksOSxvWzE3XSksUj1jKFIsRCxTLEIseCwxNCxvWzE4XSksQj1jKEIsUixELFMscywyMCxvWzE5XSksUz1jKFMsQixSLEQsZyw1LG9bMjBdKSxEPWMoRCxTLEIsUixiLDksb1syMV0pLFI9YyhSLEQsUyxCLEUsMTQsb1syMl0pLEI9YyhCLFIsRCxTLHAsMjAsb1syM10pLFM9YyhTLEIsUixELG0sNSxvWzI0XSksRD1jKEQsUyxCLFIsQSw5LG9bMjVdKSxSPWMoUixELFMsQixmLDE0LG9bMjZdKSxCPWMoQixSLEQsUyx3LDIwLG9bMjddKSxTPWMoUyxCLFIsRCx6LDUsb1syOF0pLEQ9YyhELFMsQixSLF8sOSxvWzI5XSksUj1jKFIsRCxTLEIsdiwxNCxvWzMwXSksUz11KFMsQj1jKEIsUixELFMsaywyMCxvWzMxXSksUixELGcsNCxvWzMyXSksRD11KEQsUyxCLFIsdywxMSxvWzMzXSksUj11KFIsRCxTLEIseCwxNixvWzM0XSksQj11KEIsUixELFMsQSwyMyxvWzM1XSksUz11KFMsQixSLEQsaCw0LG9bMzZdKSxEPXUoRCxTLEIsUixwLDExLG9bMzddKSxSPXUoUixELFMsQix2LDE2LG9bMzhdKSxCPXUoQixSLEQsUyxiLDIzLG9bMzldKSxTPXUoUyxCLFIsRCx6LDQsb1s0MF0pLEQ9dShELFMsQixSLHMsMTEsb1s0MV0pLFI9dShSLEQsUyxCLGYsMTYsb1s0Ml0pLEI9dShCLFIsRCxTLHksMjMsb1s0M10pLFM9dShTLEIsUixELG0sNCxvWzQ0XSksRD11KEQsUyxCLFIsaywxMSxvWzQ1XSksUj11KFIsRCxTLEIsRSwxNixvWzQ2XSksUz1kKFMsQj11KEIsUixELFMsXywyMyxvWzQ3XSksUixELHMsNixvWzQ4XSksRD1kKEQsUyxCLFIsdiwxMCxvWzQ5XSksUj1kKFIsRCxTLEIsQSwxNSxvWzUwXSksQj1kKEIsUixELFMsZywyMSxvWzUxXSksUz1kKFMsQixSLEQsayw2LG9bNTJdKSxEPWQoRCxTLEIsUixmLDEwLG9bNTNdKSxSPWQoUixELFMsQixiLDE1LG9bNTRdKSxCPWQoQixSLEQsUyxoLDIxLG9bNTVdKSxTPWQoUyxCLFIsRCx3LDYsb1s1Nl0pLEQ9ZChELFMsQixSLEUsMTAsb1s1N10pLFI9ZChSLEQsUyxCLHksMTUsb1s1OF0pLEI9ZChCLFIsRCxTLHosMjEsb1s1OV0pLFM9ZChTLEIsUixELHAsNixvWzYwXSksRD1kKEQsUyxCLFIseCwxMCxvWzYxXSksUj1kKFIsRCxTLEIsXywxNSxvWzYyXSksQj1kKEIsUixELFMsbSwyMSxvWzYzXSksYVswXT1hWzBdK1N8MCxhWzFdPWFbMV0rQnwwLGFbMl09YVsyXStSfDAsYVszXT1hWzNdK0R8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLHI9dC53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqdC5zaWdCeXRlcztyW2k+Pj41XXw9MTI4PDwyNC1pJTMyO3ZhciBhPWUuZmxvb3Iobi80Mjk0OTY3Mjk2KSxzPW47clsxNSsoaSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KSxyWzE0KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihzPDw4fHM+Pj4yNCl8NDI3ODI1NTM2MCYoczw8MjR8cz4+PjgpLHQuc2lnQnl0ZXM9NCooci5sZW5ndGgrMSksdGhpcy5fcHJvY2VzcygpO2Zvcih2YXIgbz10aGlzLl9oYXNoLGg9by53b3JkcyxsPTA7bDw0O2wrKyl7dmFyIGM9aFtsXTtoW2xdPTE2NzExOTM1JihjPDw4fGM+Pj4yNCl8NDI3ODI1NTM2MCYoYzw8MjR8Yz4+PjgpfXJldHVybiBvfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtmdW5jdGlvbiBsKHQsZSxyLG4saSxhLHMpe3ZhciBvPXQrKGUmcnx+ZSZuKStpK3M7cmV0dXJuKG88PGF8bz4+PjMyLWEpK2V9ZnVuY3Rpb24gYyh0LGUscixuLGksYSxzKXt2YXIgbz10KyhlJm58ciZ+bikraStzO3JldHVybihvPDxhfG8+Pj4zMi1hKStlfWZ1bmN0aW9uIHUodCxlLHIsbixpLGEscyl7dmFyIG89dCsoZV5yXm4pK2krcztyZXR1cm4obzw8YXxvPj4+MzItYSkrZX1mdW5jdGlvbiBkKHQsZSxyLG4saSxhLHMpe3ZhciBvPXQrKHJeKGV8fm4pKStpK3M7cmV0dXJuKG88PGF8bz4+PjMyLWEpK2V9ci5NRDU9YS5fY3JlYXRlSGVscGVyKGgpLHIuSG1hY01ENT1hLl9jcmVhdGVIbWFjSGVscGVyKGgpfShNYXRoKSx0Lk1ENX0oaS5leHBvcnRzKX0obyk7dmFyIGg9e2V4cG9ydHM6e319LGw9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIsbj1yLldvcmRBcnJheSxpPXIuSGFzaGVyLGE9ZS5hbGdvLHM9W10sbz1hLlNIQTE9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbi5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxvPXJbM10saD1yWzRdLGw9MDtsPDgwO2wrKyl7aWYobDwxNilzW2xdPTB8dFtlK2xdO2Vsc2V7dmFyIGM9c1tsLTNdXnNbbC04XV5zW2wtMTRdXnNbbC0xNl07c1tsXT1jPDwxfGM+Pj4zMX12YXIgdT0objw8NXxuPj4+MjcpK2grc1tsXTt1Kz1sPDIwPzE1MTg1MDAyNDkrKGkmYXx+aSZvKTpsPDQwPzE4NTk3NzUzOTMrKGleYV5vKTpsPDYwPyhpJmF8aSZvfGEmbyktMTg5NDAwNzU4ODooaV5hXm8pLTg5OTQ5NzUxNCxoPW8sbz1hLGE9aTw8MzB8aT4+PjIsaT1uLG49dX1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStofDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxlPXQud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsbj04KnQuc2lnQnl0ZXM7cmV0dXJuIGVbbj4+PjVdfD0xMjg8PDI0LW4lMzIsZVsxNCsobis2ND4+Pjk8PDQpXT1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksZVsxNSsobis2ND4+Pjk8PDQpXT1yLHQuc2lnQnl0ZXM9NCplLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZS5TSEExPWkuX2NyZWF0ZUhlbHBlcihvKSxlLkhtYWNTSEExPWkuX2NyZWF0ZUhtYWNIZWxwZXIobyl9KCksdC5TSEExfShpLmV4cG9ydHMpfShsKTt2YXIgYz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyPShlPXQpLmxpYi5CYXNlLG49ZS5lbmMuVXRmOCxlLmFsZ28uSE1BQz1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGUpe3Q9dGhpcy5faGFzaGVyPW5ldyB0LmluaXQsInN0cmluZyI9PXR5cGVvZiBlJiYoZT1uLnBhcnNlKGUpKTt2YXIgcj10LmJsb2NrU2l6ZSxpPTQqcjtlLnNpZ0J5dGVzPmkmJihlPXQuZmluYWxpemUoZSkpLGUuY2xhbXAoKTtmb3IodmFyIGE9dGhpcy5fb0tleT1lLmNsb25lKCkscz10aGlzLl9pS2V5PWUuY2xvbmUoKSxvPWEud29yZHMsaD1zLndvcmRzLGw9MDtsPHI7bCsrKW9bbF1ePTE1NDk1NTY4MjgsaFtsXV49OTA5NTIyNDg2O2Euc2lnQnl0ZXM9cy5zaWdCeXRlcz1pLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoZXI7dC5yZXNldCgpLHQudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUodCksdGhpc30sZmluYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faGFzaGVyLHI9ZS5maW5hbGl6ZSh0KTtyZXR1cm4gZS5yZXNldCgpLGUuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fSl9KGkuZXhwb3J0cyl9KGMpLGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuQmFzZSxpPXIuV29yZEFycmF5LGE9ZS5hbGdvLHM9YS5NRDUsbz1hLkV2cEtERj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOnMsaXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxhPW4uaGFzaGVyLmNyZWF0ZSgpLHM9aS5jcmVhdGUoKSxvPXMud29yZHMsaD1uLmtleVNpemUsbD1uLml0ZXJhdGlvbnM7by5sZW5ndGg8aDspe3ImJmEudXBkYXRlKHIpLHI9YS51cGRhdGUodCkuZmluYWxpemUoZSksYS5yZXNldCgpO2Zvcih2YXIgYz0xO2M8bDtjKyspcj1hLmZpbmFsaXplKHIpLGEucmVzZXQoKTtzLmNvbmNhdChyKX1yZXR1cm4gcy5zaWdCeXRlcz00Kmgsc319KTtlLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIG8uY3JlYXRlKHIpLmNvbXB1dGUodCxlKX19KCksdC5FdnBLREZ9KGkuZXhwb3J0cyl9KGgpO3ZhciB1PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5saWIuQ2lwaGVyfHxmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLkJhc2UsYT1uLldvcmRBcnJheSxzPW4uQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxvPXIuZW5jO28uVXRmODt2YXIgaD1vLkJhc2U2NCxsPXIuYWxnby5FdnBLREYsYz1uLkNpcGhlcj1zLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3MucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3c6eX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KTtuLlN0cmVhbUNpcGhlcj1jLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIHU9ci5tb2RlPXt9LGQ9bi5CbG9ja0NpcGhlck1vZGU9aS5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUodCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZSh0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSl7dGhpcy5fY2lwaGVyPXQsdGhpcy5faXY9ZX19KSxfPXUuQ0JDPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5leHRlbmQoKTtmdW5jdGlvbiByKHQscixuKXt2YXIgaSxhPXRoaXMuX2l2O2E/KGk9YSx0aGlzLl9pdj1lKTppPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIHM9MDtzPG47cysrKXRbcitzXV49aVtzXX1yZXR1cm4gdC5FbmNyeXB0b3I9dC5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplO3IuY2FsbCh0aGlzLHQsZSxpKSxuLmVuY3J5cHRCbG9jayh0LGUpLHRoaXMuX3ByZXZCbG9jaz10LnNsaWNlKGUsZStpKX19KSx0LkRlY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemUsYT10LnNsaWNlKGUsZStpKTtuLmRlY3J5cHRCbG9jayh0LGUpLHIuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLl9wcmV2QmxvY2s9YX19KSx0fSgpLGY9KHIucGFkPXt9KS5Qa2NzNz17cGFkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTQqZSxuPXItdC5zaWdCeXRlcyVyLGk9bjw8MjR8bjw8MTZ8bjw8OHxuLHM9W10sbz0wO288bjtvKz00KXMucHVzaChpKTt2YXIgaD1hLmNyZWF0ZShzLG4pO3QuY29uY2F0KGgpfSx1bnBhZDpmdW5jdGlvbih0KXt2YXIgZT0yNTUmdC53b3Jkc1t0LnNpZ0J5dGVzLTE+Pj4yXTt0LnNpZ0J5dGVzLT1lfX07bi5CbG9ja0NpcGhlcj1jLmV4dGVuZCh7Y2ZnOmMuY2ZnLmV4dGVuZCh7bW9kZTpfLHBhZGRpbmc6Zn0pLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ7Yy5yZXNldC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuY2ZnLHI9ZS5pdixuPWUubW9kZTt0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFP3Q9bi5jcmVhdGVFbmNyeXB0b3I6KHQ9bi5jcmVhdGVEZWNyeXB0b3IsdGhpcy5fbWluQnVmZmVyU2l6ZT0xKSx0aGlzLl9tb2RlJiZ0aGlzLl9tb2RlLl9fY3JlYXRvcj09dD90aGlzLl9tb2RlLmluaXQodGhpcyxyJiZyLndvcmRzKToodGhpcy5fbW9kZT10LmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPXQpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayh0LGUpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT8oZS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSksdD10aGlzLl9wcm9jZXNzKCEwKSk6KHQ9dGhpcy5fcHJvY2VzcyghMCksZS51bnBhZCh0KSksdH0sYmxvY2tTaXplOjR9KTt2YXIgcD1uLkNpcGhlclBhcmFtcz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxnPShyLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9hLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhoKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1oLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9YS5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSxwLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0seT1uLlNlcmlhbGl6YWJsZUNpcGhlcj1pLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKHtmb3JtYXQ6Z30pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSkscz1pLmNmZztyZXR1cm4gcC5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpzLml2LGFsZ29yaXRobTp0LG1vZGU6cy5tb2RlLHBhZGRpbmc6cy5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSx2PShyLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuKXtufHwobj1hLnJhbmRvbSg4KSk7dmFyIGk9bC5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pLHM9YS5jcmVhdGUoaS53b3Jkcy5zbGljZShlKSw0KnIpO3JldHVybiBpLnNpZ0J5dGVzPTQqZSxwLmNyZWF0ZSh7a2V5OmksaXY6cyxzYWx0Om59KX19LHc9bi5QYXNzd29yZEJhc2VkQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6eS5jZmcuZXh0ZW5kKHtrZGY6dn0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9KG49dGhpcy5jZmcuZXh0ZW5kKG4pKS5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSk7bi5pdj1pLml2O3ZhciBhPXkuZW5jcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pO3JldHVybiBhLm1peEluKGkpLGF9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KTt2YXIgaT1uLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplLGUuc2FsdCk7cmV0dXJuIG4uaXY9aS5pdix5LmRlY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKX19KX0oKX0oaS5leHBvcnRzKX0odSksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLkJsb2NrQ2lwaGVyLG49ZS5hbGdvLGk9W10sYT1bXSxzPVtdLG89W10saD1bXSxsPVtdLGM9W10sdT1bXSxkPVtdLF89W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI1NjtlKyspdFtlXT1lPDEyOD9lPDwxOmU8PDFeMjgzO3ZhciByPTAsbj0wO2ZvcihlPTA7ZTwyNTY7ZSsrKXt2YXIgZj1uXm48PDFebjw8Ml5uPDwzXm48PDQ7Zj1mPj4+OF4yNTUmZl45OSxpW3JdPWYsYVtmXT1yO3ZhciBwPXRbcl0sZz10W3BdLHk9dFtnXSx2PTI1Nyp0W2ZdXjE2ODQzMDA4KmY7c1tyXT12PDwyNHx2Pj4+OCxvW3JdPXY8PDE2fHY+Pj4xNixoW3JdPXY8PDh8dj4+PjI0LGxbcl09dix2PTE2ODQzMDA5KnleNjU1MzcqZ14yNTcqcF4xNjg0MzAwOCpyLGNbZl09djw8MjR8dj4+PjgsdVtmXT12PDwxNnx2Pj4+MTYsZFtmXT12PDw4fHY+Pj4yNCxfW2ZdPXYscj8ocj1wXnRbdFt0W3lecF1dXSxuXj10W3Rbbl1dKTpyPW49MX19KCk7dmFyIGY9WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHA9bi5BRVM9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX25Sb3VuZHN8fHRoaXMuX2tleVByaW9yUmVzZXQhPT10aGlzLl9rZXkpe2Zvcih2YXIgdD10aGlzLl9rZXlQcmlvclJlc2V0PXRoaXMuX2tleSxlPXQud29yZHMscj10LnNpZ0J5dGVzLzQsbj00KigodGhpcy5fblJvdW5kcz1yKzYpKzEpLGE9dGhpcy5fa2V5U2NoZWR1bGU9W10scz0wO3M8bjtzKyspczxyP2Fbc109ZVtzXToobD1hW3MtMV0scyVyP3I+NiYmcyVyPT00JiYobD1pW2w+Pj4yNF08PDI0fGlbbD4+PjE2JjI1NV08PDE2fGlbbD4+PjgmMjU1XTw8OHxpWzI1NSZsXSk6KGw9aVsobD1sPDw4fGw+Pj4yNCk+Pj4yNF08PDI0fGlbbD4+PjE2JjI1NV08PDE2fGlbbD4+PjgmMjU1XTw8OHxpWzI1NSZsXSxsXj1mW3MvcnwwXTw8MjQpLGFbc109YVtzLXJdXmwpO2Zvcih2YXIgbz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXSxoPTA7aDxuO2grKyl7aWYocz1uLWgsaCU0KXZhciBsPWFbc107ZWxzZSBsPWFbcy00XTtvW2hdPWg8NHx8czw9ND9sOmNbaVtsPj4+MjRdXV51W2lbbD4+PjE2JjI1NV1dXmRbaVtsPj4+OCYyNTVdXV5fW2lbMjU1JmxdXX19fSxlbmNyeXB0QmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9kb0NyeXB0QmxvY2sodCxlLHRoaXMuX2tleVNjaGVkdWxlLHMsbyxoLGwsaSl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3ZhciByPXRbZSsxXTt0W2UrMV09dFtlKzNdLHRbZSszXT1yLHRoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5faW52S2V5U2NoZWR1bGUsYyx1LGQsXyxhKSxyPXRbZSsxXSx0W2UrMV09dFtlKzNdLHRbZSszXT1yfSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSxyLG4saSxhLHMsbyl7Zm9yKHZhciBoPXRoaXMuX25Sb3VuZHMsbD10W2VdXnJbMF0sYz10W2UrMV1eclsxXSx1PXRbZSsyXV5yWzJdLGQ9dFtlKzNdXnJbM10sXz00LGY9MTtmPGg7ZisrKXt2YXIgcD1uW2w+Pj4yNF1eaVtjPj4+MTYmMjU1XV5hW3U+Pj44JjI1NV1ec1syNTUmZF1ecltfKytdLGc9bltjPj4+MjRdXmlbdT4+PjE2JjI1NV1eYVtkPj4+OCYyNTVdXnNbMjU1JmxdXnJbXysrXSx5PW5bdT4+PjI0XV5pW2Q+Pj4xNiYyNTVdXmFbbD4+PjgmMjU1XV5zWzI1NSZjXV5yW18rK10sdj1uW2Q+Pj4yNF1eaVtsPj4+MTYmMjU1XV5hW2M+Pj44JjI1NV1ec1syNTUmdV1ecltfKytdO2w9cCxjPWcsdT15LGQ9dn1wPShvW2w+Pj4yNF08PDI0fG9bYz4+PjE2JjI1NV08PDE2fG9bdT4+PjgmMjU1XTw8OHxvWzI1NSZkXSlecltfKytdLGc9KG9bYz4+PjI0XTw8MjR8b1t1Pj4+MTYmMjU1XTw8MTZ8b1tkPj4+OCYyNTVdPDw4fG9bMjU1JmxdKV5yW18rK10seT0ob1t1Pj4+MjRdPDwyNHxvW2Q+Pj4xNiYyNTVdPDwxNnxvW2w+Pj44JjI1NV08PDh8b1syNTUmY10pXnJbXysrXSx2PShvW2Q+Pj4yNF08PDI0fG9bbD4+PjE2JjI1NV08PDE2fG9bYz4+PjgmMjU1XTw8OHxvWzI1NSZ1XSlecltfKytdLHRbZV09cCx0W2UrMV09Zyx0W2UrMl09eSx0W2UrM109dn0sa2V5U2l6ZTo4fSk7ZS5BRVM9ci5fY3JlYXRlSGVscGVyKHApfSgpLHQuQUVTfShpLmV4cG9ydHMpfShzKTt2YXIgZD1zLmV4cG9ydHMsXz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLHM9ci5hbGdvLG89W10saD1bXTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgcj1lLnNxcnQodCksbj0yO248PXI7bisrKWlmKCEodCVuKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiByKHQpe3JldHVybiA0Mjk0OTY3Mjk2Kih0LSgwfHQpKXwwfWZvcih2YXIgbj0yLGk9MDtpPDY0Oyl0KG4pJiYoaTw4JiYob1tpXT1yKGUucG93KG4sLjUpKSksaFtpXT1yKGUucG93KG4sMS8zKSksaSsrKSxuKyt9KCk7dmFyIGw9W10sYz1zLlNIQTI1Nj1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBpLmluaXQoby5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxpPXJbMV0sYT1yWzJdLHM9clszXSxvPXJbNF0sYz1yWzVdLHU9cls2XSxkPXJbN10sXz0wO188NjQ7XysrKXtpZihfPDE2KWxbX109MHx0W2UrX107ZWxzZXt2YXIgZj1sW18tMTVdLHA9KGY8PDI1fGY+Pj43KV4oZjw8MTR8Zj4+PjE4KV5mPj4+MyxnPWxbXy0yXSx5PShnPDwxNXxnPj4+MTcpXihnPDwxM3xnPj4+MTkpXmc+Pj4xMDtsW19dPXArbFtfLTddK3krbFtfLTE2XX12YXIgdj1uJmlebiZhXmkmYSx3PShuPDwzMHxuPj4+MileKG48PDE5fG4+Pj4xMyleKG48PDEwfG4+Pj4yMiksbT1kKygobzw8MjZ8bz4+PjYpXihvPDwyMXxvPj4+MTEpXihvPDw3fG8+Pj4yNSkpKyhvJmNefm8mdSkraFtfXStsW19dO2Q9dSx1PWMsYz1vLG89cyttfDAscz1hLGE9aSxpPW4sbj1tKyh3K3YpfDB9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK3N8MCxyWzRdPXJbNF0rb3wwLHJbNV09cls1XStjfDAscls2XT1yWzZdK3V8MCxyWzddPXJbN10rZHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCp0LnNpZ0J5dGVzO3JldHVybiByW2k+Pj41XXw9MTI4PDwyNC1pJTMyLHJbMTQrKGkrNjQ+Pj45PDw0KV09ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLHJbMTUrKGkrNjQ+Pj45PDw0KV09bix0LnNpZ0J5dGVzPTQqci5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO3IuU0hBMjU2PWEuX2NyZWF0ZUhlbHBlcihjKSxyLkhtYWNTSEEyNTY9YS5fY3JlYXRlSG1hY0hlbHBlcihjKX0oTWF0aCksdC5TSEEyNTZ9KGkuZXhwb3J0cyl9KF8pO3ZhciBmPV8uZXhwb3J0cyxwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgZT10LmxpYi5Xb3JkQXJyYXkscj1lLmluaXQsbj1lLmluaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYodD1uZXcgVWludDhBcnJheSh0KSksKHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJnQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8dCBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIEludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJih0PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpKSx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBlPXQuYnl0ZUxlbmd0aCxuPVtdLGk9MDtpPGU7aSsrKW5baT4+PjJdfD10W2ldPDwyNC1pJTQqODtyLmNhbGwodGhpcyxuLGUpfWVsc2Ugci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O24ucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaS5leHBvcnRzKX0ocCk7dmFyIGc9cC5leHBvcnRzLHk9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShpLmV4cG9ydHMpfSh5KTt2YXIgdj15LmV4cG9ydHM7Y29uc3Qgdz0hMTtsZXQgbSxiO29ubWVzc2FnZT1mdW5jdGlvbih0KXtjb25zdHtqb2I6cixjbWQ6bixzZXJ2ZXI6aSxwYXRoOnMsYnVmZmVyOm8sa2V5QmFzZTY0OmgsZ3ppcDpsLHJlZmVycmVyOmMsaWQ6dSxhcHBJZDpfLHBlcnNpc3RlbnRJZDpwLENST1FVRVRfVkVSU0lPTjp5LGRlYnVnOngsd2hhdDprfT10LmRhdGE7aWYoInVwbG9hZEVuY3J5cHRlZCI9PT1uKUIocyk7ZWxzZSBjb25zb2xlLmVycm9yKCJVbmtub3duIHdvcmtlciBjb21tYW5kIixuKTtmdW5jdGlvbiB6KHQpe2NvbnN0IGU9RGF0ZS5ub3coKSxyPWcuY3JlYXRlKHQpLG49YS5wYXJzZShoKSxpPXYocixuKSxzPWcucmFuZG9tKDE2KSx7Y2lwaGVydGV4dDpvfT1kLmVuY3J5cHQocixuLHtpdjpzfSksbD1uZXcgQXJyYXlCdWZmZXIoNCtzLnNpZ0J5dGVzK2kuc2lnQnl0ZXMrby5zaWdCeXRlcyksYz1uZXcgRGF0YVZpZXcobCk7bGV0IF89MDtjLnNldFVpbnQzMihfLDExMjk0NjgyMDksITEpLF8rPTQ7Zm9yKGNvbnN0IHQgb2ZbcyxpLG9dKWZvcihjb25zdCBlIG9mIHQud29yZHMpYy5zZXRJbnQzMihfLGUsITEpLF8rPTQ7cmV0dXJuIHgmJmNvbnNvbGUubG9nKGAke3V9ICR7a30gZW5jcnlwdGVkICgke2wuYnl0ZUxlbmd0aH0gYnl0ZXMpIGluICR7RGF0ZS5ub3coKS1lfW1zYCksbH1mdW5jdGlvbiBBKHQpe2NvbnN0IHI9RGF0ZS5ub3coKSxuPWUuZXhwb3J0cy5kZWZsYXRlKHQse2d6aXA6ITAsbGV2ZWw6MX0pO3JldHVybiB4JiZjb25zb2xlLmxvZyhgJHt1fSAke2t9IGNvbXByZXNzZWQgKCR7bi5sZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktcn1tc2ApLG59ZnVuY3Rpb24gRSh0KXtjb25zdCBlPURhdGUubm93KCkscj1mKGcuY3JlYXRlKHQpKSxuPWEuc3RyaW5naWZ5KHIpLnJlcGxhY2UoLz0vZywiIikucmVwbGFjZSgvXCsvZywiLSIpLnJlcGxhY2UoL1wvL2csIl8iKTtyZXR1cm4geCYmY29uc29sZS5sb2coYCR7dX0gJHtrfSBoYXNoZWQgKCR7dC5sZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLG59YXN5bmMgZnVuY3Rpb24gUyh0KXtjb25zdCBlPURhdGUubm93KCkscj1gJHtpLnVybH0vJHt0fWA7aWYoIWkuYXBpS2V5KXJldHVybnt1cmw6cix1cGxvYWRVcmw6cn07Y29uc3Qgbj1hd2FpdCBtKHIse2hlYWRlcnM6eyJYLUNyb3F1ZXQtQXV0aCI6aS5hcGlLZXksIlgtQ3JvcXVldC1BcHAiOl8sIlgtQ3JvcXVldC1JZCI6cCwiWC1Dcm9xdWV0LVNlc3Npb24iOnUsIlgtQ3JvcXVldC1WZXJzaW9uIjp5LCJYLUNyb3F1ZXQtUGF0aCI6bmV3IFVSTChjKS5wYXRobmFtZX0scmVmZXJyZXI6Y30pLHtvazphLHN0YXR1czpzLHN0YXR1c1RleHQ6b309bjtpZighYSl0aHJvdyBFcnJvcihgRXJyb3IgaW4gc2lnbmluZyBVUkw6ICR7c30gLSAke299YCk7Y29uc3R7ZXJyb3I6aCxyZWFkOmwsd3JpdGU6ZH09YXdhaXQgbi5qc29uKCk7aWYoaCl0aHJvdyBFcnJvcihoKTtyZXR1cm4geCYmY29uc29sZS5sb2coYCR7dX0gJHtrfSBhdXRob3JpemVkIGluICR7RGF0ZS5ub3coKS1lfW1zYCkse3VybDpsLHVwbG9hZFVybDpkfX1hc3luYyBmdW5jdGlvbiBCKHQpe3RyeXtsZXQgZT16KGw/QShvKTpvKTt3LHQuaW5jbHVkZXMoIiVIQVNIJSIpJiYodD10LnJlcGxhY2UoIiVIQVNIJSIsRShlKSkpO2NvbnN0e3VwbG9hZFVybDpuLHVybDppfT1hd2FpdCBTKHQpLGE9RGF0ZS5ub3coKSx7b2s6cyxzdGF0dXM6aCxzdGF0dXNUZXh0OmR9PWF3YWl0IG0obix7bWV0aG9kOiJQVVQiLG1vZGU6ImNvcnMiLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iLCJYLUNyb3F1ZXQtQXBwIjpfLCJYLUNyb3F1ZXQtSWQiOnAsIlgtQ3JvcXVldC1TZXNzaW9uIjp1LCJYLUNyb3F1ZXQtVmVyc2lvbiI6eX0scmVmZXJyZXI6Yyxib2R5OmV9KTtpZighcyl0aHJvdyBFcnJvcihgc2VydmVyIHJldHVybmVkICR7aH0gJHtkfSBmb3IgUFVUICR7bn1gKTt4JiZjb25zb2xlLmxvZyhgJHt1fSAke2t9IHVwbG9hZGVkICgke2h9KSBpbiAke0RhdGUubm93KCktYX1tcyAke2l9YCksYih7am9iOnIsdXJsOmksb2s6cyxzdGF0dXM6aCxzdGF0dXNUZXh0OmQsYnl0ZXM6ZS5ieXRlTGVuZ3RofSl9Y2F0Y2godCl7eCYmY29uc29sZS5sb2coYCR7dX0gdXBsb2FkIGVycm9yICR7dC5tZXNzYWdlfWApLGIoe2pvYjpyLG9rOiExLHN0YXR1czotMSxzdGF0dXNUZXh0OnQubWVzc2FnZX0pfX19LG09ZmV0Y2gsYj1wb3N0TWVzc2FnZX0oKTsKCg==",null,!1,function(a){return ir=ir||function wa(a,v,V){var Y=void 0===v?null:v,P=function(a,v){var V=atob(a);if(v){for(var Y=new Uint8Array(V.length),P=0,K=V.length;P<K;++P)Y[P]=V.charCodeAt(P);return String.fromCharCode.apply(null,new Uint16Array(Y.buffer))}return V}(a,void 0!==V&&V),K=P.indexOf("\n",10)+1,M=P.substring(K)+(Y?"//# sourceMappingURL="+Y:""),H=new Blob([M],{type:"application/javascript"});return URL.createObjectURL(H)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMwogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIzLTA0LTA3CiAqIFZlcnNpb246IDEuMS4wLTIxCiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB0PSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLHI9T2JqZWN0LnByb3RvdHlwZSxuPXIuaGFzT3duUHJvcGVydHksaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxhPWkuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixzPWkuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsbz1pLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gaCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtoKHt9LCIiKX1jYXRjaCh0KXtoPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBsKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZz9lOmcsYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxzPW5ldyBCKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj11O3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1fKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1mKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBEKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgcz1yLmRlbGVnYXRlO2lmKHMpe3ZhciBvPUEocyxyKTtpZihvKXtpZihvPT09cCljb250aW51ZTtyZXR1cm4gb319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT11KXRocm93IG49ZixyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249Xzt2YXIgaD1jKHQsZSxyKTtpZigibm9ybWFsIj09PWgudHlwZSl7aWYobj1yLmRvbmU/ZjpkLGguYXJnPT09cCljb250aW51ZTtyZXR1cm57dmFsdWU6aC5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1oLnR5cGUmJihuPWYsci5tZXRob2Q9InRocm93IixyLmFyZz1oLmFyZyl9fX0odCxyLHMpLGF9ZnVuY3Rpb24gYyh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6dH19fXQud3JhcD1sO3ZhciB1PSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLF89ImV4ZWN1dGluZyIsZj0iY29tcGxldGVkIixwPXt9O2Z1bmN0aW9uIGcoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiB2KCl7fXZhciB3PXt9O2godyxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBtPU9iamVjdC5nZXRQcm90b3R5cGVPZixiPW0mJm0obShSKFtdKSkpO2ImJmIhPT1yJiZuLmNhbGwoYixhKSYmKHc9Yik7dmFyIHg9di5wcm90b3R5cGU9Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh3KTtmdW5jdGlvbiBrKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aCh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiB6KHQsZSl7ZnVuY3Rpb24gcihpLGEscyxvKXt2YXIgaD1jKHRbaV0sdCxhKTtpZigidGhyb3ciIT09aC50eXBlKXt2YXIgbD1oLmFyZyx1PWwudmFsdWU7cmV0dXJuIHUmJiJvYmplY3QiPT10eXBlb2YgdSYmbi5jYWxsKHUsIl9fYXdhaXQiKT9lLnJlc29sdmUodS5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtyKCJuZXh0Iix0LHMsbyl9KSwoZnVuY3Rpb24odCl7cigidGhyb3ciLHQscyxvKX0pKTplLnJlc29sdmUodSkudGhlbigoZnVuY3Rpb24odCl7bC52YWx1ZT10LHMobCl9KSwoZnVuY3Rpb24odCl7cmV0dXJuIHIoInRocm93Iix0LHMsbyl9KSl9byhoLmFyZyl9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gYSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBpPWk/aS50aGVuKGEsYSk6YSgpfX1mdW5jdGlvbiBBKHQscil7dmFyIG49dC5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PWUpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxBKHQsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gcDtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gcH12YXIgaT1jKG4sdC5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwscDt2YXIgYT1pLmFyZztyZXR1cm4gYT9hLmRvbmU/KHJbdC5yZXN1bHROYW1lXT1hLnZhbHVlLHIubmV4dD10Lm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSxyLmRlbGVnYXRlPW51bGwscCk6YTooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCxwKX1mdW5jdGlvbiBFKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIFModCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIEIodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChFLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIFIodCl7aWYodCl7dmFyIHI9dFthXTtpZihyKXJldHVybiByLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxzPWZ1bmN0aW9uIHIoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYobi5jYWxsKHQsaSkpcmV0dXJuIHIudmFsdWU9dFtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT1lLHIuZG9uZT0hMCxyfTtyZXR1cm4gcy5uZXh0PXN9fXJldHVybntuZXh0OkR9fWZ1bmN0aW9uIEQoKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEwfX1yZXR1cm4geS5wcm90b3R5cGU9dixoKHgsImNvbnN0cnVjdG9yIix2KSxoKHYsImNvbnN0cnVjdG9yIix5KSx5LmRpc3BsYXlOYW1lPWgodixvLCJHZW5lcmF0b3JGdW5jdGlvbiIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09eXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShlLmRpc3BsYXlOYW1lfHxlLm5hbWUpKX0sdC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsdik6KHQuX19wcm90b19fPXYsaCh0LG8sIkdlbmVyYXRvckZ1bmN0aW9uIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeCksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sayh6LnByb3RvdHlwZSksaCh6LnByb3RvdHlwZSxzLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuQXN5bmNJdGVyYXRvcj16LHQuYXN5bmM9ZnVuY3Rpb24oZSxyLG4saSxhKXt2b2lkIDA9PT1hJiYoYT1Qcm9taXNlKTt2YXIgcz1uZXcgeihsKGUscixuLGkpLGEpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/czpzLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6cy5uZXh0KCl9KSl9LGsoeCksaCh4LG8sIkdlbmVyYXRvciIpLGgoeCxhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLGgoeCwidG9TdHJpbmciLChmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSkpLHQua2V5cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCllLnB1c2gocik7cmV0dXJuIGUucmV2ZXJzZSgpLGZ1bmN0aW9uIHIoKXtmb3IoO2UubGVuZ3RoOyl7dmFyIG49ZS5wb3AoKTtpZihuIGluIHQpcmV0dXJuIHIudmFsdWU9bixyLmRvbmU9ITEscn1yZXR1cm4gci5kb25lPSEwLHJ9fSx0LnZhbHVlcz1SLEIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpCLHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PWUsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChTKSwhdClmb3IodmFyIHIgaW4gdGhpcykidCI9PT1yLmNoYXJBdCgwKSYmbi5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7aWYodGhpcy5kb25lKXRocm93IHQ7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIG8udHlwZT0idGhyb3ciLG8uYXJnPXQsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz1lKSwhIWl9Zm9yKHZhciBhPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTthPj0wOy0tYSl7dmFyIHM9dGhpcy50cnlFbnRyaWVzW2FdLG89cy5jb21wbGV0aW9uO2lmKCJyb290Ij09PXMudHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihzLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgaD1uLmNhbGwocywiY2F0Y2hMb2MiKSxsPW4uY2FsbChzLCJmaW5hbGx5TG9jIik7aWYoaCYmbCl7aWYodGhpcy5wcmV2PHMuY2F0Y2hMb2MpcmV0dXJuIGkocy5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PHMuZmluYWxseUxvYylyZXR1cm4gaShzLmZpbmFsbHlMb2MpfWVsc2UgaWYoaCl7aWYodGhpcy5wcmV2PHMuY2F0Y2hMb2MpcmV0dXJuIGkocy5jYXRjaExvYywhMCl9ZWxzZXtpZighbCl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PHMuZmluYWxseUxvYylyZXR1cm4gaShzLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmbi5jYWxsKGksImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PGkuZmluYWxseUxvYyl7dmFyIGE9aTticmVha319YSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmEudHJ5TG9jPD1lJiZlPD1hLmZpbmFsbHlMb2MmJihhPW51bGwpO3ZhciBzPWE/YS5jb21wbGV0aW9uOnt9O3JldHVybiBzLnR5cGU9dCxzLmFyZz1lLGE/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9YS5maW5hbGx5TG9jLHApOnRoaXMuY29tcGxldGUocyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSkscH0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxTKHIpLHB9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7UyhyKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOlIodCkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1lKSxwfX0sdH0odC5leHBvcnRzKTt0cnl7Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZX1jYXRjaCh0KXsib2JqZWN0Ij09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9ZTpGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShlKX19KHtleHBvcnRzOnt9fSk7dmFyIGU9e2V4cG9ydHM6e319OyhmdW5jdGlvbih0KXtjb25zdCBlPTQscj0wLG49MSxpPTI7ZnVuY3Rpb24gYSh0KXtsZXQgZT10Lmxlbmd0aDtmb3IoOy0tZT49MDspdFtlXT0wfWNvbnN0IHM9MCxvPTEsaD0yLGw9MyxjPTI1OCx1PTI5LGQ9MjU2LF89ZCsxK3UsZj0zMCxwPTE5LGc9MipfKzEseT0xNSx2PTE2LHc9NyxtPTI1NixiPTE2LHg9MTcsaz0xOCx6PW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKSxBPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSksRT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pLFM9bmV3IFVpbnQ4QXJyYXkoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxCPTUxMixSPW5ldyBBcnJheSgyKihfKzIpKTthKFIpO2NvbnN0IEQ9bmV3IEFycmF5KDIqZik7YShEKTtjb25zdCBMPW5ldyBBcnJheShCKTthKEwpO2NvbnN0IFU9bmV3IEFycmF5KGMtbCsxKTthKFUpO2NvbnN0IEM9bmV3IEFycmF5KHUpO2EoQyk7Y29uc3QgTz1uZXcgQXJyYXkoZik7ZnVuY3Rpb24gRih0LGUscixuLGkpe3RoaXMuc3RhdGljX3RyZWU9dCx0aGlzLmV4dHJhX2JpdHM9ZSx0aGlzLmV4dHJhX2Jhc2U9cix0aGlzLmVsZW1zPW4sdGhpcy5tYXhfbGVuZ3RoPWksdGhpcy5oYXNfc3RyZWU9dCYmdC5sZW5ndGh9bGV0IFQsSCxaO2Z1bmN0aW9uIE0odCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9YShPKTtjb25zdCBOPXQ9PnQ8MjU2P0xbdF06TFsyNTYrKHQ+Pj43KV0sST0odCxlKT0+e3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0sUD0odCxlLHIpPT57dC5iaV92YWxpZD52LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LEkodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+di10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdik6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSwkPSh0LGUscik9PntQKHQsclsyKmVdLHJbMiplKzFdKX0saj0odCxlKT0+e2xldCByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxLPXQ9PnsxNj09PXQuYmlfdmFsaWQ/KEkodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSxYPSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5tYXhfY29kZSxpPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLGE9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLHM9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxvPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsaD1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoO2xldCBsLGMsdSxkLF8sZixwPTA7Zm9yKGQ9MDtkPD15O2QrKyl0LmJsX2NvdW50W2RdPTA7Zm9yKHJbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxsPXQuaGVhcF9tYXgrMTtsPGc7bCsrKWM9dC5oZWFwW2xdLGQ9clsyKnJbMipjKzFdKzFdKzEsZD5oJiYoZD1oLHArKyksclsyKmMrMV09ZCxjPm58fCh0LmJsX2NvdW50W2RdKyssXz0wLGM+PW8mJihfPXNbYy1vXSksZj1yWzIqY10sdC5vcHRfbGVuKz1mKihkK18pLGEmJih0LnN0YXRpY19sZW4rPWYqKGlbMipjKzFdK18pKSk7aWYoMCE9PXApe2Rve2ZvcihkPWgtMTswPT09dC5ibF9jb3VudFtkXTspZC0tO3QuYmxfY291bnRbZF0tLSx0LmJsX2NvdW50W2QrMV0rPTIsdC5ibF9jb3VudFtoXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoZD1oOzAhPT1kO2QtLSlmb3IoYz10LmJsX2NvdW50W2RdOzAhPT1jOyl1PXQuaGVhcFstLWxdLHU+bnx8KHJbMip1KzFdIT09ZCYmKHQub3B0X2xlbis9KGQtclsyKnUrMV0pKnJbMip1XSxyWzIqdSsxXT1kKSxjLS0pfX0scT0odCxlLHIpPT57Y29uc3Qgbj1uZXcgQXJyYXkoeSsxKTtsZXQgaSxhLHM9MDtmb3IoaT0xO2k8PXk7aSsrKW5baV09cz1zK3JbaS0xXTw8MTtmb3IoYT0wO2E8PWU7YSsrKXtsZXQgZT10WzIqYSsxXTswIT09ZSYmKHRbMiphXT1qKG5bZV0rKyxlKSl9fSxHPSgpPT57bGV0IHQsZSxyLG4saTtjb25zdCBhPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248dS0xO24rKylmb3IoQ1tuXT1yLHQ9MDt0PDE8PHpbbl07dCsrKVVbcisrXT1uO2ZvcihVW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihPW25dPWksdD0wO3Q8MTw8QVtuXTt0KyspTFtpKytdPW47Zm9yKGk+Pj03O248ZjtuKyspZm9yKE9bbl09aTw8Nyx0PTA7dDwxPDxBW25dLTc7dCsrKUxbMjU2K2krK109bjtmb3IoZT0wO2U8PXk7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspUlsyKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylSWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KVJbMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspUlsyKnQrMV09OCx0KyssYVs4XSsrO2ZvcihxKFIsXysxLGEpLHQ9MDt0PGY7dCsrKURbMip0KzFdPTUsRFsyKnRdPWoodCw1KTtUPW5ldyBGKFIseixkKzEsXyx5KSxIPW5ldyBGKEQsQSwwLGYseSksWj1uZXcgRihuZXcgQXJyYXkoMCksRSwwLHAsdyl9LFc9dD0+e2xldCBlO2ZvcihlPTA7ZTxfO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPGY7ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKm1dPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9LFk9dD0+e3QuYmlfdmFsaWQ+OD9JKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sVj0odCxlLHIsbik9PntZKHQpLG4mJihJKHQsciksSSh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxRPSh0LGUscixuKT0+e2NvbnN0IGk9MiplLGE9MipyO3JldHVybiB0W2ldPHRbYV18fHRbaV09PT10W2FdJiZuW2VdPD1uW3JdfSxKPSh0LGUscik9Pntjb25zdCBuPXQuaGVhcFtyXTtsZXQgaT1yPDwxO2Zvcig7aTw9dC5oZWFwX2xlbiYmKGk8dC5oZWFwX2xlbiYmUShlLHQuaGVhcFtpKzFdLHQuaGVhcFtpXSx0LmRlcHRoKSYmaSsrLCFRKGUsbix0LmhlYXBbaV0sdC5kZXB0aCkpOyl0LmhlYXBbcl09dC5oZWFwW2ldLHI9aSxpPDw9MTt0LmhlYXBbcl09bn0sdHQ9KHQsZSxyKT0+e2xldCBuLGksYSxzLG89MDtpZigwIT09dC5sYXN0X2xpdClkb3tuPXQucGVuZGluZ19idWZbdC5kX2J1ZisyKm9dPDw4fHQucGVuZGluZ19idWZbdC5kX2J1ZisyKm8rMV0saT10LnBlbmRpbmdfYnVmW3QubF9idWYrb10sbysrLDA9PT1uPyQodCxpLGUpOihhPVVbaV0sJCh0LGErZCsxLGUpLHM9elthXSwwIT09cyYmKGktPUNbYV0sUCh0LGkscykpLG4tLSxhPU4obiksJCh0LGEscikscz1BW2FdLDAhPT1zJiYobi09T1thXSxQKHQsbixzKSkpfXdoaWxlKG88dC5sYXN0X2xpdCk7JCh0LG0sZSl9LGV0PSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYT1lLnN0YXRfZGVzYy5lbGVtcztsZXQgcyxvLGgsbD0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9ZyxzPTA7czxhO3MrKykwIT09clsyKnNdPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1sPXMsdC5kZXB0aFtzXT0wKTpyWzIqcysxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOyloPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWw8Mj8rK2w6MCxyWzIqaF09MSx0LmRlcHRoW2hdPTAsdC5vcHRfbGVuLS0saSYmKHQuc3RhdGljX2xlbi09blsyKmgrMV0pO2ZvcihlLm1heF9jb2RlPWwscz10LmhlYXBfbGVuPj4xO3M+PTE7cy0tKUoodCxyLHMpO2g9YTtkb3tzPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sSih0LHIsMSksbz10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09cyx0LmhlYXBbLS10LmhlYXBfbWF4XT1vLHJbMipoXT1yWzIqc10rclsyKm9dLHQuZGVwdGhbaF09KHQuZGVwdGhbc10+PXQuZGVwdGhbb10/dC5kZXB0aFtzXTp0LmRlcHRoW29dKSsxLHJbMipzKzFdPXJbMipvKzFdPWgsdC5oZWFwWzFdPWgrKyxKKHQsciwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWCh0LGUpLHEocixsLHQuYmxfY291bnQpfSxydD0odCxlLHIpPT57bGV0IG4saSxhPS0xLHM9ZVsxXSxvPTAsaD03LGw9NDtmb3IoMD09PXMmJihoPTEzOCxsPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1zLHM9ZVsyKihuKzEpKzFdLCsrbzxoJiZpPT09c3x8KG88bD90LmJsX3RyZWVbMippXSs9bzowIT09aT8oaSE9PWEmJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzIqYl0rKyk6bzw9MTA/dC5ibF90cmVlWzIqeF0rKzp0LmJsX3RyZWVbMiprXSsrLG89MCxhPWksMD09PXM/KGg9MTM4LGw9Myk6aT09PXM/KGg9NixsPTMpOihoPTcsbD00KSl9LG50PSh0LGUscik9PntsZXQgbixpLGE9LTEscz1lWzFdLG89MCxoPTcsbD00O2ZvcigwPT09cyYmKGg9MTM4LGw9Myksbj0wO248PXI7bisrKWlmKGk9cyxzPWVbMioobisxKSsxXSwhKCsrbzxoJiZpPT09cykpe2lmKG88bClkb3skKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tbyk7ZWxzZSAwIT09aT8oaSE9PWEmJigkKHQsaSx0LmJsX3RyZWUpLG8tLSksJCh0LGIsdC5ibF90cmVlKSxQKHQsby0zLDIpKTpvPD0xMD8oJCh0LHgsdC5ibF90cmVlKSxQKHQsby0zLDMpKTooJCh0LGssdC5ibF90cmVlKSxQKHQsby0xMSw3KSk7bz0wLGE9aSwwPT09cz8oaD0xMzgsbD0zKTppPT09cz8oaD02LGw9Myk6KGg9NyxsPTQpfX0saXQ9dD0+e2xldCBlO2ZvcihydCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxydCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxldCh0LHQuYmxfZGVzYyksZT1wLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKlNbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LGF0PSh0LGUscixuKT0+e2xldCBpO2ZvcihQKHQsZS0yNTcsNSksUCh0LHItMSw1KSxQKHQsbi00LDQpLGk9MDtpPG47aSsrKVAodCx0LmJsX3RyZWVbMipTW2ldKzFdLDMpO250KHQsdC5keW5fbHRyZWUsZS0xKSxudCh0LHQuZHluX2R0cmVlLHItMSl9LHN0PXQ9PntsZXQgZSxpPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKyssaT4+Pj0xKWlmKDEmaSYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIHI7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gbjtmb3IoZT0zMjtlPGQ7ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBuO3JldHVybiByfTtsZXQgb3Q9ITE7Y29uc3QgaHQ9KHQsZSxyLG4pPT57UCh0LChzPDwxKSsobj8xOjApLDMpLFYodCxlLHIsITApfSxsdD0odCxyLG4sYSk9PntsZXQgcyxsLGM9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1pJiYodC5zdHJtLmRhdGFfdHlwZT1zdCh0KSksZXQodCx0LmxfZGVzYyksZXQodCx0LmRfZGVzYyksYz1pdCh0KSxzPXQub3B0X2xlbiszKzc+Pj4zLGw9dC5zdGF0aWNfbGVuKzMrNz4+PjMsbDw9cyYmKHM9bCkpOnM9bD1uKzUsbis0PD1zJiYtMSE9PXI/aHQodCxyLG4sYSk6dC5zdHJhdGVneT09PWV8fGw9PT1zPyhQKHQsKG88PDEpKyhhPzE6MCksMyksdHQodCxSLEQpKTooUCh0LChoPDwxKSsoYT8xOjApLDMpLGF0KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGMrMSksdHQodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFcodCksYSYmWSh0KX07dmFyIGN0PXtfdHJfaW5pdDp0PT57b3R8fChHKCksb3Q9ITApLHQubF9kZXNjPW5ldyBNKHQuZHluX2x0cmVlLFQpLHQuZF9kZXNjPW5ldyBNKHQuZHluX2R0cmVlLEgpLHQuYmxfZGVzYz1uZXcgTSh0LmJsX3RyZWUsWiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsVyh0KX0sX3RyX3N0b3JlZF9ibG9jazpodCxfdHJfZmx1c2hfYmxvY2s6bHQsX3RyX3RhbGx5Oih0LGUscik9Pih0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKFVbcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTEpLF90cl9hbGlnbjp0PT57UCh0LG88PDEsMyksJCh0LG0sUiksSyh0KX19LHV0PSh0LGUscixuKT0+e2xldCBpPTY1NTM1JnR8MCxhPXQ+Pj4xNiY2NTUzNXwwLHM9MDtmb3IoOzAhPT1yOyl7cz1yPjJlMz8yZTM6cixyLT1zO2Rve2k9aStlW24rK118MCxhPWEraXwwfXdoaWxlKC0tcyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH07Y29uc3QgZHQ9bmV3IFVpbnQzMkFycmF5KCgoKT0+e2xldCB0LGU9W107Zm9yKHZhciByPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0pKCkpO3ZhciBfdD0odCxlLHIsbik9Pntjb25zdCBpPWR0LGE9bityO3RePS0xO2ZvcihsZXQgcj1uO3I8YTtyKyspdD10Pj4+OF5pWzI1NSYodF5lW3JdKV07cmV0dXJuLTFedH0sZnQ9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxwdD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fTtjb25zdHtfdHJfaW5pdDpndCxfdHJfc3RvcmVkX2Jsb2NrOnl0LF90cl9mbHVzaF9ibG9jazp2dCxfdHJfdGFsbHk6d3QsX3RyX2FsaWduOm10fT1jdCx7Wl9OT19GTFVTSDpidCxaX1BBUlRJQUxfRkxVU0g6eHQsWl9GVUxMX0ZMVVNIOmt0LFpfRklOSVNIOnp0LFpfQkxPQ0s6QXQsWl9PSzpFdCxaX1NUUkVBTV9FTkQ6U3QsWl9TVFJFQU1fRVJST1I6QnQsWl9EQVRBX0VSUk9SOlJ0LFpfQlVGX0VSUk9SOkR0LFpfREVGQVVMVF9DT01QUkVTU0lPTjpMdCxaX0ZJTFRFUkVEOlV0LFpfSFVGRk1BTl9PTkxZOkN0LFpfUkxFOk90LFpfRklYRUQ6RnQsWl9ERUZBVUxUX1NUUkFURUdZOlR0LFpfVU5LTk9XTjpIdCxaX0RFRkxBVEVEOlp0fT1wdCxNdD05LE50PTE1LEl0PTgsUHQ9Mjg2LCR0PTMwLGp0PTE5LEt0PTIqUHQrMSxYdD0xNSxxdD0zLEd0PTI1OCxXdD1HdCtxdCsxLFl0PTMyLFZ0PTQyLFF0PTY5LEp0PTczLHRlPTkxLGVlPTEwMyxyZT0xMTMsbmU9NjY2LGllPTEsYWU9MixzZT0zLG9lPTQsaGU9MyxsZT0odCxlKT0+KHQubXNnPWZ0W2VdLGUpLGNlPXQ9Pih0PDwxKS0odD40Pzk6MCksdWU9dD0+e2xldCBlPXQubGVuZ3RoO2Zvcig7LS1lPj0wOyl0W2VdPTB9O2xldCBkZT0odCxlLHIpPT4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrO2NvbnN0IF9lPXQ9Pntjb25zdCBlPXQuc3RhdGU7bGV0IHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0sZmU9KHQsZSk9Pnt2dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LF9lKHQuc3RybSl9LHBlPSh0LGUpPT57dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0sZ2U9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHllPSh0LGUscixuKT0+e2xldCBpPXQuYXZhaWxfaW47cmV0dXJuIGk+biYmKGk9biksMD09PWk/MDoodC5hdmFpbF9pbi09aSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4raSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPXV0KHQuYWRsZXIsZSxpLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPV90KHQuYWRsZXIsZSxpLHIpKSx0Lm5leHRfaW4rPWksdC50b3RhbF9pbis9aSxpKX0sdmU9KHQsZSk9PntsZXQgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxzPXQucHJldl9sZW5ndGgsbz10Lm5pY2VfbWF0Y2g7Y29uc3QgaD10LnN0cnN0YXJ0PnQud19zaXplLVd0P3Quc3Ryc3RhcnQtKHQud19zaXplLVd0KTowLGw9dC53aW5kb3csYz10LndfbWFzayx1PXQucHJldixkPXQuc3Ryc3RhcnQrR3Q7bGV0IF89bFthK3MtMV0sZj1sW2Erc107dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLG8+dC5sb29rYWhlYWQmJihvPXQubG9va2FoZWFkKTtkb3tpZihyPWUsbFtyK3NdPT09ZiYmbFtyK3MtMV09PT1fJiZsW3JdPT09bFthXSYmbFsrK3JdPT09bFthKzFdKXthKz0yLHIrKztkb3t9d2hpbGUobFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmxbKythXT09PWxbKytyXSYmbFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmxbKythXT09PWxbKytyXSYmbFsrK2FdPT09bFsrK3JdJiZsWysrYV09PT1sWysrcl0mJmE8ZCk7aWYobj1HdC0oZC1hKSxhPWQtR3Qsbj5zKXtpZih0Lm1hdGNoX3N0YXJ0PWUscz1uLG4+PW8pYnJlYWs7Xz1sW2Ercy0xXSxmPWxbYStzXX19fXdoaWxlKChlPXVbZSZjXSk+aCYmMCE9LS1pKTtyZXR1cm4gczw9dC5sb29rYWhlYWQ/czp0Lmxvb2thaGVhZH0sd2U9dD0+e2NvbnN0IGU9dC53X3NpemU7bGV0IHIsbixpLGEscztkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1lKyhlLVd0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStlKSwwKSx0Lm1hdGNoX3N0YXJ0LT1lLHQuc3Ryc3RhcnQtPWUsdC5ibG9ja19zdGFydC09ZSxuPXQuaGFzaF9zaXplLHI9bjtkb3tpPXQuaGVhZFstLXJdLHQuaGVhZFtyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7bj1lLHI9bjtkb3tpPXQucHJldlstLXJdLHQucHJldltyXT1pPj1lP2ktZTowfXdoaWxlKC0tbik7YSs9ZX1pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKG49eWUodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPW4sdC5sb29rYWhlYWQrdC5pbnNlcnQ+PXF0KWZvcihzPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tzXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tzKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3MrcXQtMV0pLHQucHJldltzJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXMscysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxxdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFd0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sbWU9KHQsZSk9PntsZXQgcixuO2Zvcig7Oyl7aWYodC5sb29rYWhlYWQ8V3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPFd0JiZlPT09YnQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PXF0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSwwIT09ciYmdC5zdHJzdGFydC1yPD10Lndfc2l6ZS1XdCYmKHQubWF0Y2hfbGVuZ3RoPXZlKHQscikpLHQubWF0Y2hfbGVuZ3RoPj1xdClpZihuPXd0KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLXF0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg8PXQubWF4X2xhenlfbWF0Y2gmJnQubG9va2FoZWFkPj1xdCl7dC5tYXRjaF9sZW5ndGgtLTtkb3t0LnN0cnN0YXJ0KyssdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCtxdC0xXSkscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0fXdoaWxlKDAhPS0tdC5tYXRjaF9sZW5ndGgpO3Quc3Ryc3RhcnQrK31lbHNlIHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTAsdC5pbnNfaD10LndpbmRvd1t0LnN0cnN0YXJ0XSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0KzFdKTtlbHNlIG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKztpZihuJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxiZT0odCxlKT0+e2xldCByLG4saTtmb3IoOzspe2lmKHQubG9va2FoZWFkPFd0KXtpZih3ZSh0KSx0Lmxvb2thaGVhZDxXdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1xdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1xdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtV3QmJih0Lm1hdGNoX2xlbmd0aD12ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PVV0fHx0Lm1hdGNoX2xlbmd0aD09PXF0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1xdC0xKSksdC5wcmV2X2xlbmd0aD49cXQmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXtpPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtcXQsbj13dCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1xdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrcXQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPXF0LTEsdC5zdHJzdGFydCsrLG4mJihmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLG4mJmZlKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxxdC0xP3Quc3Ryc3RhcnQ6cXQtMSxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSx4ZT0odCxlKT0+e2xldCByLG4saSxhO2NvbnN0IHM9dC53aW5kb3c7Zm9yKDs7KXtpZih0Lmxvb2thaGVhZDw9R3Qpe2lmKHdlKHQpLHQubG9va2FoZWFkPD1HdCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCx0Lmxvb2thaGVhZD49cXQmJnQuc3Ryc3RhcnQ+MCYmKGk9dC5zdHJzdGFydC0xLG49c1tpXSxuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldKSl7YT10LnN0cnN0YXJ0K0d0O2Rve313aGlsZShuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldJiZpPGEpO3QubWF0Y2hfbGVuZ3RoPUd0LShhLWkpLHQubWF0Y2hfbGVuZ3RoPnQubG9va2FoZWFkJiYodC5tYXRjaF9sZW5ndGg9dC5sb29rYWhlYWQpfWlmKHQubWF0Y2hfbGVuZ3RoPj1xdD8ocj13dCh0LDEsdC5tYXRjaF9sZW5ndGgtcXQpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wKToocj13dCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrKSxyJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfSxrZT0odCxlKT0+e2xldCByO2Zvcig7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYod2UodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PWJ0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09enQ/KGZlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOm9lKTp0Lmxhc3RfbGl0JiYoZmUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOmFlfTtmdW5jdGlvbiB6ZSh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9Y29uc3QgQWU9W25ldyB6ZSgwLDAsMCwwLCgodCxlKT0+e2xldCByPTY1NTM1O2ZvcihyPnQucGVuZGluZ19idWZfc2l6ZS01JiYocj10LnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYodC5sb29rYWhlYWQ8PTEpe2lmKHdlKHQpLDA9PT10Lmxvb2thaGVhZCYmZT09PWJ0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9dC5zdHJzdGFydCs9dC5sb29rYWhlYWQsdC5sb29rYWhlYWQ9MDtjb25zdCBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllO2lmKHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydD49dC53X3NpemUtV3QmJihmZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT16dD8oZmUodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/c2U6b2UpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihmZSh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxpZSl9KSksbmV3IHplKDQsNCw4LDQsbWUpLG5ldyB6ZSg0LDUsMTYsOCxtZSksbmV3IHplKDQsNiwzMiwzMixtZSksbmV3IHplKDQsNCwxNiwxNixiZSksbmV3IHplKDgsMTYsMzIsMzIsYmUpLG5ldyB6ZSg4LDE2LDEyOCwxMjgsYmUpLG5ldyB6ZSg4LDMyLDEyOCwyNTYsYmUpLG5ldyB6ZSgzMiwxMjgsMjU4LDEwMjQsYmUpLG5ldyB6ZSgzMiwyNTgsMjU4LDQwOTYsYmUpXSxFZT10PT57dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLHVlKHQuaGVhZCksdC5tYXhfbGF6eV9tYXRjaD1BZVt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9QWVbdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPUFlW3QubGV2ZWxdLm5pY2VfbGVuZ3RoLHQubWF4X2NoYWluX2xlbmd0aD1BZVt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1xdC0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfTtmdW5jdGlvbiBTZSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPVp0LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBVaW50MTZBcnJheSgyKkt0KSx0aGlzLmR5bl9kdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMiokdCsxKSksdGhpcy5ibF90cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKmp0KzEpKSx1ZSh0aGlzLmR5bl9sdHJlZSksdWUodGhpcy5keW5fZHRyZWUpLHVlKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFVpbnQxNkFycmF5KFh0KzEpLHRoaXMuaGVhcD1uZXcgVWludDE2QXJyYXkoMipQdCsxKSx1ZSh0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgVWludDE2QXJyYXkoMipQdCsxKSx1ZSh0aGlzLmRlcHRoKSx0aGlzLmxfYnVmPTAsdGhpcy5saXRfYnVmc2l6ZT0wLHRoaXMubGFzdF9saXQ9MCx0aGlzLmRfYnVmPTAsdGhpcy5vcHRfbGVuPTAsdGhpcy5zdGF0aWNfbGVuPTAsdGhpcy5tYXRjaGVzPTAsdGhpcy5pbnNlcnQ9MCx0aGlzLmJpX2J1Zj0wLHRoaXMuYmlfdmFsaWQ9MH1jb25zdCBCZT10PT57aWYoIXR8fCF0LnN0YXRlKXJldHVybiBsZSh0LEJ0KTt0LnRvdGFsX2luPXQudG90YWxfb3V0PTAsdC5kYXRhX3R5cGU9SHQ7Y29uc3QgZT10LnN0YXRlO3JldHVybiBlLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP1Z0OnJlLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPWJ0LGd0KGUpLEV0fSxSZT10PT57Y29uc3QgZT1CZSh0KTtyZXR1cm4gZT09PUV0JiZFZSh0LnN0YXRlKSxlfSxEZT0odCxlLHIsbixpLGEpPT57aWYoIXQpcmV0dXJuIEJ0O2xldCBzPTE7aWYoZT09PUx0JiYoZT02KSxuPDA/KHM9MCxuPS1uKTpuPjE1JiYocz0yLG4tPTE2KSxpPDF8fGk+TXR8fHIhPT1adHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8YTwwfHxhPkZ0KXJldHVybiBsZSh0LEJ0KTs4PT09biYmKG49OSk7Y29uc3Qgbz1uZXcgU2U7cmV0dXJuIHQuc3RhdGU9byxvLnN0cm09dCxvLndyYXA9cyxvLmd6aGVhZD1udWxsLG8ud19iaXRzPW4sby53X3NpemU9MTw8by53X2JpdHMsby53X21hc2s9by53X3NpemUtMSxvLmhhc2hfYml0cz1pKzcsby5oYXNoX3NpemU9MTw8by5oYXNoX2JpdHMsby5oYXNoX21hc2s9by5oYXNoX3NpemUtMSxvLmhhc2hfc2hpZnQ9fn4oKG8uaGFzaF9iaXRzK3F0LTEpL3F0KSxvLndpbmRvdz1uZXcgVWludDhBcnJheSgyKm8ud19zaXplKSxvLmhlYWQ9bmV3IFVpbnQxNkFycmF5KG8uaGFzaF9zaXplKSxvLnByZXY9bmV3IFVpbnQxNkFycmF5KG8ud19zaXplKSxvLmxpdF9idWZzaXplPTE8PGkrNixvLnBlbmRpbmdfYnVmX3NpemU9NCpvLmxpdF9idWZzaXplLG8ucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkoby5wZW5kaW5nX2J1Zl9zaXplKSxvLmRfYnVmPTEqby5saXRfYnVmc2l6ZSxvLmxfYnVmPTMqby5saXRfYnVmc2l6ZSxvLmxldmVsPWUsby5zdHJhdGVneT1hLG8ubWV0aG9kPXIsUmUodCl9O3ZhciBMZT17ZGVmbGF0ZUluaXQ6KHQsZSk9PkRlKHQsZSxadCxOdCxJdCxUdCksZGVmbGF0ZUluaXQyOkRlLGRlZmxhdGVSZXNldDpSZSxkZWZsYXRlUmVzZXRLZWVwOkJlLGRlZmxhdGVTZXRIZWFkZXI6KHQsZSk9PnQmJnQuc3RhdGU/MiE9PXQuc3RhdGUud3JhcD9CdDoodC5zdGF0ZS5nemhlYWQ9ZSxFdCk6QnQsZGVmbGF0ZToodCxlKT0+e2xldCByLG47aWYoIXR8fCF0LnN0YXRlfHxlPkF0fHxlPDApcmV0dXJuIHQ/bGUodCxCdCk6QnQ7Y29uc3QgaT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxpLnN0YXR1cz09PW5lJiZlIT09enQpcmV0dXJuIGxlKHQsMD09PXQuYXZhaWxfb3V0P0R0OkJ0KTtpLnN0cm09dDtjb25zdCBhPWkubGFzdF9mbHVzaDtpZihpLmxhc3RfZmx1c2g9ZSxpLnN0YXR1cz09PVZ0KWlmKDI9PT1pLndyYXApdC5hZGxlcj0wLHBlKGksMzEpLHBlKGksMTM5KSxwZShpLDgpLGkuZ3poZWFkPyhwZShpLChpLmd6aGVhZC50ZXh0PzE6MCkrKGkuZ3poZWFkLmhjcmM/MjowKSsoaS5nemhlYWQuZXh0cmE/NDowKSsoaS5nemhlYWQubmFtZT84OjApKyhpLmd6aGVhZC5jb21tZW50PzE2OjApKSxwZShpLDI1NSZpLmd6aGVhZC50aW1lKSxwZShpLGkuZ3poZWFkLnRpbWU+PjgmMjU1KSxwZShpLGkuZ3poZWFkLnRpbWU+PjE2JjI1NSkscGUoaSxpLmd6aGVhZC50aW1lPj4yNCYyNTUpLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSwyNTUmaS5nemhlYWQub3MpLGkuZ3poZWFkLmV4dHJhJiZpLmd6aGVhZC5leHRyYS5sZW5ndGgmJihwZShpLDI1NSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpLHBlKGksaS5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGkuZ3poZWFkLmhjcmMmJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmcsMCkpLGkuZ3ppbmRleD0wLGkuc3RhdHVzPVF0KToocGUoaSwwKSxwZShpLDApLHBlKGksMCkscGUoaSwwKSxwZShpLDApLHBlKGksOT09PWkubGV2ZWw/MjppLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzQ6MCkscGUoaSxoZSksaS5zdGF0dXM9cmUpO2Vsc2V7bGV0IGU9WnQrKGkud19iaXRzLTg8PDQpPDw4LHI9LTE7cj1pLnN0cmF0ZWd5Pj1DdHx8aS5sZXZlbDwyPzA6aS5sZXZlbDw2PzE6Nj09PWkubGV2ZWw/MjozLGV8PXI8PDYsMCE9PWkuc3Ryc3RhcnQmJihlfD1ZdCksZSs9MzEtZSUzMSxpLnN0YXR1cz1yZSxnZShpLGUpLDAhPT1pLnN0cnN0YXJ0JiYoZ2UoaSx0LmFkbGVyPj4+MTYpLGdlKGksNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihpLnN0YXR1cz09PVF0KWlmKGkuZ3poZWFkLmV4dHJhKXtmb3Iocj1pLnBlbmRpbmc7aS5nemluZGV4PCg2NTUzNSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplfHwoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksX2UodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplKSk7KXBlKGksMjU1JmkuZ3poZWFkLmV4dHJhW2kuZ3ppbmRleF0pLGkuZ3ppbmRleCsrO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLGkuZ3ppbmRleD09PWkuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkuZ3ppbmRleD0wLGkuc3RhdHVzPUp0KX1lbHNlIGkuc3RhdHVzPUp0O2lmKGkuc3RhdHVzPT09SnQpaWYoaS5nemhlYWQubmFtZSl7cj1pLnBlbmRpbmc7ZG97aWYoaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplJiYoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksX2UodCkscj1pLnBlbmRpbmcsaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49aS5nemluZGV4PGkuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZpLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoaS5nemluZGV4KyspOjAscGUoaSxuKX13aGlsZSgwIT09bik7aS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctcixyKSksMD09PW4mJihpLmd6aW5kZXg9MCxpLnN0YXR1cz10ZSl9ZWxzZSBpLnN0YXR1cz10ZTtpZihpLnN0YXR1cz09PXRlKWlmKGkuZ3poZWFkLmNvbW1lbnQpe3I9aS5wZW5kaW5nO2Rve2lmKGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSYmKGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLF9lKHQpLHI9aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWkuZ3ppbmRleDxpLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHBlKGksbil9d2hpbGUoMCE9PW4pO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLXIscikpLDA9PT1uJiYoaS5zdGF0dXM9ZWUpfWVsc2UgaS5zdGF0dXM9ZWU7aWYoaS5zdGF0dXM9PT1lZSYmKGkuZ3poZWFkLmhjcmM/KGkucGVuZGluZysyPmkucGVuZGluZ19idWZfc2l6ZSYmX2UodCksaS5wZW5kaW5nKzI8PWkucGVuZGluZ19idWZfc2l6ZSYmKHBlKGksMjU1JnQuYWRsZXIpLHBlKGksdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxpLnN0YXR1cz1yZSkpOmkuc3RhdHVzPXJlKSwwIT09aS5wZW5kaW5nKXtpZihfZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGkubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZjZShlKTw9Y2UoYSkmJmUhPT16dClyZXR1cm4gbGUodCxEdCk7aWYoaS5zdGF0dXM9PT1uZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGxlKHQsRHQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09aS5sb29rYWhlYWR8fGUhPT1idCYmaS5zdGF0dXMhPT1uZSl7bGV0IHI9aS5zdHJhdGVneT09PUN0P2tlKGksZSk6aS5zdHJhdGVneT09PU90P3hlKGksZSk6QWVbaS5sZXZlbF0uZnVuYyhpLGUpO2lmKHIhPT1zZSYmciE9PW9lfHwoaS5zdGF0dXM9bmUpLHI9PT1pZXx8cj09PXNlKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihpLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHI9PT1hZSYmKGU9PT14dD9tdChpKTplIT09QXQmJih5dChpLDAsMCwhMSksZT09PWt0JiYodWUoaS5oZWFkKSwwPT09aS5sb29rYWhlYWQmJihpLnN0cnN0YXJ0PTAsaS5ibG9ja19zdGFydD0wLGkuaW5zZXJ0PTApKSksX2UodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09enQ/RXQ6aS53cmFwPD0wP1N0OigyPT09aS53cmFwPyhwZShpLDI1NSZ0LmFkbGVyKSxwZShpLHQuYWRsZXI+PjgmMjU1KSxwZShpLHQuYWRsZXI+PjE2JjI1NSkscGUoaSx0LmFkbGVyPj4yNCYyNTUpLHBlKGksMjU1JnQudG90YWxfaW4pLHBlKGksdC50b3RhbF9pbj4+OCYyNTUpLHBlKGksdC50b3RhbF9pbj4+MTYmMjU1KSxwZShpLHQudG90YWxfaW4+PjI0JjI1NSkpOihnZShpLHQuYWRsZXI+Pj4xNiksZ2UoaSw2NTUzNSZ0LmFkbGVyKSksX2UodCksaS53cmFwPjAmJihpLndyYXA9LWkud3JhcCksMCE9PWkucGVuZGluZz9FdDpTdCl9LGRlZmxhdGVFbmQ6dD0+e2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gQnQ7Y29uc3QgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVZ0JiZlIT09UXQmJmUhPT1KdCYmZSE9PXRlJiZlIT09ZWUmJmUhPT1yZSYmZSE9PW5lP2xlKHQsQnQpOih0LnN0YXRlPW51bGwsZT09PXJlP2xlKHQsUnQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6KHQsZSk9PntsZXQgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIEJ0O2NvbnN0IG49dC5zdGF0ZSxpPW4ud3JhcDtpZigyPT09aXx8MT09PWkmJm4uc3RhdHVzIT09VnR8fG4ubG9va2FoZWFkKXJldHVybiBCdDtpZigxPT09aSYmKHQuYWRsZXI9dXQodC5hZGxlcixlLHIsMCkpLG4ud3JhcD0wLHI+PW4ud19zaXplKXswPT09aSYmKHVlKG4uaGVhZCksbi5zdHJzdGFydD0wLG4uYmxvY2tfc3RhcnQ9MCxuLmluc2VydD0wKTtsZXQgdD1uZXcgVWludDhBcnJheShuLndfc2l6ZSk7dC5zZXQoZS5zdWJhcnJheShyLW4ud19zaXplLHIpLDApLGU9dCxyPW4ud19zaXplfWNvbnN0IGE9dC5hdmFpbF9pbixzPXQubmV4dF9pbixvPXQuaW5wdXQ7Zm9yKHQuYXZhaWxfaW49cix0Lm5leHRfaW49MCx0LmlucHV0PWUsd2Uobik7bi5sb29rYWhlYWQ+PXF0Oyl7bGV0IHQ9bi5zdHJzdGFydCxlPW4ubG9va2FoZWFkLShxdC0xKTtkb3tuLmluc19oPWRlKG4sbi5pbnNfaCxuLndpbmRvd1t0K3F0LTFdKSxuLnByZXZbdCZuLndfbWFza109bi5oZWFkW24uaW5zX2hdLG4uaGVhZFtuLmluc19oXT10LHQrK313aGlsZSgtLWUpO24uc3Ryc3RhcnQ9dCxuLmxvb2thaGVhZD1xdC0xLHdlKG4pfXJldHVybiBuLnN0cnN0YXJ0Kz1uLmxvb2thaGVhZCxuLmJsb2NrX3N0YXJ0PW4uc3Ryc3RhcnQsbi5pbnNlcnQ9bi5sb29rYWhlYWQsbi5sb29rYWhlYWQ9MCxuLm1hdGNoX2xlbmd0aD1uLnByZXZfbGVuZ3RoPXF0LTEsbi5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49cyx0LmlucHV0PW8sdC5hdmFpbF9pbj1hLG4ud3JhcD1pLEV0fSxkZWZsYXRlSW5mbzoicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O2NvbnN0IFVlPSh0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKTt2YXIgQ2U9ZnVuY3Rpb24odCl7Y29uc3QgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Zm9yKDtlLmxlbmd0aDspe2NvbnN0IHI9ZS5zaGlmdCgpO2lmKHIpe2lmKCJvYmplY3QiIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKHIrIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcihjb25zdCBlIGluIHIpVWUocixlKSYmKHRbZV09cltlXSl9fXJldHVybiB0fSxPZT17YXNzaWduOkNlLGZsYXR0ZW5DaHVua3M6dD0+e2xldCBlPTA7Zm9yKGxldCByPTAsbj10Lmxlbmd0aDtyPG47cisrKWUrPXRbcl0ubGVuZ3RoO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoZSk7Zm9yKGxldCBlPTAsbj0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7bGV0IGk9dFtlXTtyLnNldChpLG4pLG4rPWkubGVuZ3RofXJldHVybiByfX07bGV0IEZlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe0ZlPSExfWNvbnN0IFRlPW5ldyBVaW50OEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwyNTY7dCsrKVRlW3RdPXQ+PTI1Mj82OnQ+PTI0OD81OnQ+PTI0MD80OnQ+PTIyND8zOnQ+PTE5Mj8yOjE7VGVbMjU0XT1UZVsyNTRdPTE7Y29uc3QgSGU9KHQsZSk9PntpZihlPDY1NTM0JiZ0LnN1YmFycmF5JiZGZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQubGVuZ3RoPT09ZT90OnQuc3ViYXJyYXkoMCxlKSk7bGV0IHI9IiI7Zm9yKGxldCBuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfTt2YXIgWmU9e3N0cmluZzJidWY6dD0+e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RW5jb2RlciYmVGV4dEVuY29kZXIucHJvdG90eXBlLmVuY29kZSlyZXR1cm4obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7bGV0IGUscixuLGksYSxzPXQubGVuZ3RoLG89MDtmb3IoaT0wO2k8cztpKyspcj10LmNoYXJDb2RlQXQoaSksNTUyOTY9PSg2NDUxMiZyKSYmaSsxPHMmJihuPXQuY2hhckNvZGVBdChpKzEpLDU2MzIwPT0oNjQ1MTImbikmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykpLG8rPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFVpbnQ4QXJyYXkobyksYT0wLGk9MDthPG87aSsrKXI9dC5jaGFyQ29kZUF0KGkpLDU1Mjk2PT0oNjQ1MTImcikmJmkrMTxzJiYobj10LmNoYXJDb2RlQXQoaSsxKSw1NjMyMD09KDY0NTEyJm4pJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspKSxyPDEyOD9lW2ErK109cjpyPDIwNDg/KGVbYSsrXT0xOTJ8cj4+PjYsZVthKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2ErK109MjI0fHI+Pj4xMixlW2ErK109MTI4fHI+Pj42JjYzLGVbYSsrXT0xMjh8NjMmcik6KGVbYSsrXT0yNDB8cj4+PjE4LGVbYSsrXT0xMjh8cj4+PjEyJjYzLGVbYSsrXT0xMjh8cj4+PjYmNjMsZVthKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzoodCxlKT0+e2NvbnN0IHI9ZXx8dC5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0LnN1YmFycmF5KDAsZSkpO2xldCBuLGk7Y29uc3QgYT1uZXcgQXJyYXkoMipyKTtmb3IoaT0wLG49MDtuPHI7KXtsZXQgZT10W24rK107aWYoZTwxMjgpe2FbaSsrXT1lO2NvbnRpbnVlfWxldCBzPVRlW2VdO2lmKHM+NClhW2krK109NjU1MzMsbis9cy0xO2Vsc2V7Zm9yKGUmPTI9PT1zPzMxOjM9PT1zPzE1Ojc7cz4xJiZuPHI7KWU9ZTw8Nnw2MyZ0W24rK10scy0tO3M+MT9hW2krK109NjU1MzM6ZTw2NTUzNj9hW2krK109ZTooZS09NjU1MzYsYVtpKytdPTU1Mjk2fGU+PjEwJjEwMjMsYVtpKytdPTU2MzIwfDEwMjMmZSl9fXJldHVybiBIZShhLGkpfSx1dGY4Ym9yZGVyOih0LGUpPT57KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7bGV0IHI9ZS0xO2Zvcig7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK1RlW3Rbcl1dPmU/cjplfX07ZnVuY3Rpb24gTWUoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfXZhciBOZT1NZTtjb25zdCBJZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHtaX05PX0ZMVVNIOlBlLFpfU1lOQ19GTFVTSDokZSxaX0ZVTExfRkxVU0g6amUsWl9GSU5JU0g6S2UsWl9PSzpYZSxaX1NUUkVBTV9FTkQ6cWUsWl9ERUZBVUxUX0NPTVBSRVNTSU9OOkdlLFpfREVGQVVMVF9TVFJBVEVHWTpXZSxaX0RFRkxBVEVEOlllfT1wdDtmdW5jdGlvbiBWZSh0KXt0aGlzLm9wdGlvbnM9T2UuYXNzaWduKHtsZXZlbDpHZSxtZXRob2Q6WWUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpXZX0sdHx8e30pO2xldCBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO2xldCByPUxlLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09WGUpdGhyb3cgbmV3IEVycm9yKGZ0W3JdKTtpZihlLmhlYWRlciYmTGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7bGV0IHQ7aWYodD0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9aZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSxyPUxlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0KSxyIT09WGUpdGhyb3cgbmV3IEVycm9yKGZ0W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gUWUodCxlKXtjb25zdCByPW5ldyBWZShlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fGZ0W3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9ZnVuY3Rpb24gSmUodCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLFFlKHQsZSl9ZnVuY3Rpb24gdHIodCxlKXtyZXR1cm4oZT1lfHx7fSkuZ3ppcD0hMCxRZSh0LGUpfVZlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgcj10aGlzLnN0cm0sbj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2xldCBpLGE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtmb3IoYT1lPT09fn5lP2U6ITA9PT1lP0tlOlBlLCJzdHJpbmciPT10eXBlb2YgdD9yLmlucHV0PVplLnN0cmluZzJidWYodCk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PUllLmNhbGwodCk/ci5pbnB1dD1uZXcgVWludDhBcnJheSh0KTpyLmlucHV0PXQsci5uZXh0X2luPTAsci5hdmFpbF9pbj1yLmlucHV0Lmxlbmd0aDs7KWlmKDA9PT1yLmF2YWlsX291dCYmKHIub3V0cHV0PW5ldyBVaW50OEFycmF5KG4pLHIubmV4dF9vdXQ9MCxyLmF2YWlsX291dD1uKSwoYT09PSRlfHxhPT09amUpJiZyLmF2YWlsX291dDw9Nil0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2V7aWYoaT1MZS5kZWZsYXRlKHIsYSksaT09PXFlKXJldHVybiByLm5leHRfb3V0PjAmJnRoaXMub25EYXRhKHIub3V0cHV0LnN1YmFycmF5KDAsci5uZXh0X291dCkpLGk9TGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoaSksdGhpcy5lbmRlZD0hMCxpPT09WGU7aWYoMCE9PXIuYXZhaWxfb3V0KXtpZihhPjAmJnIubmV4dF9vdXQ+MCl0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxyLmF2YWlsX291dD0wO2Vsc2UgaWYoMD09PXIuYXZhaWxfaW4pYnJlYWt9ZWxzZSB0aGlzLm9uRGF0YShyLm91dHB1dCl9cmV0dXJuITB9LFZlLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sVmUucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpe3Q9PT1YZSYmKHRoaXMucmVzdWx0PU9lLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj10LHRoaXMubXNnPXRoaXMuc3RybS5tc2d9O3ZhciBlcj1WZSxycj1RZSxucj1KZSxpcj10cixhcj1wdCxzcj17RGVmbGF0ZTplcixkZWZsYXRlOnJyLGRlZmxhdGVSYXc6bnIsZ3ppcDppcixjb25zdGFudHM6YXJ9O3QuRGVmbGF0ZT1lcix0LmNvbnN0YW50cz1hcix0LmRlZmF1bHQ9c3IsdC5kZWZsYXRlPXJyLHQuZGVmbGF0ZVJhdz1ucix0Lmd6aXA9aXIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSkoZS5leHBvcnRzKTt2YXIgcixuPXtleHBvcnRzOnt9fSxpPXtleHBvcnRzOnt9fTtpLmV4cG9ydHM9KHI9cnx8ZnVuY3Rpb24oZSxyKXt2YXIgbjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKG49d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKG49c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihuPWdsb2JhbFRoaXMuY3J5cHRvKSwhbiYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKG49d2luZG93Lm1zQ3J5cHRvKSwhbiYmdm9pZCAwIT09dCYmdC5jcnlwdG8mJihuPXQuY3J5cHRvKSwhbil0cnl7bj11bmRlZmluZWR9Y2F0Y2godCl7fXZhciBpPWZ1bmN0aW9uKCl7aWYobil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uZ2V0UmFuZG9tVmFsdWVzKXRyeXtyZXR1cm4gbi5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXX1jYXRjaCh0KXt9aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4ucmFuZG9tQnl0ZXMpdHJ5e3JldHVybiBuLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCl9Y2F0Y2godCl7fX10aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKX0sYT1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiB0LnByb3RvdHlwZT1lLHI9bmV3IHQsdC5wcm90b3R5cGU9bnVsbCxyfX0oKSxzPXt9LG89cy5saWI9e30saD1vLkJhc2U9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMpO3JldHVybiB0JiZlLm1peEluKHQpLGUuaGFzT3duUHJvcGVydHkoImluaXQiKSYmdGhpcy5pbml0IT09ZS5pbml0fHwoZS5pbml0PWZ1bmN0aW9uKCl7ZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmluaXQucHJvdG90eXBlPWUsZS4kc3VwZXI9dGhpcyxlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPXQudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LGw9by5Xb3JkQXJyYXk9aC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlKXt0PXRoaXMud29yZHM9dHx8W10sdGhpcy5zaWdCeXRlcz1lIT1yP2U6NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fHUpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud29yZHMscj10LndvcmRzLG49dGhpcy5zaWdCeXRlcyxpPXQuc2lnQnl0ZXM7aWYodGhpcy5jbGFtcCgpLG4lNClmb3IodmFyIGE9MDthPGk7YSsrKXt2YXIgcz1yW2E+Pj4yXT4+PjI0LWElNCo4JjI1NTtlW24rYT4+PjJdfD1zPDwyNC0obithKSU0Kjh9ZWxzZSBmb3IodmFyIG89MDtvPGk7bys9NCllW24rbz4+PjJdPXJbbz4+PjJdO3JldHVybiB0aGlzLnNpZ0J5dGVzKz1pLHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53b3JkcyxyPXRoaXMuc2lnQnl0ZXM7dFtyPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLXIlNCo4LHQubGVuZ3RoPWUuY2VpbChyLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWguY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLHR9LHJhbmRvbTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dDtyKz00KWUucHVzaChpKCkpO3JldHVybiBuZXcgbC5pbml0KGUsdCl9fSksYz1zLmVuYz17fSx1PWMuSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaCgoYT4+PjQpLnRvU3RyaW5nKDE2KSksbi5wdXNoKCgxNSZhKS50b1N0cmluZygxNikpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rPTIpcltuPj4+M118PXBhcnNlSW50KHQuc3Vic3RyKG4sMiksMTYpPDwyNC1uJTgqNDtyZXR1cm4gbmV3IGwuaW5pdChyLGUvMil9fSxkPWMuTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49W10saT0wO2k8cjtpKyspe3ZhciBhPWVbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLHI9W10sbj0wO248ZTtuKyspcltuPj4+Ml18PSgyNTUmdC5jaGFyQ29kZUF0KG4pKTw8MjQtbiU0Kjg7cmV0dXJuIG5ldyBsLmluaXQocixlKX19LF89Yy5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGQuc3RyaW5naWZ5KHQpKSl9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgVVRGLTggZGF0YSIpfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGQucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSl9fSxmPW8uQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1oLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBsLmluaXQsdGhpcy5fbkRhdGFCeXRlcz0wfSxfYXBwZW5kOmZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9Xy5wYXJzZSh0KSksdGhpcy5fZGF0YS5jb25jYXQodCksdGhpcy5fbkRhdGFCeXRlcys9dC5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIHIsbj10aGlzLl9kYXRhLGk9bi53b3JkcyxhPW4uc2lnQnl0ZXMscz10aGlzLmJsb2NrU2l6ZSxvPWEvKDQqcyksaD0obz10P2UuY2VpbChvKTplLm1heCgoMHxvKS10aGlzLl9taW5CdWZmZXJTaXplLDApKSpzLGM9ZS5taW4oNCpoLGEpO2lmKGgpe2Zvcih2YXIgdT0wO3U8aDt1Kz1zKXRoaXMuX2RvUHJvY2Vzc0Jsb2NrKGksdSk7cj1pLnNwbGljZSgwLGgpLG4uc2lnQnl0ZXMtPWN9cmV0dXJuIG5ldyBsLmluaXQocixjKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1oLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLHR9LF9taW5CdWZmZXJTaXplOjB9KTtvLkhhc2hlcj1mLmV4dGVuZCh7Y2ZnOmguZXh0ZW5kKCksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2YucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5fYXBwZW5kKHQpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0LmluaXQocikuZmluYWxpemUoZSl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHAuSE1BQy5pbml0KHQscikuZmluYWxpemUoZSl9fX0pO3ZhciBwPXMuYWxnbz17fTtyZXR1cm4gc30oTWF0aCksciksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQsZSxuKXtmb3IodmFyIGk9W10sYT0wLHM9MDtzPGU7cysrKWlmKHMlNCl7dmFyIG89blt0LmNoYXJDb2RlQXQocy0xKV08PHMlNCoyfG5bdC5jaGFyQ29kZUF0KHMpXT4+PjYtcyU0KjI7aVthPj4+Ml18PW88PDI0LWElNCo4LGErK31yZXR1cm4gci5jcmVhdGUoaSxhKX1lLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIHM9KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxvPTA7bzw0JiZhKy43NSpvPHI7bysrKWkucHVzaChuLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciBoPW4uY2hhckF0KDY0KTtpZihoKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGgpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgcz1yLmNoYXJBdCg2NCk7aWYocyl7dmFyIG89dC5pbmRleE9mKHMpOy0xIT09byYmKGU9byl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHQuZW5jLkJhc2U2NH0oaS5leHBvcnRzKX0obik7dmFyIGE9bi5leHBvcnRzLHM9e2V4cG9ydHM6e319LG89e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dCxuPXIubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixzPXIuYWxnbyxvPVtdOyFmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8NjQ7dCsrKW9bdF09NDI5NDk2NzI5NiplLmFicyhlLnNpbih0KzEpKXwwfSgpO3ZhciBoPXMuTUQ1PWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8MTY7cisrKXt2YXIgbj1lK3IsaT10W25dO3Rbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxzPXRbZSswXSxoPXRbZSsxXSxfPXRbZSsyXSxmPXRbZSszXSxwPXRbZSs0XSxnPXRbZSs1XSx5PXRbZSs2XSx2PXRbZSs3XSx3PXRbZSs4XSxtPXRbZSs5XSxiPXRbZSsxMF0seD10W2UrMTFdLGs9dFtlKzEyXSx6PXRbZSsxM10sQT10W2UrMTRdLEU9dFtlKzE1XSxTPWFbMF0sQj1hWzFdLFI9YVsyXSxEPWFbM107Uz1sKFMsQixSLEQscyw3LG9bMF0pLEQ9bChELFMsQixSLGgsMTIsb1sxXSksUj1sKFIsRCxTLEIsXywxNyxvWzJdKSxCPWwoQixSLEQsUyxmLDIyLG9bM10pLFM9bChTLEIsUixELHAsNyxvWzRdKSxEPWwoRCxTLEIsUixnLDEyLG9bNV0pLFI9bChSLEQsUyxCLHksMTcsb1s2XSksQj1sKEIsUixELFMsdiwyMixvWzddKSxTPWwoUyxCLFIsRCx3LDcsb1s4XSksRD1sKEQsUyxCLFIsbSwxMixvWzldKSxSPWwoUixELFMsQixiLDE3LG9bMTBdKSxCPWwoQixSLEQsUyx4LDIyLG9bMTFdKSxTPWwoUyxCLFIsRCxrLDcsb1sxMl0pLEQ9bChELFMsQixSLHosMTIsb1sxM10pLFI9bChSLEQsUyxCLEEsMTcsb1sxNF0pLFM9YyhTLEI9bChCLFIsRCxTLEUsMjIsb1sxNV0pLFIsRCxoLDUsb1sxNl0pLEQ9YyhELFMsQixSLHksOSxvWzE3XSksUj1jKFIsRCxTLEIseCwxNCxvWzE4XSksQj1jKEIsUixELFMscywyMCxvWzE5XSksUz1jKFMsQixSLEQsZyw1LG9bMjBdKSxEPWMoRCxTLEIsUixiLDksb1syMV0pLFI9YyhSLEQsUyxCLEUsMTQsb1syMl0pLEI9YyhCLFIsRCxTLHAsMjAsb1syM10pLFM9YyhTLEIsUixELG0sNSxvWzI0XSksRD1jKEQsUyxCLFIsQSw5LG9bMjVdKSxSPWMoUixELFMsQixmLDE0LG9bMjZdKSxCPWMoQixSLEQsUyx3LDIwLG9bMjddKSxTPWMoUyxCLFIsRCx6LDUsb1syOF0pLEQ9YyhELFMsQixSLF8sOSxvWzI5XSksUj1jKFIsRCxTLEIsdiwxNCxvWzMwXSksUz11KFMsQj1jKEIsUixELFMsaywyMCxvWzMxXSksUixELGcsNCxvWzMyXSksRD11KEQsUyxCLFIsdywxMSxvWzMzXSksUj11KFIsRCxTLEIseCwxNixvWzM0XSksQj11KEIsUixELFMsQSwyMyxvWzM1XSksUz11KFMsQixSLEQsaCw0LG9bMzZdKSxEPXUoRCxTLEIsUixwLDExLG9bMzddKSxSPXUoUixELFMsQix2LDE2LG9bMzhdKSxCPXUoQixSLEQsUyxiLDIzLG9bMzldKSxTPXUoUyxCLFIsRCx6LDQsb1s0MF0pLEQ9dShELFMsQixSLHMsMTEsb1s0MV0pLFI9dShSLEQsUyxCLGYsMTYsb1s0Ml0pLEI9dShCLFIsRCxTLHksMjMsb1s0M10pLFM9dShTLEIsUixELG0sNCxvWzQ0XSksRD11KEQsUyxCLFIsaywxMSxvWzQ1XSksUj11KFIsRCxTLEIsRSwxNixvWzQ2XSksUz1kKFMsQj11KEIsUixELFMsXywyMyxvWzQ3XSksUixELHMsNixvWzQ4XSksRD1kKEQsUyxCLFIsdiwxMCxvWzQ5XSksUj1kKFIsRCxTLEIsQSwxNSxvWzUwXSksQj1kKEIsUixELFMsZywyMSxvWzUxXSksUz1kKFMsQixSLEQsayw2LG9bNTJdKSxEPWQoRCxTLEIsUixmLDEwLG9bNTNdKSxSPWQoUixELFMsQixiLDE1LG9bNTRdKSxCPWQoQixSLEQsUyxoLDIxLG9bNTVdKSxTPWQoUyxCLFIsRCx3LDYsb1s1Nl0pLEQ9ZChELFMsQixSLEUsMTAsb1s1N10pLFI9ZChSLEQsUyxCLHksMTUsb1s1OF0pLEI9ZChCLFIsRCxTLHosMjEsb1s1OV0pLFM9ZChTLEIsUixELHAsNixvWzYwXSksRD1kKEQsUyxCLFIseCwxMCxvWzYxXSksUj1kKFIsRCxTLEIsXywxNSxvWzYyXSksQj1kKEIsUixELFMsbSwyMSxvWzYzXSksYVswXT1hWzBdK1N8MCxhWzFdPWFbMV0rQnwwLGFbMl09YVsyXStSfDAsYVszXT1hWzNdK0R8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLHI9dC53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqdC5zaWdCeXRlcztyW2k+Pj41XXw9MTI4PDwyNC1pJTMyO3ZhciBhPWUuZmxvb3Iobi80Mjk0OTY3Mjk2KSxzPW47clsxNSsoaSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KSxyWzE0KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihzPDw4fHM+Pj4yNCl8NDI3ODI1NTM2MCYoczw8MjR8cz4+PjgpLHQuc2lnQnl0ZXM9NCooci5sZW5ndGgrMSksdGhpcy5fcHJvY2VzcygpO2Zvcih2YXIgbz10aGlzLl9oYXNoLGg9by53b3JkcyxsPTA7bDw0O2wrKyl7dmFyIGM9aFtsXTtoW2xdPTE2NzExOTM1JihjPDw4fGM+Pj4yNCl8NDI3ODI1NTM2MCYoYzw8MjR8Yz4+PjgpfXJldHVybiBvfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtmdW5jdGlvbiBsKHQsZSxyLG4saSxhLHMpe3ZhciBvPXQrKGUmcnx+ZSZuKStpK3M7cmV0dXJuKG88PGF8bz4+PjMyLWEpK2V9ZnVuY3Rpb24gYyh0LGUscixuLGksYSxzKXt2YXIgbz10KyhlJm58ciZ+bikraStzO3JldHVybihvPDxhfG8+Pj4zMi1hKStlfWZ1bmN0aW9uIHUodCxlLHIsbixpLGEscyl7dmFyIG89dCsoZV5yXm4pK2krcztyZXR1cm4obzw8YXxvPj4+MzItYSkrZX1mdW5jdGlvbiBkKHQsZSxyLG4saSxhLHMpe3ZhciBvPXQrKHJeKGV8fm4pKStpK3M7cmV0dXJuKG88PGF8bz4+PjMyLWEpK2V9ci5NRDU9YS5fY3JlYXRlSGVscGVyKGgpLHIuSG1hY01ENT1hLl9jcmVhdGVIbWFjSGVscGVyKGgpfShNYXRoKSx0Lk1ENX0oaS5leHBvcnRzKX0obyk7dmFyIGg9e2V4cG9ydHM6e319LGw9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIsbj1yLldvcmRBcnJheSxpPXIuSGFzaGVyLGE9ZS5hbGdvLHM9W10sbz1hLlNIQTE9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbi5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxvPXJbM10saD1yWzRdLGw9MDtsPDgwO2wrKyl7aWYobDwxNilzW2xdPTB8dFtlK2xdO2Vsc2V7dmFyIGM9c1tsLTNdXnNbbC04XV5zW2wtMTRdXnNbbC0xNl07c1tsXT1jPDwxfGM+Pj4zMX12YXIgdT0objw8NXxuPj4+MjcpK2grc1tsXTt1Kz1sPDIwPzE1MTg1MDAyNDkrKGkmYXx+aSZvKTpsPDQwPzE4NTk3NzUzOTMrKGleYV5vKTpsPDYwPyhpJmF8aSZvfGEmbyktMTg5NDAwNzU4ODooaV5hXm8pLTg5OTQ5NzUxNCxoPW8sbz1hLGE9aTw8MzB8aT4+PjIsaT1uLG49dX1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStofDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxlPXQud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsbj04KnQuc2lnQnl0ZXM7cmV0dXJuIGVbbj4+PjVdfD0xMjg8PDI0LW4lMzIsZVsxNCsobis2ND4+Pjk8PDQpXT1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksZVsxNSsobis2ND4+Pjk8PDQpXT1yLHQuc2lnQnl0ZXM9NCplLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZS5TSEExPWkuX2NyZWF0ZUhlbHBlcihvKSxlLkhtYWNTSEExPWkuX2NyZWF0ZUhtYWNIZWxwZXIobyl9KCksdC5TSEExfShpLmV4cG9ydHMpfShsKTt2YXIgYz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbjtyPShlPXQpLmxpYi5CYXNlLG49ZS5lbmMuVXRmOCxlLmFsZ28uSE1BQz1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGUpe3Q9dGhpcy5faGFzaGVyPW5ldyB0LmluaXQsInN0cmluZyI9PXR5cGVvZiBlJiYoZT1uLnBhcnNlKGUpKTt2YXIgcj10LmJsb2NrU2l6ZSxpPTQqcjtlLnNpZ0J5dGVzPmkmJihlPXQuZmluYWxpemUoZSkpLGUuY2xhbXAoKTtmb3IodmFyIGE9dGhpcy5fb0tleT1lLmNsb25lKCkscz10aGlzLl9pS2V5PWUuY2xvbmUoKSxvPWEud29yZHMsaD1zLndvcmRzLGw9MDtsPHI7bCsrKW9bbF1ePTE1NDk1NTY4MjgsaFtsXV49OTA5NTIyNDg2O2Euc2lnQnl0ZXM9cy5zaWdCeXRlcz1pLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoZXI7dC5yZXNldCgpLHQudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUodCksdGhpc30sZmluYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faGFzaGVyLHI9ZS5maW5hbGl6ZSh0KTtyZXR1cm4gZS5yZXNldCgpLGUuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fSl9KGkuZXhwb3J0cyl9KGMpLGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuQmFzZSxpPXIuV29yZEFycmF5LGE9ZS5hbGdvLHM9YS5NRDUsbz1hLkV2cEtERj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOnMsaXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxhPW4uaGFzaGVyLmNyZWF0ZSgpLHM9aS5jcmVhdGUoKSxvPXMud29yZHMsaD1uLmtleVNpemUsbD1uLml0ZXJhdGlvbnM7by5sZW5ndGg8aDspe3ImJmEudXBkYXRlKHIpLHI9YS51cGRhdGUodCkuZmluYWxpemUoZSksYS5yZXNldCgpO2Zvcih2YXIgYz0xO2M8bDtjKyspcj1hLmZpbmFsaXplKHIpLGEucmVzZXQoKTtzLmNvbmNhdChyKX1yZXR1cm4gcy5zaWdCeXRlcz00Kmgsc319KTtlLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIG8uY3JlYXRlKHIpLmNvbXB1dGUodCxlKX19KCksdC5FdnBLREZ9KGkuZXhwb3J0cyl9KGgpO3ZhciB1PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5saWIuQ2lwaGVyfHxmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLkJhc2UsYT1uLldvcmRBcnJheSxzPW4uQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxvPXIuZW5jO28uVXRmODt2YXIgaD1vLkJhc2U2NCxsPXIuYWxnby5FdnBLREYsYz1uLkNpcGhlcj1zLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3MucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3c6eX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KTtuLlN0cmVhbUNpcGhlcj1jLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIHU9ci5tb2RlPXt9LGQ9bi5CbG9ja0NpcGhlck1vZGU9aS5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUodCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZSh0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSl7dGhpcy5fY2lwaGVyPXQsdGhpcy5faXY9ZX19KSxfPXUuQ0JDPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5leHRlbmQoKTtmdW5jdGlvbiByKHQscixuKXt2YXIgaSxhPXRoaXMuX2l2O2E/KGk9YSx0aGlzLl9pdj1lKTppPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIHM9MDtzPG47cysrKXRbcitzXV49aVtzXX1yZXR1cm4gdC5FbmNyeXB0b3I9dC5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplO3IuY2FsbCh0aGlzLHQsZSxpKSxuLmVuY3J5cHRCbG9jayh0LGUpLHRoaXMuX3ByZXZCbG9jaz10LnNsaWNlKGUsZStpKX19KSx0LkRlY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemUsYT10LnNsaWNlKGUsZStpKTtuLmRlY3J5cHRCbG9jayh0LGUpLHIuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLl9wcmV2QmxvY2s9YX19KSx0fSgpLGY9KHIucGFkPXt9KS5Qa2NzNz17cGFkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTQqZSxuPXItdC5zaWdCeXRlcyVyLGk9bjw8MjR8bjw8MTZ8bjw8OHxuLHM9W10sbz0wO288bjtvKz00KXMucHVzaChpKTt2YXIgaD1hLmNyZWF0ZShzLG4pO3QuY29uY2F0KGgpfSx1bnBhZDpmdW5jdGlvbih0KXt2YXIgZT0yNTUmdC53b3Jkc1t0LnNpZ0J5dGVzLTE+Pj4yXTt0LnNpZ0J5dGVzLT1lfX07bi5CbG9ja0NpcGhlcj1jLmV4dGVuZCh7Y2ZnOmMuY2ZnLmV4dGVuZCh7bW9kZTpfLHBhZGRpbmc6Zn0pLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ7Yy5yZXNldC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuY2ZnLHI9ZS5pdixuPWUubW9kZTt0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFP3Q9bi5jcmVhdGVFbmNyeXB0b3I6KHQ9bi5jcmVhdGVEZWNyeXB0b3IsdGhpcy5fbWluQnVmZmVyU2l6ZT0xKSx0aGlzLl9tb2RlJiZ0aGlzLl9tb2RlLl9fY3JlYXRvcj09dD90aGlzLl9tb2RlLmluaXQodGhpcyxyJiZyLndvcmRzKToodGhpcy5fbW9kZT10LmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPXQpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayh0LGUpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT8oZS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSksdD10aGlzLl9wcm9jZXNzKCEwKSk6KHQ9dGhpcy5fcHJvY2VzcyghMCksZS51bnBhZCh0KSksdH0sYmxvY2tTaXplOjR9KTt2YXIgcD1uLkNpcGhlclBhcmFtcz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxnPShyLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9hLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhoKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1oLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9YS5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSxwLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0seT1uLlNlcmlhbGl6YWJsZUNpcGhlcj1pLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKHtmb3JtYXQ6Z30pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSkscz1pLmNmZztyZXR1cm4gcC5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpzLml2LGFsZ29yaXRobTp0LG1vZGU6cy5tb2RlLHBhZGRpbmc6cy5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSx2PShyLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuKXtufHwobj1hLnJhbmRvbSg4KSk7dmFyIGk9bC5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pLHM9YS5jcmVhdGUoaS53b3Jkcy5zbGljZShlKSw0KnIpO3JldHVybiBpLnNpZ0J5dGVzPTQqZSxwLmNyZWF0ZSh7a2V5OmksaXY6cyxzYWx0Om59KX19LHc9bi5QYXNzd29yZEJhc2VkQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6eS5jZmcuZXh0ZW5kKHtrZGY6dn0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9KG49dGhpcy5jZmcuZXh0ZW5kKG4pKS5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSk7bi5pdj1pLml2O3ZhciBhPXkuZW5jcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pO3JldHVybiBhLm1peEluKGkpLGF9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KTt2YXIgaT1uLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplLGUuc2FsdCk7cmV0dXJuIG4uaXY9aS5pdix5LmRlY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKX19KX0oKX0oaS5leHBvcnRzKX0odSksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLkJsb2NrQ2lwaGVyLG49ZS5hbGdvLGk9W10sYT1bXSxzPVtdLG89W10saD1bXSxsPVtdLGM9W10sdT1bXSxkPVtdLF89W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI1NjtlKyspdFtlXT1lPDEyOD9lPDwxOmU8PDFeMjgzO3ZhciByPTAsbj0wO2ZvcihlPTA7ZTwyNTY7ZSsrKXt2YXIgZj1uXm48PDFebjw8Ml5uPDwzXm48PDQ7Zj1mPj4+OF4yNTUmZl45OSxpW3JdPWYsYVtmXT1yO3ZhciBwPXRbcl0sZz10W3BdLHk9dFtnXSx2PTI1Nyp0W2ZdXjE2ODQzMDA4KmY7c1tyXT12PDwyNHx2Pj4+OCxvW3JdPXY8PDE2fHY+Pj4xNixoW3JdPXY8PDh8dj4+PjI0LGxbcl09dix2PTE2ODQzMDA5KnleNjU1MzcqZ14yNTcqcF4xNjg0MzAwOCpyLGNbZl09djw8MjR8dj4+PjgsdVtmXT12PDwxNnx2Pj4+MTYsZFtmXT12PDw4fHY+Pj4yNCxfW2ZdPXYscj8ocj1wXnRbdFt0W3lecF1dXSxuXj10W3Rbbl1dKTpyPW49MX19KCk7dmFyIGY9WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHA9bi5BRVM9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX25Sb3VuZHN8fHRoaXMuX2tleVByaW9yUmVzZXQhPT10aGlzLl9rZXkpe2Zvcih2YXIgdD10aGlzLl9rZXlQcmlvclJlc2V0PXRoaXMuX2tleSxlPXQud29yZHMscj10LnNpZ0J5dGVzLzQsbj00KigodGhpcy5fblJvdW5kcz1yKzYpKzEpLGE9dGhpcy5fa2V5U2NoZWR1bGU9W10scz0wO3M8bjtzKyspczxyP2Fbc109ZVtzXToobD1hW3MtMV0scyVyP3I+NiYmcyVyPT00JiYobD1pW2w+Pj4yNF08PDI0fGlbbD4+PjE2JjI1NV08PDE2fGlbbD4+PjgmMjU1XTw8OHxpWzI1NSZsXSk6KGw9aVsobD1sPDw4fGw+Pj4yNCk+Pj4yNF08PDI0fGlbbD4+PjE2JjI1NV08PDE2fGlbbD4+PjgmMjU1XTw8OHxpWzI1NSZsXSxsXj1mW3MvcnwwXTw8MjQpLGFbc109YVtzLXJdXmwpO2Zvcih2YXIgbz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXSxoPTA7aDxuO2grKyl7aWYocz1uLWgsaCU0KXZhciBsPWFbc107ZWxzZSBsPWFbcy00XTtvW2hdPWg8NHx8czw9ND9sOmNbaVtsPj4+MjRdXV51W2lbbD4+PjE2JjI1NV1dXmRbaVtsPj4+OCYyNTVdXV5fW2lbMjU1JmxdXX19fSxlbmNyeXB0QmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9kb0NyeXB0QmxvY2sodCxlLHRoaXMuX2tleVNjaGVkdWxlLHMsbyxoLGwsaSl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3ZhciByPXRbZSsxXTt0W2UrMV09dFtlKzNdLHRbZSszXT1yLHRoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5faW52S2V5U2NoZWR1bGUsYyx1LGQsXyxhKSxyPXRbZSsxXSx0W2UrMV09dFtlKzNdLHRbZSszXT1yfSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSxyLG4saSxhLHMsbyl7Zm9yKHZhciBoPXRoaXMuX25Sb3VuZHMsbD10W2VdXnJbMF0sYz10W2UrMV1eclsxXSx1PXRbZSsyXV5yWzJdLGQ9dFtlKzNdXnJbM10sXz00LGY9MTtmPGg7ZisrKXt2YXIgcD1uW2w+Pj4yNF1eaVtjPj4+MTYmMjU1XV5hW3U+Pj44JjI1NV1ec1syNTUmZF1ecltfKytdLGc9bltjPj4+MjRdXmlbdT4+PjE2JjI1NV1eYVtkPj4+OCYyNTVdXnNbMjU1JmxdXnJbXysrXSx5PW5bdT4+PjI0XV5pW2Q+Pj4xNiYyNTVdXmFbbD4+PjgmMjU1XV5zWzI1NSZjXV5yW18rK10sdj1uW2Q+Pj4yNF1eaVtsPj4+MTYmMjU1XV5hW2M+Pj44JjI1NV1ec1syNTUmdV1ecltfKytdO2w9cCxjPWcsdT15LGQ9dn1wPShvW2w+Pj4yNF08PDI0fG9bYz4+PjE2JjI1NV08PDE2fG9bdT4+PjgmMjU1XTw8OHxvWzI1NSZkXSlecltfKytdLGc9KG9bYz4+PjI0XTw8MjR8b1t1Pj4+MTYmMjU1XTw8MTZ8b1tkPj4+OCYyNTVdPDw4fG9bMjU1JmxdKV5yW18rK10seT0ob1t1Pj4+MjRdPDwyNHxvW2Q+Pj4xNiYyNTVdPDwxNnxvW2w+Pj44JjI1NV08PDh8b1syNTUmY10pXnJbXysrXSx2PShvW2Q+Pj4yNF08PDI0fG9bbD4+PjE2JjI1NV08PDE2fG9bYz4+PjgmMjU1XTw8OHxvWzI1NSZ1XSlecltfKytdLHRbZV09cCx0W2UrMV09Zyx0W2UrMl09eSx0W2UrM109dn0sa2V5U2l6ZTo4fSk7ZS5BRVM9ci5fY3JlYXRlSGVscGVyKHApfSgpLHQuQUVTfShpLmV4cG9ydHMpfShzKTt2YXIgZD1zLmV4cG9ydHMsXz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLHM9ci5hbGdvLG89W10saD1bXTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgcj1lLnNxcnQodCksbj0yO248PXI7bisrKWlmKCEodCVuKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiByKHQpe3JldHVybiA0Mjk0OTY3Mjk2Kih0LSgwfHQpKXwwfWZvcih2YXIgbj0yLGk9MDtpPDY0Oyl0KG4pJiYoaTw4JiYob1tpXT1yKGUucG93KG4sLjUpKSksaFtpXT1yKGUucG93KG4sMS8zKSksaSsrKSxuKyt9KCk7dmFyIGw9W10sYz1zLlNIQTI1Nj1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBpLmluaXQoby5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxpPXJbMV0sYT1yWzJdLHM9clszXSxvPXJbNF0sYz1yWzVdLHU9cls2XSxkPXJbN10sXz0wO188NjQ7XysrKXtpZihfPDE2KWxbX109MHx0W2UrX107ZWxzZXt2YXIgZj1sW18tMTVdLHA9KGY8PDI1fGY+Pj43KV4oZjw8MTR8Zj4+PjE4KV5mPj4+MyxnPWxbXy0yXSx5PShnPDwxNXxnPj4+MTcpXihnPDwxM3xnPj4+MTkpXmc+Pj4xMDtsW19dPXArbFtfLTddK3krbFtfLTE2XX12YXIgdj1uJmlebiZhXmkmYSx3PShuPDwzMHxuPj4+MileKG48PDE5fG4+Pj4xMyleKG48PDEwfG4+Pj4yMiksbT1kKygobzw8MjZ8bz4+PjYpXihvPDwyMXxvPj4+MTEpXihvPDw3fG8+Pj4yNSkpKyhvJmNefm8mdSkraFtfXStsW19dO2Q9dSx1PWMsYz1vLG89cyttfDAscz1hLGE9aSxpPW4sbj1tKyh3K3YpfDB9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK3N8MCxyWzRdPXJbNF0rb3wwLHJbNV09cls1XStjfDAscls2XT1yWzZdK3V8MCxyWzddPXJbN10rZHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCp0LnNpZ0J5dGVzO3JldHVybiByW2k+Pj41XXw9MTI4PDwyNC1pJTMyLHJbMTQrKGkrNjQ+Pj45PDw0KV09ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLHJbMTUrKGkrNjQ+Pj45PDw0KV09bix0LnNpZ0J5dGVzPTQqci5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO3IuU0hBMjU2PWEuX2NyZWF0ZUhlbHBlcihjKSxyLkhtYWNTSEEyNTY9YS5fY3JlYXRlSG1hY0hlbHBlcihjKX0oTWF0aCksdC5TSEEyNTZ9KGkuZXhwb3J0cyl9KF8pO3ZhciBmPV8uZXhwb3J0cyxwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgZT10LmxpYi5Xb3JkQXJyYXkscj1lLmluaXQsbj1lLmluaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYodD1uZXcgVWludDhBcnJheSh0KSksKHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJnQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8dCBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIEludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJih0PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpKSx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBlPXQuYnl0ZUxlbmd0aCxuPVtdLGk9MDtpPGU7aSsrKW5baT4+PjJdfD10W2ldPDwyNC1pJTQqODtyLmNhbGwodGhpcyxuLGUpfWVsc2Ugci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O24ucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaS5leHBvcnRzKX0ocCk7dmFyIGc9cC5leHBvcnRzLHk9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShpLmV4cG9ydHMpfSh5KTt2YXIgdj15LmV4cG9ydHM7Y29uc3Qgdz0hMTtsZXQgbSxiO29ubWVzc2FnZT1mdW5jdGlvbih0KXtjb25zdHtqb2I6cixjbWQ6bixzZXJ2ZXI6aSxwYXRoOnMsYnVmZmVyOm8sa2V5QmFzZTY0OmgsZ3ppcDpsLHJlZmVycmVyOmMsaWQ6dSxhcHBJZDpfLHBlcnNpc3RlbnRJZDpwLENST1FVRVRfVkVSU0lPTjp5LGRlYnVnOngsd2hhdDprfT10LmRhdGE7aWYoInVwbG9hZEVuY3J5cHRlZCI9PT1uKUIocyk7ZWxzZSBjb25zb2xlLmVycm9yKCJVbmtub3duIHdvcmtlciBjb21tYW5kIixuKTtmdW5jdGlvbiB6KHQpe2NvbnN0IGU9RGF0ZS5ub3coKSxyPWcuY3JlYXRlKHQpLG49YS5wYXJzZShoKSxpPXYocixuKSxzPWcucmFuZG9tKDE2KSx7Y2lwaGVydGV4dDpvfT1kLmVuY3J5cHQocixuLHtpdjpzfSksbD1uZXcgQXJyYXlCdWZmZXIoNCtzLnNpZ0J5dGVzK2kuc2lnQnl0ZXMrby5zaWdCeXRlcyksYz1uZXcgRGF0YVZpZXcobCk7bGV0IF89MDtjLnNldFVpbnQzMihfLDExMjk0NjgyMDksITEpLF8rPTQ7Zm9yKGNvbnN0IHQgb2ZbcyxpLG9dKWZvcihjb25zdCBlIG9mIHQud29yZHMpYy5zZXRJbnQzMihfLGUsITEpLF8rPTQ7cmV0dXJuIHgmJmNvbnNvbGUubG9nKGAke3V9ICR7a30gZW5jcnlwdGVkICgke2wuYnl0ZUxlbmd0aH0gYnl0ZXMpIGluICR7RGF0ZS5ub3coKS1lfW1zYCksbH1mdW5jdGlvbiBBKHQpe2NvbnN0IHI9RGF0ZS5ub3coKSxuPWUuZXhwb3J0cy5kZWZsYXRlKHQse2d6aXA6ITAsbGV2ZWw6MX0pO3JldHVybiB4JiZjb25zb2xlLmxvZyhgJHt1fSAke2t9IGNvbXByZXNzZWQgKCR7bi5sZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktcn1tc2ApLG59ZnVuY3Rpb24gRSh0KXtjb25zdCBlPURhdGUubm93KCkscj1mKGcuY3JlYXRlKHQpKSxuPWEuc3RyaW5naWZ5KHIpLnJlcGxhY2UoLz0vZywiIikucmVwbGFjZSgvXCsvZywiLSIpLnJlcGxhY2UoL1wvL2csIl8iKTtyZXR1cm4geCYmY29uc29sZS5sb2coYCR7dX0gJHtrfSBoYXNoZWQgKCR7dC5sZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLG59YXN5bmMgZnVuY3Rpb24gUyh0KXtjb25zdCBlPURhdGUubm93KCkscj1gJHtpLnVybH0vJHt0fWA7aWYoIWkuYXBpS2V5KXJldHVybnt1cmw6cix1cGxvYWRVcmw6cn07Y29uc3Qgbj1hd2FpdCBtKHIse2hlYWRlcnM6eyJYLUNyb3F1ZXQtQXV0aCI6aS5hcGlLZXksIlgtQ3JvcXVldC1BcHAiOl8sIlgtQ3JvcXVldC1JZCI6cCwiWC1Dcm9xdWV0LVNlc3Npb24iOnUsIlgtQ3JvcXVldC1WZXJzaW9uIjp5LCJYLUNyb3F1ZXQtUGF0aCI6bmV3IFVSTChjKS5wYXRobmFtZX0scmVmZXJyZXI6Y30pLHtvazphLHN0YXR1czpzLHN0YXR1c1RleHQ6b309bjtpZighYSl0aHJvdyBFcnJvcihgRXJyb3IgaW4gc2lnbmluZyBVUkw6ICR7c30gLSAke299YCk7Y29uc3R7ZXJyb3I6aCxyZWFkOmwsd3JpdGU6ZH09YXdhaXQgbi5qc29uKCk7aWYoaCl0aHJvdyBFcnJvcihoKTtyZXR1cm4geCYmY29uc29sZS5sb2coYCR7dX0gJHtrfSBhdXRob3JpemVkIGluICR7RGF0ZS5ub3coKS1lfW1zYCkse3VybDpsLHVwbG9hZFVybDpkfX1hc3luYyBmdW5jdGlvbiBCKHQpe3RyeXtsZXQgZT16KGw/QShvKTpvKTt3LHQuaW5jbHVkZXMoIiVIQVNIJSIpJiYodD10LnJlcGxhY2UoIiVIQVNIJSIsRShlKSkpO2NvbnN0e3VwbG9hZFVybDpuLHVybDppfT1hd2FpdCBTKHQpLGE9RGF0ZS5ub3coKSx7b2s6cyxzdGF0dXM6aCxzdGF0dXNUZXh0OmR9PWF3YWl0IG0obix7bWV0aG9kOiJQVVQiLG1vZGU6ImNvcnMiLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iLCJYLUNyb3F1ZXQtQXBwIjpfLCJYLUNyb3F1ZXQtSWQiOnAsIlgtQ3JvcXVldC1TZXNzaW9uIjp1LCJYLUNyb3F1ZXQtVmVyc2lvbiI6eX0scmVmZXJyZXI6Yyxib2R5OmV9KTtpZighcyl0aHJvdyBFcnJvcihgc2VydmVyIHJldHVybmVkICR7aH0gJHtkfSBmb3IgUFVUICR7bn1gKTt4JiZjb25zb2xlLmxvZyhgJHt1fSAke2t9IHVwbG9hZGVkICgke2h9KSBpbiAke0RhdGUubm93KCktYX1tcyAke2l9YCksYih7am9iOnIsdXJsOmksb2s6cyxzdGF0dXM6aCxzdGF0dXNUZXh0OmQsYnl0ZXM6ZS5ieXRlTGVuZ3RofSl9Y2F0Y2godCl7eCYmY29uc29sZS5sb2coYCR7dX0gdXBsb2FkIGVycm9yICR7dC5tZXNzYWdlfWApLGIoe2pvYjpyLG9rOiExLHN0YXR1czotMSxzdGF0dXNUZXh0OnQubWVzc2FnZX0pfX19LG09ZmV0Y2gsYj1wb3N0TWVzc2FnZX0oKTsKCg==",null,false),new Worker(ir,a)});const cr=P.CROQUET_VERSION,dr="node"===P.CROQUET_PLATFORM;dr||window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+cr):console.log("%cCroquet%c %c"+cr,"color:#F0493E","color:inherit","color:"+(cr.includes("+")?"#909":"inherit"));const hr=!dr&&!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i)&&window.location.pathname.startsWith("/dev/"),ur=!dr&&!!window.location.hostname.match(/^(.*\.)?croquet\.dev$/i);function Ca(a){const v=a.lastIndexOf(":"),V=-1===v?a:a.slice(v+1),Y=-1===v?"":a.slice(0,v);let P=I.backend||Y;const K=I.reflector&&I.reflector.match(/^wss?:/);if("none"===P||K)return{apiKey:V,signServer:"none",reflector:"overridden"};if(!P&&!dr)switch(window.location.hostname){case"croquet.dev":P="dev";break;case"staging.croquet.io":P="staging"}let M;switch(P){case"":case"prod":M="croquet.io";break;case"staging":M="staging.croquet.io";break;case"dev":M="croquet.dev";break;default:M=`${P}.croquet.dev`}return{apiKey:V,signServer:`https://api.${M}/sign`,reflector:`wss://api.${M}/reflector/v1`}}let mr=null;const pr=I.nocheat,br=[0];let yr;const fr=new nr;fr.onerror=a=>console.error(`UploadWorker error: ${a.message}`);let Xr=0;const Gr=new Set;function Ha(a){for(const v of Gr)if(v.id===a){const{appId:a,persistentId:V}=v.sessionSpec;return{appId:a,persistentId:V,uploadEncrypted:a=>v.uploadEncrypted(a),downloadEncrypted:a=>v.downloadEncrypted(a)}}return{}}class za{constructor(){!function(){const a=I.dev||!1!==I.dev&&"localhost",v=I.dev||!1!==I.dev&&(hr||ur);mr={messages:I.has("debug","messages",!1),sends:I.has("debug","sends",!1),ticks:I.has("debug","ticks",!1),pong:I.has("debug","pong",!1),snapshot:I.has("debug","snapshot",!1),session:I.has("debug","session",!1),initsnapshot:I.has("debug","initsnapshot",a),reflector:I.has("debug","reflector",v)}}(),this.reset()}reset(){globalThis.CROQUETVM===this.vm&&delete globalThis.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new Fa(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*36**10).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(globalThis.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(globalThis.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,de.removeAllSubscriptionsFor(this.viewId),de.addSubscription(this.viewId,"__peers__",this.viewId,(a=>bt(`users now ${a.count}`)),"oncePerFrameWhileSynced"),this.leaving||ce.showSyncWait(!0)}get id(){return this.vm?this.vm.id:this.sessionSpec.id}get persistentId(){return this.sessionSpec.persistentId}get versionId(){return this.sessionSpec.codeHash}get extrapolatedTime(){return Date.now()-this.extrapolatedTimeBase}get viewOnly(){return this.sessionSpec.viewOnly}get backlog(){return this.vm?this.reflectorTime-this.vm.time:0}get starvation(){return Date.now()-this.lastReceived}get lag(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}get activity(){return Date.now()-this.lastSent}get viewed(){return!(!this.session||!this.session.view)}get connected(){return this.connection.connected}get shouldLeaveWhenDisconnected(){return this.leaving||!this.canRejoinSeamlessly||0===this.sessionSpec.rejoinLimit}get canRejoinSeamlessly(){return!!this.timeline}checkForConnection(a){this.connection.checkForConnection(a)}dormantDisconnect(){this.connected&&this.connection.dormantDisconnect()}async initFromSessionSpec(a){const{name:v,optionsFromUrl:V,password:Y,appId:P,apiKey:K,viewIdDebugSuffix:M}=a,H=P?`${P}/${v}`:v;M&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+M).slice(0,16)).replace(/[^a-z0-9]/gi,(a=>`_${"%"===a?"":a.charCodeAt(0).toString(16).toUpperCase()}`)));const F={...a.options};if(V)for(const a of V)a in I&&(F[a]=I[a]);const z={};for(const v of["hashOverride"])v in I?z[v]=I[v]:v in a&&(z[v]=a[v]);this.key=Zi(Y,"",{keySize:8});const N=await async function(a,v){return R(a+y(v))}(H,F),{developerId:Q,token:j}=await this.verifyApiKey(K,P,N),{id:U,codeHash:D,computedCodeHash:_}=await async function(a,v,V,Y){let P,K;const M=at[a];let H="";M?(P=M.codeHashes,K=M.computedCodeHash,H=" (code hashing from cache)"):(P=await Promise.all(lt),K=await R([Y,...P].join("|")),at[a]={codeHashes:P,computedCodeHash:K});const{hashOverride:I,...F}=V,z=I||K,N=await R(a+"|"+v+y(F)+z);if(W()&&!ct.has(N)){(it?"utf-8":[...document.getElementsByTagName("meta")].find((a=>a.getAttribute("charset"))))||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),ot[K].what="Version ID",ot[a].what="Persistent ID",ot[N].what="Session ID",z!==K&&(P.push(K),ot[K].what="Computed Version ID (replaced by overrideHash)",ot[z]={what:"Version ID (as specified by overrideHash)"});const v=[...P,z,a,N].map((a=>({hash:a,...ot[a]})));console.log(`Croquet: Debug Hashing for session ${N}${H}`,v),ct.add(N)}return{id:N,persistentId:a,codeHash:z,computedCodeHash:K}}(N,Q,z,cr);this.tove=await this.encrypt(U),mr.session&&console.log(`Croquet session "${H}":\n        sessionId=${U}${P?`\n        persistentId=${N}`:""}\n        versionId=${D===_?D:`${D} (specified in hashOverride)\n        versionId=${_} (computed)`}\n        viewId=${this.viewId}`),this.eventRateLimit=a.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec={...a,options:F,name:H,id:U,persistentId:N,developerId:Q,token:j,codeHash:D,computedCodeHash:_};const{msPerTick:E,multiplier:B}=this.getTickAndMultiplier();this.msPerTick=E,this.tickMultiplier=B,this.setUpActivityChecks()}async establishSession(){const{id:a,persistentId:v,codeHash:V}=this.sessionSpec;this.sessionSpec.snapshot={id:a,time:0,meta:{id:a,persistentId:v,codeHash:V,created:(new Date).toISOString()}};const Y=new Promise((a=>this.sessionSpec.sessionJoined=a));this.checkForConnection(!1),mr.session&&console.log(a,"waiting for SYNC"),await Y}async verifyApiKey(a,v,V){const{signServer:Y,apiKey:P}=Ca(a);if("none"===Y)return{developerId:"unknown_dev_id"};try{const a=await fetch(`${Y}/join?meta=login`,{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":P,"X-Croquet-App":v,"X-Croquet-Id":V,"X-Croquet-Version":cr,"X-Croquet-Path":new URL(ce.referrerURL()).pathname},referrer:ce.referrerURL(),referrerPolicy:"no-referrer-when-downgrade"}),{error:K,developerId:M,token:H}=await a.json();if(K)throw Error(K);return mr.session&&console.log("Croquet: verified API key"),{developerId:M,token:H}}catch(v){throw Error(`Croquet API key validation failed for "${a}": ${v.message}`)}}lastKnownTime(a){return Math.max(a.time,a.externalTime)}takeSnapshot(){const a=this.vm.snapshot(),v=this.lastKnownTime(a),V=a.externalSeq;return a.meta={...this.sessionSpec.snapshot.meta,options:this.sessionSpec.options,time:v,seq:V,date:(new globalThis.CroquetViewDate).toISOString(),host:dr?"localhost":window.location.hostname,sdk:cr},delete a.meta.hash,a}takeSnapshotHandleErrors(){let a,v,V;try{a=Bt.begin("snapshot"),V=this.takeSnapshot()}catch(a){return yt("snapshot",a),null}finally{v=Bt.end("snapshot")-a}return mr.snapshot&&console.log(this.id,`snapshot taken in ${Math.ceil(v)} ms`),V}scheduleSnapshot(){if(!this.connected||!this.vm||this.viewOnly)return;const a=this.vm.time,v=a-this.vm.lastSnapshotPoll;if(v<5e3)return void(mr.snapshot&&console.log(`not requesting snapshot poll (${v}ms since poll scheduled)`));const V=new ml(a,0,"_","handlePollForSnapshot",[]);this.sendTagged(V,{debounce:5e3,msgID:"pollForSnapshot"}),mr.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}handlePollForSnapshot(a){if(!0!==this.synced||this.viewOnly)return void(this.triggeringCpuTime=null);const v=this.triggeringCpuTime||this.cpuTime;let V,Y,P;this.triggeringCpuTime=null,this.cpuTime=0;try{V=Bt.begin("snapshot"),Y={cpuTime:v,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(a){return void yt("snapshot",a)}finally{P=Bt.end("snapshot")-V,this.cpuTime-=P}mr.snapshot&&console.log(this.id,`Summary hashing took ${Math.ceil(P)}ms`),Promise.resolve().then((()=>this.pollForSnapshot(a,Y)))}pollForSnapshot(a,v){v.cpuTime+=Math.random(),mr.snapshot&&console.log(this.id,"sending snapshot vote",v),this.sendTutti({time:a,topic:"snapshot",data:v,tallyTarget:["handleSnapshotVote"]})}handleSnapshotVote(a){if(!0!==this.synced)return void(mr.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"));const{tally:v}=a;mr.snapshot&&console.log(this.id,"received snapshot votes",v);const{numberOfGroups:V,shouldUpload:Y,dissidentFlag:P}=this.analyzeTally(v,"cpuTime");if(V>1&&console.error(this.id,`Session diverged! Snapshots fall into ${V} groups`),Y){const a=this.takeSnapshotHandleErrors();a&&Promise.resolve().then((()=>this.uploadSnapshot(a,P)))}}analyzeTally(a,v){let V=!1,Y=null;const P=[],K={};let M=null;Object.keys(a).forEach(((a,v)=>{const V=JSON.parse(a);P.push(V);const{hash:Y,viewId:H}=V;H===this.viewId&&(M=v),K[Y]||(K[Y]=[]),K[Y].push(v)}));const H=Object.keys(K),I=H.length;let F=0;I>1&&(H.sort(((a,v)=>K[v].length-K[a].length)),K[H[0]].length===K[H[1]].length&&(mr.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),H[1]<H[0]&&(F=1)));const z=H[F];if(null!==M){const a=P[M].hash,H=K[a];H.length>1&&H.sort(((a,V)=>P[a][v]-P[V][v])),H[0]===M&&(V=!0,a!==z&&(Y={groupVotes:H.length,allVotes:P.length}))}return{numberOfGroups:I,shouldUpload:V,dissidentFlag:Y}}snapshotPath(a,v,V){const Y=Math.ceil(a).toString().padStart(10,"0"),{appId:P,persistentId:K,codeHash:M,apiKey:H}=this.sessionSpec;return H?`apps/${P}/snap/${M}/${K}.${this.id}/${Y}_${v}.${V}`:`snapshots/${this.id}/${Y}_${v}-${V}.snap`}hashSnapshot(a){return a.meta.hash?a.meta.hash:(a.meta.hashPromise||(a.meta.hashPromise=new Promise((v=>{const V={...a};delete V.meta,R(JSON.stringify(V)).then((V=>{a.meta.hash=V,delete a.meta.hashPromise,v(V)}))}))),a.meta.hashPromise)}uploadServer(a){if("string"==typeof I.files){let a=I.files;return a.endsWith("/")&&(a=a.slice(0,-1)),{url:a,apiKey:null}}const{apiKey:v,signServer:V}=Ca(a);if("none"===V)throw Error("no file server configured");return{url:V,apiKey:v}}async uploadSnapshot(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;await this.hashSnapshot(a);const V=Bt.begin("snapshot"),Y=JSON.stringify(a),P=Bt.end("snapshot")-V;mr.snapshot&&console.log(this.id,`snapshot stringified (${Y.length} bytes) in ${Math.ceil(P)}ms`);const{time:K,seq:M,hash:H}=a.meta,I=this.connection.socket;try{const a=await this.uploadEncrypted({content:Y,path:this.snapshotPath(K,M,H),key:this.key,gzip:!0,debug:mr.snapshot,what:"snapshot"});return this.connection.socket!==I?(console.warn(this.id,"Controller was reset while trying to upload snapshot"),!1):(this.announceSnapshotUrl(K,M,H,a,v),!0)}catch(a){return console.error(this.id,"Failed to upload snapshot"),!1}}announceSnapshotUrl(a,v,V,Y,P){if(mr.snapshot){let K=`time: ${a}, seq: ${v}, hash: ${V}`;P&&(K+=", as dissident; "+JSON.stringify(P)),console.log(this.id,`sending snapshot url to reflector (${K}): ${Y}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:a,seq:v,hash:V,url:Y,dissident:P}}))}catch(a){console.error("ERROR while sending",a)}}async downloadEncrypted(a){let{url:v,gzip:V,key:Y,debug:P,json:K,what:M}=a;v.startsWith("https://croquet.io/files/v1")&&(v=v.replace("https://croquet.io/files/v1","https://files.croquet.io"));let H=Date.now();const I=await fetch(v,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId,"X-Croquet-Session":this.sessionSpec.id,"X-Croquet-Version":cr},referrer:ce.referrerURL()}),F=await I.arrayBuffer();P&&console.log(this.id,`${M} fetched (${F.byteLength} bytes) in ${-H+(H=Date.now())}ms`),Bt.addNetworkTraffic(`${M}_in`,F.byteLength);const z=this.decryptBinary(F,Y);P&&console.log(this.id,`${M} decrypted (${z.length} bytes) in ${-H+(H=Date.now())}ms`);const N=V?qo.inflate(z):z;return P&&V&&console.log(this.id,`${M} inflated (${N.length} bytes) in ${-H+(H=Date.now())}ms`),K?JSON.parse((new TextDecoder).decode(N)):N}async uploadEncrypted(a){let{content:v,path:V,key:Y,gzip:P,keep:K,debug:M,what:H}=a;const I="string"==typeof v?(new TextEncoder).encode(v).buffer:v,F=K?void 0:[I],z="string"==typeof Y?Y:bi.stringify(Y),{apiKey:N,appId:Q,persistentId:j}=this.sessionSpec,U=++Xr;return new Promise(((a,v)=>{const Y=dr?"addListener":"addEventListener",K=dr?"removeListener":"removeEventListener";fr.postMessage({job:U,cmd:"uploadEncrypted",server:this.uploadServer(N),path:V,buffer:I,keyBase64:z,gzip:P,referrer:ce.referrerURL(),id:this.id,appId:Q,persistentId:j,CROQUET_VERSION:cr,debug:M,what:H},F);const f=V=>{if(U!==V.data.job)return;const{url:Y,ok:P,status:M,statusText:I,bytes:F}=V.data;Bt.addNetworkTraffic(`${H}_out`,F),fr[K]("message",f),P?a(Y):v(Error(`${M}: ${I}`))};try{fr[Y]("message",f)}catch(a){console.log("failed to add listener",a)}}))}persistentPath(a){const{appId:v,persistentId:V}=this.sessionSpec;return`apps/${v}/${V}/save/${a}`}pollForPersist(a,v,V,Y,P){if(!this.synced)return;if(!this.sessionSpec.appId)throw Error("Persistence API requires appId");const K={viewId:this.viewId,hash:Y,ms:P+.001*Math.random()},M={persistTime:v,persistentHash:Y,persistentString:V};mr.snapshot&&console.log(this.id,`sending persistence vote for time @${v}`,K),this.sendTutti({time:a,topic:"persist",data:K,localContext:M,tallyTarget:["handlePersistVote"]})}async handlePersistVote(a){const{tally:v,localContext:V}=a;if(mr.snapshot){const a=V?`for time @${V.persistTime}`:"that we didn't participate in";console.log(this.id,`received persistence vote ${a}`,v)}const{numberOfGroups:Y,shouldUpload:P,dissidentFlag:K}=this.analyzeTally(v,"ms");if(Y>1&&console.warn(this.id,`Persistence records fall into ${Y} groups`),!P||!V)return;const{persistTime:M,persistentHash:H,persistentString:I}=V,F=await this.uploadEncrypted({path:this.persistentPath(H),content:I,key:this.key,gzip:!0,debug:mr.snapshot,what:"persistence"});if(mr.snapshot){const a=K?` (as dissident; ${JSON.stringify(K)})`:"";console.log(this.id,`sending persistent data url to reflector${a}: ${F}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:M,url:F,dissident:K}}))}catch(a){console.error("ERROR while sending",a)}}convertReflectorMessage(a){let v="noop",V=[];switch(a[2].what){case"users":{const{joined:Y,left:P,active:K,total:M}=a[2];this.users=K,this.usersTotal=M;const H="__peers__",I={entered:Y||[],exited:P||[],count:K};v="publishFromModelOnly",V=["__VM__",H,I],de.handleEvent(this.viewId+":"+H,I);break}case"tally":{const{tuttiSeq:Y,tuttiKey:P,tally:K,tallyTarget:M,missingClients:H}=a[2];(mr.messages||mr.snapshot)&&H&&console.log(`${H} ${1===H?"client":"clients"} failed to participate in tally ${P||Y}`),v="handleTuttiResult",V=[{tuttiSeq:Y,tuttiKey:P,tally:K,tallyTarget:M}];break}}const Y=new ml(0,0,"_",v,V);a[2]=Y.asState()[2]}handleTuttiResult(a){const{tuttiSeq:v,tuttiKey:V,tally:Y,tallyTarget:P}=a,K=V?a=>a.tuttiKey===V:a=>a.dummyTuttiSeq===v,M=this.tuttiHistory.findIndex(K),H=-1!==M&&this.tuttiHistory.splice(M,1)[0];let I=null,F=null;if(H&&(I=H.payload,F=H.localContext),P){const[a,...v]=P,V=[...v,{tally:Y,localPayload:I,localContext:F}],K=new ml(0,0,"_",a,V);this.vm.verifyExternal(K),K.executeOn(this.vm,!0)}}async receive(a,v){const V=this.lastReceived;switch(this.lastReceived=this.connection.lastReceived,a){case"SYNC":{this.syncReceived=!0,this.clearSyncReceiptTimeout(),Gr.add(this);const{progressReporter:V}=this.sessionSpec,Y=V||(()=>{}),{messages:P,url:K,persisted:M,time:H,seq:I,snapshotSeq:F,tove:z,reflector:N,flags:Q}=v;if(z&&z!==this.tove)try{if(this.decrypt(z)!==this.id)throw Error("wrong sessionId in tove?!")}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`failed to decrypt session secret: ${a.message}`),4200),void Y(-1)}const j=v.timeline||v.reflectorSession;this.flags=Q||{};const U=M?"persistence":"snapshot";mr.session&&console.log(this.id,`received SYNC from ${N} reflector: time ${H}, ${P.length} messages, ${U} ${K||"<none>"}`);let D=!!this.vm;if(D){this.networkQueue.length=0;const a=!!j&&j===this.timeline,v=P[0],V=I,Y=void 0!==F?F:v?v[1]:V;mr.messages&&console.log(this.id,`rejoin: we have #${this.vm.seq} SYNC has #${Y}-#${V}`);let K=a&&ul(Y,this.vm.seq)&&ul(this.vm.seq,V)&&H>=this.reflectorTime;if(K){let a=0;v&&ul(v[1],this.vm.seq)&&(a=this.vm.seq-v[1]+1>>>0);for(let v=a;K&&v<P.length;v++){const a=P[v][2];"string"!=typeof a&&"users"===a.what&&a.left&&a.left.includes(this.viewId)&&(mr.session&&console.log(this.id,"reflector reports that this view has left"),K=!1)}K&&a&&(mr.messages&&console.log(this.id,`rejoin: discarding ${a} messages #${v[1]}-#${this.vm.seq}`),P.splice(0,a))}if(K){if(this.sendBuffer.length>0){const a=this.sendBuffer;this.sendBuffer=[],mr.session&&console.log(this.id,`rejoin: sending ${a.length} messages buffered while disconnected`);for(const v of a)v()}}else mr.session&&console.log(this.id,"cannot rejoin seamlessly; rebooting model/view"),this.leave(!0),D=!1}const _=this.networkQueue;this.networkQueue=[];for(const v of P){if("string"!=typeof v[2])this.convertReflectorMessage(v);else try{v[2]=this.decryptPayload(v[2])[0]}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`failed to decrypt message: ${a.message}`),4200),void Y(-1)}mr.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(v)),this.networkQueue.push(v)}if(this.networkQueue.push(..._),H>this.reflectorTime&&this.timeFromReflector(H,"reflector"),D)return mr.session&&console.log(this.id,"seamless rejoin successful"),void this.sessionSpec.sessionJoined();let E;if(this.timeline=j||"",mr.snapshot&&K&&console.log(`${this.id} fetching ${U} ${K}`),K)try{E=await this.downloadEncrypted({url:K,gzip:!0,key:this.key,debug:mr.snapshot,json:!0,what:U})}catch(a){return this.connection.closeConnectionWithError("SYNC",Error(`failed to fetch ${U}: ${a.message}`),4200),void Y(-1)}if(!this.connected)return console.log(this.id,"disconnected during SYNC"),void Y(-1);M?this.install(E):(E&&(this.sessionSpec.snapshot=E),this.install()),mr.session&&console.log(`${this.id} fast-forwarding from ${Math.round(this.vm.time)} to at least ${H}`);const B=this.vm.time,O=await new Promise((a=>{const{port1:v,port2:V}=new MessageChannel;v.onmessage=()=>{let v=!0;if(this.vm.time===this.reflectorTime)this.viewId in this.vm.views&&(Y(1),a(!0),v=!1);else{const a=(this.vm.time-B)/(this.reflectorTime-B);Y(a)}v&&this.stepSession("fastForward",{budget:200})},this.fastForwardHandler=v=>{this.connected&&this.vm?"error"===v?(Y(-1),a(!1)):V.postMessage("tick"):(console.log(this.id,"disconnected during SYNC fast-forwarding"),Y(-1),a(!1))},Promise.resolve().then((()=>this.stepSession("fastForward",{budget:200})))}));return delete this.fastForwardHandler,O&&mr.session&&console.log(`${this.id} fast-forwarded to ${Math.round(this.vm.time)}`),void(O&&this.sessionSpec.sessionJoined())}case"RECV":{const V=v;if(V[1]>>>=0,"string"!=typeof V[2])mr.messages&&console.log(this.id,"received META "+JSON.stringify(V)),this.convertReflectorMessage(V),mr.messages&&console.log(this.id,"converted to "+JSON.stringify(V));else try{const[a,v,Y]=this.decryptPayload(V[2]);V[2]=a,v===this.viewId&&this.addToStatistics(Y,this.lastReceived),mr.messages&&console.log(this.id,"received "+JSON.stringify(V))}catch(a){return void this.connection.closeConnectionWithError("RECV",Error(`failed to decrypt message: ${a.message}`),4200)}let Y;return this.networkQueue.push(V),this.flags.rawtime&&(Y=V[V.length-1]),this.timeFromReflector(V[0],"reflector",Y),void(this.simulateIfNeeded&&Promise.resolve().then((()=>this.simulateIfNeeded())))}case"TICK":{if(!this.vm)return;const a="number"==typeof v?v:v.time;if(mr.ticks){const v=V&&this.lastReceived-V-this.msPerTick*this.tickMultiplier|0;console.log(this.id,`Controller received TICK ${a} ${Math.abs(v)<5?"on time":v<0?"early":"late"} (${v} ms)`)}return this.timeFromReflector(a,"reflector"),this.tickMultiplier>1&&this.multiplyTick(a),void(this.simulateIfNeeded&&Promise.resolve().then((()=>this.simulateIfNeeded())))}case"INFO":{const{msg:a,options:V}=v;return void ce.showMessage(a,V)}case"REQU":return mr.snapshot&&console.log("received REQU (snapshot request) from reflector"),void(this.cpuTime=12345);default:console.warn("Unknown action:",a,v)}}install(a){const v=Date.now(),{snapshot:V,initFn:Y,options:P}=this.sessionSpec,[K,M]=V.modelsById?["deserializ","snapshot"]:["initializ","root model"];mr.session&&console.log(`${this.id} ${K}ing ${M}`);let H=new cl(V,(()=>{try{return Y(P,a)}catch(a){throw yt("init",a,"fatal"),a}}));if((mr.session||mr.snapshot&&V.modelsById)&&console.log(`${this.id} ${M} ${K}ed in ${Date.now()-v}ms`),mr.initsnapshot&&!V.modelsById){mr.snapshot&&console.log(`${this.id} exercising snapshot and restore after init()`);let v=null;try{v=JSON.stringify(H.snapshot())}catch(a){throw yt("initial snapshot",a,"fatal"),a}try{H=new cl(JSON.parse(v),(()=>Y(P)))}catch(a){throw yt("initial snapshot resume",a,"fatal"),a}}const I=this.lastKnownTime(H);this.reflectorTime=Math.max(this.reflectorTime,I),this.setVM(H)}setVM(a){this.vm=a,this.vm.controller=this}sendJoin(){this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),mr.session&&console.log(this.id,"Controller sending JOIN");const{tick:a,delay:v}=this.getTickAndMultiplier(),{name:V,codeHash:Y,appId:P,apiKey:K,persistentId:M,developerId:H,heraldUrl:I,rejoinLimit:F,autoSleep:z,computedCodeHash:N,flags:Q}=this.sessionSpec,{apiKey:j}=Ca(K),U={name:V,apiKey:j,appId:P,persistentId:M,url:ce.referrerURL(),sdk:cr,developerId:H,version:1,user:this.viewId,ticks:{tick:a,delay:v},dormantDelay:z,tove:this.tove,codeHash:Y};I&&Object.assign(U,{heraldUrl:I}),F&&Object.assign(U,{leaveDelay:F+250}),N!==Y&&Object.assign(U,{computedCodeHash:N}),Q&&Object.assign(U,{flags:Q}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:U})),this.syncReceiptTimeout=setTimeout((()=>{delete this.syncReceiptTimeout,this.syncReceived||this.connection.closeConnectionWithError("join",Error("SYNC not received in time"))}),5e3)}clearSyncReceiptTimeout(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}connectionInterrupted(){this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout((()=>{mr.session&&console.log(this.id,"rejoin timed out"),this.rejoinTimeout=0,this.leave()}),this.sessionSpec.rejoinLimit)))}leave(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{rebootModelView:v}=this.sessionSpec;if(this.reset(),mr.session&&console.log(this.id,`resetting ${a?"(but keeping)":"and discarding"} controller`),a||Gr.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");v()}async encrypt(a){const v=A.random(16),V=fi.encrypt(a,this.key,{iv:v}),Y=Xi(a,this.key);return`${bi.stringify(v)}${bi.stringify(Y)}${V}`}get deprecatedDefaultKey(){return yr||(yr=Zi("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),yr}decrypt(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.key;const V=bi.parse(a.slice(0,24)),Y=bi.parse(a.slice(24,68)),P=a.slice(68),K=fi.decrypt(P,v,{iv:V});let M="";try{M=yi.stringify(K)}catch(a){}const H=Xi(M,this.key);if(this.compareHmacs(Y.words,H.words))return M;if(v!==this.deprecatedDefaultKey)return this.decrypt(a,this.deprecatedDefaultKey);throw Error("Decryption error")}decryptBinary(a,v){const V=(new TextDecoder).decode(new Uint8Array(a,0,4));let Y,P,K,M,H;switch("string"==typeof v&&(v=bi.parse(v)),V){case"CRQ0":Y=(new TextDecoder).decode(a),P=bi.parse(Y.slice(4,28)),K=bi.parse(Y.slice(28,72)),M=Y.slice(72),H=fi.decrypt(M,v,{iv:P});break;case"CRQ1":Y=new Uint8Array(a),P=A.create(Y.subarray(4,20)),K=A.create(Y.subarray(20,52)),M=A.create(Y.subarray(52)),H=fi.decrypt({ciphertext:M},v,{iv:P});break;default:throw Error(`${this.id} unknown encryption version ${V}`)}H.clamp();const I=Xi(H,v);if(this.compareHmacs(K.words,I.words))return G(H);if(v!==this.deprecatedDefaultKey)return this.decryptBinary(a,this.deprecatedDefaultKey);throw Error("Decryption error")}async encryptMessage(a,v,V){const[Y,P,K]=a.asState();return[Y,P,await this.encryptPayload([K,v,V])]}async encryptPayload(a){return this.encrypt(JSON.stringify(a))}decryptPayload(a){return JSON.parse(this.decrypt(a))}compareHmacs(a,v){let V=a.length===v.length;for(let Y=0;Y<a.length;Y++)a[Y]!==v[Y]&&(V=!1);return V}sendMessage(a){if(this.viewOnly||!this.vm)return;const v=a.asState()[2].length;if(v>16384)return void console.warn(`${this.id} Message with payload of ${v} bytes exceeds maximum 16384 and will not be sent to reflector.`);!this.payloadSizeWarned&&v>4096&&(console.log(`${this.id} Message with payload of ${v} bytes being sent to reflector. Maximum recommended is 4096.`),this.payloadSizeWarned=!0);const V=Date.now(),Y=this.rateLimitedSendTimes,P=this.rateLimitBuffer;if(Bt.perSecondTally({requestedMessages:1}),P.length)return void this.addToRateLimitBuffer(a);let K=0;if(Y.length&&this.synced){const a=Y[Y.length-1],v=1e3/this.eventRateLimit-(V-a);v>1&&(K=Math.ceil(v))}K?(this.addToRateLimitBuffer(a),setTimeout((()=>this.serviceRateLimitBuffer()),K)):(this.recordRateLimitedSend(V),this.socketSendMessage(a),Bt.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:v}))}recordRateLimitedSend(a){const v=this.rateLimitedSendTimes;!this.synced&&v.length&&v[v.length-1]===a||(v.push(a),v.length>this.eventHistoryLimit&&v.shift()),!this.rateLimitSoftWarned&&v.length===this.eventHistoryLimit&&a-v[0]<1010&&(console.warn(`${this.id} Sends to reflector are at or above recommended limit of ${this.eventHistoryLimit} within one second. Events will be bundled as necessary to keep to the limit.`),this.rateLimitSoftWarned=!0)}addToRateLimitBuffer(a){Bt.perSecondTally({bundledMessages:1});const v=Date.now(),V=a.asState(),Y=V[2].length,P=this.rateLimitBuffer;if(P.length){const a=P[P.length-1],{msgStates:K,totalPayload:M}=a;if(M<4096)return K.push({msgState:V,bufferTime:v}),void(a.totalPayload+=Y)}Bt.perSecondTally({newBundles:1}),P.push({msgStates:[{msgState:V,bufferTime:v}],totalPayload:Y});const K=P.length;mr.session&&K%5==0&&K!==this.rateLimitLastLogged&&(console.log(`${this.id} SEND rate-limit buffer grew to ${K} event bundles (max ${this.eventMaxBundles})`),this.rateLimitLastLogged=K),K>this.eventMaxBundles?(console.error(`${this.id} Disconnecting after overflow of SEND rate-limit buffer.`),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&K>this.eventMaxBundles/2&&(console.warn(`${this.id} SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.`),this.rateLimitBufferWarned=!0)}serviceRateLimitBuffer(){if(!this.connected)return;const a=this.rateLimitBuffer;if(!a.length)return;const v=Date.now(),V=1e3/this.eventRateLimit,Y=this.rateLimitedSendTimes;if(Y.length){const a=Y[Y.length-1];if(V-(v-a)>0)return}const P=a.shift(),{msgStates:K,totalPayload:M}=P,H=[];let I=0;if(K.forEach((a=>{H.push(a.msgState),I+=v-a.bufferTime})),1===H.length){const a=ml.fromState(H[0],this.vm);this.socketSendMessage(a)}else{const a=new ml(this.vm.time,0,"_","handleBundledEvents",[H]);this.socketSendMessage(a)}if(this.recordRateLimitedSend(v),Bt.perSecondTally({sentBundles:1,sentMessagesTotal:K.length,sendDelay:I,sentBundlePayload:M,sentPayloadTotal:M}),mr.session&&this.connected){const v=a.length;v&&v%5==0&&v!==this.rateLimitLastLogged&&(console.log(`${this.id} SEND rate-limit buffer dropped to ${v} event bundles`),this.rateLimitLastLogged=v)}a.length&&setTimeout((()=>this.serviceRateLimitBuffer()),V)}async socketSendMessage(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const V=await this.encryptMessage(a,this.viewId,Date.now()),Y=v?`tagged SEND ${a.asState()} with tags ${JSON.stringify(v)}`:`SEND ${a.asState()}`;if(!this.connected)return void(this.vm&&(mr.sends&&console.log(this.id,`buffering ${Y}`),this.sendBuffer.push((()=>this.socketSendMessage(a,v)))));mr.sends&&console.log(this.id,`sending ${Y}`);const P={id:this.id,action:"SEND",args:[...V,this.latency]};v&&(P.tags=v),this.lastSent=Date.now(),this.connection.send(JSON.stringify(P))}async sendTagged(a,v){this.viewOnly||this.socketSendMessage(a,v)}async sendTutti(a){let{time:v,topic:V,data:Y,localContext:P=null,firstMessage:K=null,wantsVote:M=!0,tallyTarget:H=null}=a;if(this.viewOnly)return;const I=K&&await this.encryptMessage(K,this.viewId,Date.now()),F=y(Y);if(!this.connected)return void(this.vm&&(mr.sends&&console.log(this.id,`buffering "${V}" TUTTI ${F} ${K&&K.asState()}`),this.sendBuffer.push((()=>this.sendTutti({time:v,topic:V,data:Y,localContext:P,firstMessage:K,wantsVote:M,tallyTarget:H})))));mr.sends&&console.log(this.id,`sending "${V}" TUTTI ${F} ${K&&K.asState()}`),this.lastSent=Date.now();const z=`${V}@${v}`;this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[v,0,F,I,M,H,z]})),this.tuttiHistory.length>100&&this.tuttiHistory.shift(),this.tuttiHistory.push({time:v,tuttiKey:z,dummyTuttiSeq:0,payload:F,localContext:P})}sendLog(){for(var a=arguments.length,v=new Array(a),V=0;V<a;V++)v[V]=arguments[V];this.connected?(mr.sends&&console.log(this.id,"sending LOG"),v.length<2&&(v=v[0]),this.connection.send(JSON.stringify({action:"LOG",args:v}))):this.vm&&(mr.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push((()=>this.sendLog(...v))))}addToStatistics(a,v){this.latency=v-a,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:v,ms:this.latency}))}get latencies(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}getTickAndMultiplier(){const a=this.sessionSpec.options,v=["number","string"].includes(typeof a.tps)?a.tps:["number","string"].includes(typeof this.sessionSpec.tps)?this.sessionSpec.tps:20,[V,Y]=(v+"x").split("x").map((a=>Number.parseFloat("0"+a))),P=1e3/Math.max(1/30,Math.min(60,V)),K=Math.max(1,Y);let M=P,H=0;return K>1&&!pr&&(M=P/K,H=Math.ceil(M*(K-1))),{msPerTick:M,multiplier:K,tick:P,delay:H}}simulate(a){if(!this.vm)return!0;try{let v=!0;if(this.networkQueue.length+this.vm.messages.size===0)v=this.vm.advanceTo(this.reflectorTime,a);else{const V=Bt.begin("simulate");for(;v;){const V=this.networkQueue[0];if(!V)break;if(v=this.vm.advanceTo(V[0],a),!v)break;this.networkQueue.shift();const Y=this.vm.scheduleExternalMessage(V);v=this.vm.advanceTo(Y.time,a),this.cpuTime+=5}v&&(v=this.vm.advanceTo(this.reflectorTime,a)),this.cpuTime+=Math.max(.01,Bt.end("simulate")-V)}Bt.backlog(this.backlog);const V=this.lag,Y=Math.max(200,.1*this.msPerTick),P=Math.max(2e3,.2*this.msPerTick);return"boolean"==typeof this.synced&&this.viewed&&(this.synced&&V>P||!this.synced&&V<Y)&&(this.synced?this.applySyncChange(!1):this.syncTimer||(this.syncTimer=setTimeout((()=>{delete this.syncTimer,this.connected&&this.lag<Y&&this.applySyncChange(!0)}),200))),this.synced&&v&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout((()=>this.scheduleSnapshot()),Math.floor(2e3*Math.random())):this.scheduleSnapshot()),v}catch(a){return yt("simulate",a),this.connection.closeConnectionWithError("simulate",a),"error"}}stepSession(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const V=Bt.stepSession(v.frameTime,!0);V&&console.log(V);const{backlog:Y,latency:P,starvation:K,activity:M}=this;if("animation"===a){Bt.animationFrame(v.frameTime,{backlog:Y,starvation:K,latency:P,activity:M,users:this.users});const a=Date.now();if(this.lastAnimationEnd){const v=a-this.lastAnimationEnd;if(!0===this.animationGapCheck&&v>200&&(this.animationGapCheck=[],mr.session&&console.log(`${this.id} animation has stopped (too long between steps)`)),!0!==this.animationGapCheck){const a=this.animationGapCheck;a.push(v),a.length>4&&a.shift(),4===a.length&&a.reduce(((a,v)=>a+v),0)<=400&&(this.animationGapCheck=!0,mr.session&&console.log(`${this.id} animation has started`))}}this.lastAnimationEnd=a}if(!this.connected)return void(this.isInBackground()||this.checkForConnection(!0));if(!this.vm)return;let H;switch(a){case"animation":{const a=v.expectedSimFPS,V=Date.now(),Y=br.reduce(((a,v)=>a+v),0)/br.length;if(H=this.simulate(V+Math.min(Y,200)),!1===H){const v=0===a?0:1e3/a*4;this.backlog>v&&(H=this.simulate(V+200-Y))}"error"!==H&&(br.push(Date.now()-V),br.length>4&&br.shift());break}case"fastForward":case"background":H=this.simulate(Date.now()+v.budget);break;default:console.warn(a)}this.fastForwardHandler&&this.fastForwardHandler(H),"error"!==H&&(Bt.begin("update"),this.processModelViewEvents("animation"===a),Bt.end("update"),this.serviceRateLimitBuffer(),"animation"===a&&(v.view&&(Bt.begin("render"),this.inViewRealm((()=>v.view.update(v.frameTime))),Bt.end("render")),this.lastAnimationEnd=Date.now()))}applySyncChange(a){mr.session&&console.log(this.id,`synced=${a}`),this.synced=a,ce.showSyncWait(!a),this.vm.publishFromView(this.viewId,"synced",a)}inViewRealm(a){return Ft(this.vm,(()=>a(this.vm)))}processModelViewEvents(a){return this.vm?this.vm.processModelViewEvents(a):0}timeFromReflector(a,v,V){a<this.reflectorTime?("controller"!==v||mr.ticks)&&console.warn(`time is ${this.reflectorTime}, ignoring time ${a} from ${v}`):("boolean"!=typeof this.synced&&(this.synced=!1),this.reflectorTime=a,this.extrapolatedTimeBase=Date.now()-a,this.vm&&Bt.backlog(this.backlog),this.tickHook&&this.tickHook(a,V))}multiplyTick(a){this.localTicker&&globalThis.clearInterval(this.localTicker);const v=this.msPerTick,V=this.tickMultiplier;let Y=1;this.localTicker=globalThis.setInterval((()=>{this.timeFromReflector(Math.round(a+Y*v),"controller"),mr.ticks&&console.log(this.id,"Controller generate TICK "+this.reflectorTime,Y),++Y>=V&&(globalThis.clearInterval(this.localTicker),this.localTicker=0)}),v)}startStepping(a){const e=v=>{this.leaving||(this.isOutOfSight()||a(v),window.requestAnimationFrame(e))};window.requestAnimationFrame(e)}setUpActivityChecks(){let a=null;this.isOutOfSight=()=>!(dr||"hidden"!==document.visibilityState&&a),this.isBeingAnimated=()=>{const a=!0===this.animationGapCheck,v=Date.now()-this.lastAnimationEnd<200;return a&&!v&&(this.animationGapCheck=[],mr.session&&console.log(`${this.id} animation has stopped (too long since last step)`)),a&&v},this.isInBackground=()=>this.isOutOfSight()||!this.isBeingAnimated(),dr||new IntersectionObserver(((v,V)=>a=v[0].isIntersecting)).observe(document.body);const v=this.sessionSpec.autoSleep;let V;if(v){const a=1e3*v;let Y=0,P=0;V=()=>{const v=Date.now();v-Y<980||(Y=v,this.isOutOfSight()?P?v-P>a&&(this.dormantDisconnect(),P=0):P=v:P=0)}}const n=()=>{this.leaving?Y&&(clearInterval(Y),Y=null):this.connected&&this.vm&&(V&&V(),this.isBeingAnimated()||this.connection.keepAlive(Date.now()))};let Y=setInterval(n,1e3);this.simulateIfNeeded=()=>{if(!this.isBeingAnimated()&&(n(),!this.fastForwardHandler&&this.connected)){let a=.9*this.msPerTick;v&&(a=Math.min(a,200));const V=this.synced?"background":"fastForward";this.stepSession(V,{budget:a})}}}toString(){return`Controller[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}class Fa{constructor(a){this.controller=a,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}get id(){return this.controller.id}setTick(a){this.missingTickThreshold=Math.min(3*a,45e3)}get connected(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}checkForConnection(a){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!a||this.connectToReflector()}connectToReflector(){if(this.socket||this.connectHasBeenCalled)return;this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;let a=Ca(this.controller.sessionSpec.apiKey).reflector;const v={},V=this.controller.sessionSpec.token;if(V&&(v.token=V),I.reflector){const V=I.reflector.toUpperCase();"CF"===V||V.match(/^[A-Z]{3}$/)?(a=mr.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",3===V.length&&(v.colo=V)):I.reflector.match(/^[-a-z0-9]+$/i)?v.region=I.reflector:a=I.reflector}if(!a.match(/^wss?:/))throw Error("Cannot interpret reflector address "+a);a.endsWith("/")||(a+="/");const Y=new URL(a+this.id);for(const[a,V]of Object.entries(v))Y.searchParams.append(a,V);const P=new WebSocket(Y);P.onopen=a=>{const v=this.socket;v&&(v.onopen=v.onmessage=v.onerror=v.onclose=null),this.socket=P,this.connectHasBeenCalled=!1,mr.session&&console.log(this.id,this.socket.constructor.name,"connected to",this.socket.url),this.reconnectDelay=0,Bt.connected(!0),this.controller.sendJoin()},P.onmessage=a=>{Bt.addNetworkTraffic("reflector_in",a.data.length),P===this.socket&&this.receive(a.data)},P.onerror=a=>{mr.session&&console.log(this.id,P.constructor.name,"connection error"),this.connectHasBeenCalled=!1,this.controller.clearSyncReceiptTimeout()},P.onclose=a=>{this.socketClosed(a.code,a.reason)}}socketClosed(a,v){this.controller.clearSyncReceiptTimeout();const V=1e3!==a&&a<4100,Y=4110===a;Y||1e3===a||this.reconnectDelay||setTimeout((()=>{this.connected||ce.showMessage(`Connection closed: ${a} ${v}`,{level:V?"error":"fatal"})}),500),mr.session&&console.log(this.id,`${this.socket?this.socket.constructor.name+" closed":"closed before opening,"} with code: ${a} ${v}`),Bt.connected(!1),Y?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),V&&(mr.session&&console.log(this.id,`reconnecting in ${this.reconnectDelay} ms`),this.reconnectTimeout=globalThis.setTimeout((()=>{delete this.reconnectTimeout,this.connectToReflector()}),this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}disconnected(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}send(a){this.socketLastSent=Date.now(),this.socket.send(a),Bt.addNetworkTraffic("reflector_out",a.length)}receive(a){this.lastReceived=Date.now();const{id:v,action:V,args:Y}=JSON.parse(a);if(v)try{this.controller.receive(V,Y)}catch(a){this.closeConnectionWithError("receive",a)}else if("PONG"===V){if(mr.pong&&console.log("PONG after",Date.now()-Y,"ms"),this.pongHook)try{this.pongHook(Y)}catch(a){console.error(a)}}else console.warn("Unknown action",V)}dormantDisconnect(){this.connected&&(mr.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}closeConnectionWithError(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;console.error(v),console.warn("closing socket"),V>=4100&&4110!==V&&(this.controller.leaving=()=>{}),this.closeConnection(V,"Error in "+a)}closeConnection(a,v){this.socket&&(this.socket.onclose=null,this.socket.close(a,v),this.socketClosed(a,v))}PULSE(a){this.connected&&(0===this.socket.bufferedAmount?(this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&a-this.stalledSince>500?console.log(`${this.id} Reflector connection stalled: ${this.socket.bufferedAmount} bytes unsent for ${a-this.stalledSince} ms`):this.stalledSince=Date.now())}keepAlive(a){0!==this.lastReceived&&(a-this.socketLastSent>25e3?this.PULSE(a):a-this.lastReceived>5e4?this.closeConnectionWithError("connection",Error("Reflector has gone away")):a-this.lastReceived>this.missingTickThreshold&&this.PULSE(a))}PING(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.connected&&this.send(JSON.stringify({action:"PING",args:a}))}}globalThis.setInterval((()=>{for(const a of Gr)a.connected&&a.vm&&a.connection.keepAlive(Date.now())}),100);const Lr=Symbol("hash"),xr=Symbol("key"),gr=Symbol("url"),Sr=new Map;function Ea(a){return I.has("debug",a,!1)}function Ja(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ua(a){return a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+3&-4,"=")}function Da(a,v){return v.replace(/[\s\S]/g,(v=>String.fromCharCode(v.charCodeAt(0)^a.charCodeAt(0))))}class Oa{static async store(a,v){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"==typeof a&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),v=a),cl.hasCurrent())throw Error("Croquet.Data.store() called from Model code");const{appId:Y,persistentId:P,uploadEncrypted:K}=Ha(a),M=A.random(32).toString(bi),H=`apps/${Y}/${P}/data/%HASH%`,I=await K({path:H,content:v,key:M,keep:V,debug:Ea("data"),what:"data"}),F=function(a){return a.replace(/.*\//,"")}(I);return new Oa(F,M,I)}static async fetch(a,v){if("object"==typeof a&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),v=a),cl.hasCurrent())throw Error("Croquet.Data.fetch() called from Model code");const{downloadEncrypted:V}=Ha(a),Y=v&&v[Lr],P=v&&v[xr],K=v&&v[gr];if("string"!=typeof Y||"string"!=typeof P||"string"!=typeof K)throw Error("Croquet.Data.fetch() called with invalid handle");return V({url:K,key:P,debug:Ea("data"),what:"data"})}static hash(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64url";"function"==typeof a&&(a=Function.prototype.toString.call(a)),"string"==typeof a?a=(new TextEncoder).encode(a):a&&a.constructor===DataView?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a&&a.constructor===ArrayBuffer?a=new Uint8Array(a):ArrayBuffer.isView(a)||(a=(new TextEncoder).encode(y(a)));const V=st(A.create(a));switch(v){case"hex":return V.toString();case"base64":return V.toString(bi);case"base64url":return Ja(V.toString(bi));default:throw Error(`Croquet.Data: unknown hash output "${v}", expected "hex"/"base64"/"base64url"`)}}static fromId(a){const v=a.slice(0,1);let V,Y,P,K;switch(v){case"0":V=a.slice(1,44),Y=a.slice(44),P=`https://files.croquet.io/sessiondata/${V}`;break;case"1":V=a.slice(1,44),Y=a.slice(44,87)+"=",K=a.slice(87),P=`https://files.croquet.io/apps/${K}/data/${V}`;break;case"2":V=a.slice(1,44),Y=Ua(a.slice(44,87)),K=Da(Y,atob(Ua(a.slice(87)))),P=`https://files.croquet.io/apps/${K}/data/${V}`;break;case"3":Y=Ua(a.slice(1,44)),P=Da(Y,atob(Ua(a.slice(44)))),V=P.slice(-43);break;default:throw Error(`Croquet.Data expected handle v0-v3 got v${v}`)}return new this(V,Y,P)}static toId(a){if(!a)return"";const v=a[Lr],V=a[xr],Y=a[gr];if(Y.slice(-43)!==v)throw Error("Croquet Data: malformed URL");return`3${Ja(V)}${Ja(btoa(Da(V,Y)))}`}constructor(a,v,V){const Y=Sr.get(a);if(Y)return Ea("data")&&console.log(`Croquet.Data: using cached handle for ${a}`),Y;if(V.slice(-43)!==a)throw Error("Croquet Data: malformed URL");Object.defineProperty(this,Lr,{value:a}),Object.defineProperty(this,xr,{value:v}),Object.defineProperty(this,gr,{value:V}),Sr.set(a,this),Ea("data")&&console.log(`Croquet.Data: created new handle for ${a}`)}}const Wr={cls:Oa,write:a=>Oa.toId(a),read:a=>Oa.fromId(a)};let Vr=null,Yr=null;class qa extends Error{}function tl(){if(!globalThis.CroquetViewMath){globalThis.CroquetMath.random=()=>Vr.random(),globalThis.CroquetViewMath={...Math};for(const[a,v]of Object.entries(globalThis.CroquetMath)){const V=Math[a];Math[a]=1===v.length?a=>Vr?v(a):V(a):(a,Y)=>Vr?v(a,Y):V(a,Y)}}if(!globalThis.CroquetViewDate){const Y=globalThis.Date;let P=!1;function o(a,v){return P||(P=!0,console.warn(new qa(`${a} used in Model code`))),v}function r(a,v,V,P,K,M,H){const I=this instanceof r,F=[a,v,V,P,K,M,H];if(F.length=arguments.length,Vr)switch(o(I?"new Date()":"Date()"),arguments.length){case 0:F.push(Vr.time);break;case 1:break;default:F[0]=Y.UTC(...F),F.length=1}const z=new Y(...F);return I?z:""+z}r.prototype=Y.prototype,r.UTC=Y.UTC,r.now=()=>Vr?o("Date.now()",Vr.time):Y.now(),r.parse=function(){return Vr?o("Date.parse()",0):Y.parse(...arguments)},globalThis.CroquetViewDate=Y,globalThis.Date=r}}Object.defineProperty(qa.prototype,"name",{value:"CroquetWarning"});const Tr={};function sl(a,v){const{qPara:V,qArgs:Y,qFn:P}=JSON.parse(atob(a.slice(1,-1))),K=JSON.stringify(V),M=Tr[K]||(Tr[K]=new Function(...V));return"number"==typeof P&&(Y[P]=M),M.call(v,...Y).bind(v)}function nl(a,v){if(Vr)throw Error("VirtualMachine confusion");if(!(a instanceof cl))throw Error("not a VM: "+a);const V=Vr;try{Vr=a,globalThis.CROQUETVM=a,v()}finally{Vr=V}}const Cr=["handleModelEventInModel","handleBundledEvents","publishFromModelOnly","handlePollForSnapshot","handleTuttiResult","handleTuttiDivergence","handleSnapshotVote","handlePersistVote","handleModelEventInView","noop"],Pr={};for(let a=0;a<Cr.length;a++)Pr[Cr[a]]=a;const Kr=new WeakMap;function al(a){Kr.set(a,null)}class ll{random(){throw Error("Math.random() cannot be used in Model.evaluate()")}}class cl{static current(){return Vr||console.warn("VirtualMachine.current() called from outside the vm!"),Vr}static hasCurrent(){return!!Vr}static evaluate(a){if(Vr)return a();tl();const v=Vr;try{return Vr=new ll,a()}finally{Vr=v}}constructor(a,v){tl(),Yr={snapshot:I.has("debug","snapshot",!1),session:I.has("debug","session",!1)},al(this),nl(this,(()=>{zt(this,(()=>{if(this.modelsById={},this.modelsByName={},this.messages=new ci(((a,v)=>a.before(v))),this.subscriptions={},this.subscribers=new Map,this.views={},this._random=()=>{throw Error("You must not use random when applying state!")},this.id=a.id,this.time=0,this.seq=4294967280,this.externalTime=0,this.externalSeq=this.seq,this.futureSeq=0,this.lastSnapshotPoll=0,this.lastPersistencePoll=0,this.inPersistenceCoolOff=!1,this.persisted="",this.modelsId=0,this.controller=null,a.modelsById){const v=yl.newOrRecycled(this).readVM(a,"vm");let V=[];for(const a of Object.keys(v))a in this||"meta"===a?"messages"===a?V=v.messages:this[a]=v[a]:console.warn(`Ignoring property snapshot.${a}`);for(const a of V)this.messages.add(a.convertIfNeeded(this));for(const[a,v]of Object.entries(this.subscriptions))for(const V of v){const[v]=V.split(".");let Y=this.subscribers.get(v);Y||this.subscribers.set(v,Y=new Set),Y.add(a)}}else this._random=new _(a.id,{state:!0}),this.addSubscription(this,"__VM__","__peers__",this.generateJoinExit),v(this)}))}))}registerModel(a,v){if(Vr!==this)throw Error("You can only create models from model code!");return v||(v="M"+ ++this.modelsId),this.modelsById[v]=a,v}deregisterModel(a){if(Vr!==this)throw Error("You can only destroy models from model code!");const v=this.modelsById;delete this.modelsById[a];for(const[a,V]of Object.entries(this.modelsByName))v===V&&delete this.modelsByName[a];this.messages.removeMany((v=>v.hasReceiver(a)))}lookUpModel(a){if("_"===a)return this;const v=this.modelsById[a];if(v)return v;const[V,Y,P]=a.match(/^([^#]+)#(.*)$/);return this.modelsById[Y].lookUp(P)}get(a){return this.modelsByName[a]}set(a,v){if(Vr!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[a]=v}noop(){}generateJoinExit(a){let{entered:v,exited:V,count:Y}=a;if(v.length===Y){V=Object.keys(this.views);for(const a of V)this.views[a].extraConnections=0}if(0!==v.length&&0!==V.length){const a=v.filter((a=>V.includes(a)));if(0!==a.length&&(v=v.filter((v=>!a.includes(v))),V=V.filter((v=>!a.includes(v))),0===v.length&&0===V.length))return}for(const a of V)if(this.views[a]){if(this.views[a].extraConnections){this.views[a].extraConnections--,Yr.session&&console.log(`${this.id} @${this.time}#${this.seq} view ${a} closed extra connection`);continue}delete this.views[a],this.publishFromModelOnly(this.id,"view-exit",a)}else console.error(`${this.id} @${this.time}#${this.seq} view ${a} exited without being present - this should not happen`),this.controller.sendLog(`view-exit-mismatch @${this.time}#${this.seq} ${a} left without being present`);for(const a of v)this.views[a]?(Yr.session&&console.log(`${this.id} @${this.time}#${this.seq} view ${a} opened another connection`),this.views[a].extraConnections=(this.views[a].extraConnections||0)+1):(this.views[a]={},this.publishFromModelOnly(this.id,"view-join",a));const P=Object.values(this.views).reduce(((a,v)=>a+1+(v.extraConnections||0)),0);Y!==P&&(console.error(`@${this.time}#${this.seq} view count mismatch (model: ${P}, reflector: ${Y}) - this should not happen`),this.controller.sendLog(`view-exit-mismatch @${this.time}#${this.seq} connections model: ${P} reflector: ${Y}`))}scheduleExternalMessage(a){const v=ml.fromState(a,this);if(v.time<this.time)throw Error("past message from reflector "+a);const V=this.externalSeq+1>>>0;if(v.seq!==V)throw Error(`External message error. Expected message #${V} got #${v.seq}`);return this.externalTime=v.time,this.externalSeq=v.seq,v.seq=2*v.seq+1,this.verifyExternal(v),this.messages.add(v),v}verifyExternal(a){if("_"!==a.receiver)throw Error(`invalid receiver in external message: ${a}`);if(!(a.selector in Pr))throw Error(`unexpected external message: ${a.selector}`)}futureSend(a,v,V,Y){if(a.every)return this.futureRepeat(a.every,v,V,Y);if(a<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;const P=new ml(this.time+a,2*this.futureSeq,v,V,Y);return this.messages.add(P),P}cancelFuture(a,v){const V=this.messages;let Y;if("time"in v){const{time:a,seq:P}=v;Y=V.removeOne((v=>v.time===a&&v.seq===P))}else{const P=this.asQFunc(a,v,"cancelFuture message"),K=a.id;Y=V.removeOne((a=>a.receiver===K&&a.selector===P||"_"===a.receiver&&"futureExecAndRepeat"===a.selector&&a.args[1]===K&&a.args[2]===P))}return void 0!==Y}futureRepeat(a,v,V,Y){this.futureSend(a,"_","futureExecAndRepeat",[a,v,V,Y])}futureExecAndRepeat(a,v,V,Y){const P=this.lookUpModel(v);if("function"==typeof P[V])try{P[V](...Y)}catch(a){yt(`future message ${P}.${V}`,a)}else{const a=sl(V,P);try{a(...Y)}catch(v){yt(`future message ${P} ${a}`,v)}}this.futureRepeat(a,v,V,Y)}future(a,v,V,Y){const P=this.asQFunc(a,V,"future message");if("string"==typeof P)return this.futureSend(v,a.id,P,Y);const K=this;return new Proxy(a,{get(V,Y){if("function"==typeof a[Y])return function(){if(K.lookUpModel(a.id)!==a)throw Error("future send to unregistered model");for(var V=arguments.length,P=new Array(V),M=0;M<V;M++)P[M]=arguments[M];return K.futureSend(v,a.id,Y,P)};throw Error("Tried to call "+Y+"() on future of "+Object.getPrototypeOf(a).constructor.name+" which is not a function")}})}advanceTo(a,v){if(Vr)throw Error("cannot advance time from model code");let V;for(;(V=this.messages.peek())&&V.time<=a;){const{time:a,seq:Y}=V;if(a<this.time)throw Error("past message encountered: "+V);if(1&Y&&(this.seq=this.seq+1>>>0,Y/2>>>0!==this.seq))throw Error(`Sequence error: expected ${this.seq} got ${Y/2>>>0} in ${V}`);if(this.messages.poll(),this.time=V.time,V.executeOn(this),globalThis.CroquetViewDate.now()>=v)return!1}return this.time=a,!0}asQFunc(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"subscription handler";if("string"==typeof v)return v;if("function"==typeof v){if(a[v.name]===v)return v.name;let Y=a;for(;null!==Y;){for(const[a,V]of Object.entries(Object.getOwnPropertyDescriptors(Y)))if(V.value===v)return a;Y=Object.getPrototypeOf(Y)}ft(`${V} is not a method of ${a}: ${v}\n`,{only:"once"});const P=/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i,K=v.toString().match(P);return!K||K[3]&&K[3]!==K[1]?function(a,v){"function"==typeof a&&(v=a,a={});const V=Object.keys(a).concat(["return "+v]),Y=Object.values(a),P={qPara:V,qArgs:Y},K=Y.indexOf(v);return K>=0&&(Y[K]=V[K],P.qFn=K),`{${btoa(JSON.stringify(P))}}`}(v):K[2]}return null}addSubscription(a,v,V,Y){if(Vr!==this)throw Error("Cannot add a model subscription from outside model code");const P=this.asQFunc(a,Y);if("string"!=typeof P)throw Error(`Subscription handler for "${V}" must be a method name`);if(P.indexOf(".")<0&&"function"!=typeof a[P]&&"{"!==P[0])throw Error(`Subscriber method for "${V}" not found: ${a}.${P}()`);const K=v+":"+V,M=a===this?"_":a.id,H=M+"."+P;if(this.subscriptions[K]){if(-1!==this.subscriptions[K].indexOf(H))throw Error(`${a}.${P} already subscribed to ${V}`)}else this.subscriptions[K]=[];this.subscriptions[K].push(H);let I=this.subscribers.get(M);I||this.subscribers.set(M,I=new Set),I.add(K)}removeSubscription(a,v,V){let Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";if(Vr!==this)throw Error("Cannot remove a model subscription from outside model code");const P=v+":"+V,K=this.subscriptions[P];if(K){const v=a.id+".";if("*"===Y){for(let a=K.length-1;a>=0;a--)K[a].startsWith(v)&&K.splice(a,1);0===K.length&&delete this.subscriptions[P]}else{const M=this.asQFunc(a,Y);if("string"!=typeof M)throw Error(`Invalid unsubscribe args for "${V}" in ${a}: ${Y}`);const H=v+M,I=K.indexOf(H);if(-1!==I&&(K.splice(I,1),0===K.length&&delete this.subscriptions[P]),K.find((a=>a.startsWith(v))))return}const M=this.subscribers.get(a.id);M.delete(P),0===M.size&&this.subscribers.delete(a.id)}}removeAllSubscriptionsFor(a){const v=this.subscribers.get(a.id);if(v){const V=a.id+".";for(const a of v){const v=this.subscriptions[a];for(let a=v.length-1;a>=0;a--)v[a].startsWith(V)&&v.splice(a,1);0===v.length&&delete this.subscriptions[a]}this.subscribers.delete(a.id)}}publishFromModel(a,v,V){if(Vr!==this)throw Error("Cannot publish a model event from outside model code");const Y=v.endsWith("#reflected");Y&&(v=v.slice(0,v.length-10));const P=a+":"+v;this.handleModelEventInModel(P,V,Y),this.handleModelEventInView(P,V)}publishFromModelOnly(a,v,V){if(Vr!==this)throw Error("Cannot publish a model event from outside model code");const Y=a+":"+v;this.handleModelEventInModel(Y,V)}publishFromView(a,v,V){if(Vr)throw Error("Cannot publish a view event from model code");const Y=a+":"+v;this.handleViewEventInModel(Y,V),this.handleViewEventInView(Y,V)}handleBundledEvents(a){for(const v of a){const a=ml.fromState(v,this);this.verifyExternal(a),a.executeOn(this,!0)}}handleModelEventInModel(a,v){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vr!==this)throw Error("handleModelEventInModel called from outside model code");if(V){if(!0!==this.controller.synced)return;const V=a+"#__vote",Y=a+"#divergence",P=!!de.subscriptions[V],K=!!this.subscriptions[a],M=!!this.subscriptions[Y];P&&M&&console.log(`divergence subscription for ${a} overridden by vote subscription`);const H=K?new ml(this.time,0,"_","handleModelEventInModel",[a,v]):null;let I;I=P?["handleModelEventInView",V]:["handleTuttiDivergence",Y],Promise.resolve().then((()=>this.controller.sendTutti({time:this.time,topic:a,data:v,firstMessage:H,wantsVote:P,tallyTarget:I})))}else if(this.subscriptions[a])for(const V of this.subscriptions[a]){const[Y,...P]=V.split("."),K=P.join("."),M=this.lookUpModel(Y);if(M)if("{"!==K[0])if(K.indexOf(".")>=0){const V=K.indexOf("."),Y=K.slice(0,V),P=K.slice(V+1);try{M.call(Y,P,v)}catch(v){yt(`event ${a} ${M}.call(${JSON.stringify(Y)}, ${JSON.stringify(P)})`,v)}}else if("function"==typeof M[K])try{M[K](v)}catch(v){yt(`event ${a} ${M}.${K}()`,v)}else yt(`event ${a} ${M}.${K}(): method not found`);else{const V=sl(K,M);try{V(v)}catch(v){yt(`event ${a} ${M} ${V}`,v)}}else ft(`event ${a} .${K}(): subscriber not found`)}}handleViewEventInModel(a,v){if(this.subscriptions[a]){const V=[a];void 0!==v&&V.push(v);const Y=new ml(this.time,0,"_","handleModelEventInModel",V);this.controller.sendMessage(Y)}}handleModelEventInView(a,v){de.handleEvent(a,v,(a=>function(a){if(!Vr)throw Error("VirtualMachine confusion");const v=Vr;try{Vr=null,a()}finally{Vr=v}}((()=>Ft(this,a,!0)))))}handleViewEventInView(a,v){de.handleEvent(a,v)}handleTuttiDivergence(a,v){if(this.subscriptions[a])this.handleModelEventInModel(a,v);else{const V=a.split(":").slice(-1)[0];console.warn(`uncaptured divergence in ${V}:`,v)}}processModelViewEvents(a){if(Vr)throw Error("cannot process view events in model code");return Ft(this,(()=>de.processFrameEvents(a,!!this.controller.synced)))}handlePollForSnapshot(){const a=this.time,v=a-this.lastSnapshotPoll;v<5e3?console.log(`rejecting snapshot poll ${v}ms after previous`):(this.lastSnapshotPoll=a,this.controller.handlePollForSnapshot(a))}handleTuttiResult(a){this.controller.handleTuttiResult(a)}handleSnapshotVote(a){this.controller.handleSnapshotVote(a)}handlePersistVote(a){this.controller.handlePersistVote(a)}snapshot(){return bl.newOrRecycled(this).snapshot(this,"_")}getSummaryHash(){return y((new fl).getHash(this))}persist(a,v){this.controller&&"no.appId"===this.controller.sessionSpec.appId&&console.warn("Croquet: appId should be provided in Session.join() to not overwrite another apps's persistent data");const V=Bt.begin("snapshot"),Y="function"==typeof v?v.call(a):v;if("object"!=typeof Y)throw Error(`Croquet: persistSession() can only persist objects (got ${typeof Y})`);const P=y(Y),K=Oa.hash(P),M=Bt.end("snapshot")-V,H=this.persisted===K,I=this.time;var F;if(Yr.snapshot&&console.log(`${this.id} persistent data @${I} collected, stringified and hashed in ${Math.ceil(M)}ms${H?" (unchanged, ignoring)":""}`),!H)if(this,F={persistTime:I,persistentString:P,persistentHash:K,ms:M},Kr.set(this,F),this.persisted=K,this.inPersistenceCoolOff)Yr.snapshot&&console.log(`${this.id} persistence poll postponed by cooloff`);else{const a=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;a>0?(Yr.snapshot&&console.log(`${this.id} postponing persistence poll by ${a}ms`),this.futureSend(a,"_","triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}triggerPersistencePoll(){this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;const a=(this,Kr.get(this));if(!a)return;const{persistTime:v,persistentString:V,persistentHash:Y,ms:P}=a;if(al(this),this.controller&&this.controller.synced){Yr.snapshot&&console.log(`${this.id} asking controller to poll for persistence @${v}`);const a=this.time;Promise.resolve().then((()=>this.controller.pollForPersist(a,v,V,Y,P)))}}random(){if(Vr!==this)throw Error("synchronized random accessed from outside the model");return this._random()}randomID(){if(Vr!==this)throw Error("synchronized random accessed from outside the model");let a="";for(let v=0;v<4;v++)a+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return a}toString(){return`VirtualMachine[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}function dl(a,v,V){let Y;if("_"===a){const a=Pr[v];"number"==typeof a&&(Y=a.toString(36))}if(void 0===Y&&(Y=`${a}>${v}`),V.length>0){const a=gl.newOrRecycled();Y+=JSON.stringify(a.encode(V))}return Y}function hl(a,v){let V,Y,P;if(1===a.length||"["===a[1]){const v=parseInt(a[0],36);V="_",Y=Cr[v],P=a.slice(1)}else{const v=a.indexOf(">");let K=a.indexOf("[");-1===K&&(K=a.length),V=a.slice(0,v),Y=a.slice(v+1,K),P=a.slice(K)}let K=[];return P&&(K=Zl.newOrRecycled(v).decode(JSON.parse(P))),{receiver:V,selector:Y,args:K}}function ul(a,v){return(v-a|0)>=0}class ml{constructor(a,v,V,Y,P){this.time=a,this.seq=v,this.receiver=V,this.selector=Y,this.args=P}convertIfNeeded(a){if(this.payload){const{receiver:v,selector:V,args:Y}=hl(this.payload,a);delete this.payload,this.receiver=v,this.selector=V,this.args=Y}return this}before(a){return this.time!==a.time?this.time<a.time:this.isExternal()!==a.isExternal()?a.isExternal():this.isExternal()?ul(this.externalSeq,a.externalSeq):ul(this.internalSeq,a.internalSeq)}hasReceiver(a){return this.receiver===a}isExternal(){return 1&this.seq}get externalSeq(){return this.seq/2>>>0}set externalSeq(a){this.seq=2*a+1}get internalSeq(){return this.seq/2>>>0}set internalSeq(a){this.seq=2*a}asState(){return[this.time,this.seq,dl(this.receiver,this.selector,this.args)]}static fromState(a,v){const[V,Y,P]=a,{receiver:K,selector:M,args:H}=hl(P,v);return new ml(V,Y,K,M,H)}executeOn(a){const v=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a=>a():v=>nl(a,(()=>zt(a,v))),{receiver:V,selector:Y,args:P}=this,K=a.lookUpModel(V);if(K)if("{"===Y[0]){const a=sl(Y,K);v((()=>{try{a(...P)}catch(v){yt(`${this.shortString()} ${a}`,v)}}))}else Y.indexOf(".")>=0?v((()=>{const a=Y.indexOf("."),v=Y.slice(0,a),V=Y.slice(a+1);try{K.call(v,V,...P)}catch(a){yt(`${this.shortString()} ${K}.call(${JSON.stringify(v)}, ${JSON.stringify(V)})`,a)}})):"function"!=typeof K[Y]?ft(`${this.shortString()} ${K}.${Y}(): method not found`):v((()=>{try{K[Y](...P)}catch(a){yt(`${this.shortString()} ${K}.${Y}()`,a)}}));else ft(`${this.shortString()} ${Y}(): receiver not found`)}shortString(){return(this.isExternal()?"External":"Future")+"Message"}toString(){const{receiver:a,selector:v,args:V}=this,Y=this.isExternal(),P=Y?this.externalSeq:this.internalSeq;return`${Y?"External":"Future"}Message[${this.time}${":#"[+Y]}${P} ${a}.${v}(${V.map(JSON.stringify).join(", ")})]`}[Symbol.toPrimitive](){return this.toString()}}const Rr=(()=>{const a=new ArrayBuffer(8),v=new DataView(a);return a=>(v.setFloat64(0,a,!0),v.getInt32(0,!0)+v.getInt32(4,!0))})();class fl{constructor(){this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",ml),this.addHasher("Teatime:Data",Wr);for(const[a,v]of Gl.allClassTypes())this.addHasher(a,v)}addHasher(a,v){const{cls:V,write:Y}=Object.getPrototypeOf(v)===Object.prototype?v:{cls:v,write:a=>({...a})};this.hashers.set(V,(a=>this.hashStructure(a,Y(a))))}getHash(a){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(const[v,V]of Object.entries(a))if("controller"!==v&&"meta"!==v)if("_random"===v)this.hash(V.state(),!1);else if("messages"===v){const a=V.asArray();(this.hashState.fC=a.length)&&this.hash(a,!1)}else this.hashEntry(v,V);return this.hashDeferred(),this.hashState}hashDeferred(){for(;this.todo.length>0;){const{key:a,value:v}=this.todo.shift();this.hashEntry(a,v,!1)}}hash(a){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof a){case"number":return void(Number.isNaN(a)?this.hashState.nanC++:Number.isFinite(a)?0===a?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Rr(a)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=a.length);case"boolean":case"undefined":return;default:if(this.refs.has(a))return;switch(Object.prototype.toString.call(a).slice(8,-1)){case"Array":return void this.hashArray(a,v);case"ArrayBuffer":return void this.hashIntArray(new Uint8Array(a),!1);case"Set":case"Map":return void this.hashStructure(a,[...a]);case"DataView":return void this.hashIntArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":return void this.hashIntArray(a,!1);case"Float32Array":case"Float64Array":return void this.hashArray(a,!1);case"Object":if(a instanceof Gl)this.hashModel(a);else if(a.constructor===Object)this.hashObject(a,v);else{const v=this.hashers.get(a.constructor);v&&v(a)}}}}hashModel(a){this.hashState.mC++,this.refs.set(a,!0);for(const[v,V]of Object.entries(a))"__realm"!==v&&void 0!==V&&this.hashEntry(v,V)}hashObject(a){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hashState.oC++,this.refs.set(a,!0);for(const[V,Y]of Object.entries(a))void 0!==Y&&this.hashEntry(V,Y,v)}hashArray(a){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.refs.set(a,!0);for(let V=0;V<a.length;V++)this.hashEntry(V,a[V],v)}hashIntArray(a){this.refs.set(a,!0);for(let v=0;v<a.length;v++){const V=a[v];0===V?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=V)}}hashStructure(a,v){void 0!==v&&(this.refs.set(a,!0),this.hash(v,!1))}hashEntry(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"$"!==a[0]&&(V&&"object"==typeof v?this.todo.push({key:a,value:v}):this.hash(v))}}class bl{static newOrRecycled(a){let v=this.reusableInstance;return v?(v.vm=a,v.nextRef=1,v.refs=new Map,v.todo=[]):v=this.reusableInstance=new this(a),v}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(a){this[this.name+"-instance"]=a}static resetInstance(){this.reusableInstance=null}constructor(a){this.vm=a,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",ml),this.addWriter("Teatime:Data",Wr);for(const[a,v]of Gl.allClassTypes())this.addWriter(a,v);this.okayToIgnore={};for(const a of Gl.allClasses())if(Object.prototype.hasOwnProperty.call(a,"okayToIgnore")){const v=a.okayToIgnore();if(!Array.isArray(v))throw new Error("okayToIgnore() must return an array");for(const a of v){if("$"!==a[0])throw Error(`okayToIgnore: ignored prop "${a}" must start with '$'`);this.okayToIgnore[a]=!0}}}addWriter(a,v){const{cls:V,write:Y}=Object.getPrototypeOf(v)===Object.prototype?v:{cls:v,write:a=>({...a})};this.writers.set(V,((v,V)=>this.writeAs(a,v,Y(v),V)))}snapshot(a){const v={_random:a._random.state(),messages:this.write(a.messages.asArray(),"vm.messages"),subscribers:void 0,controller:void 0};for(const[V,Y]of Object.entries(a))V in v||this.writeInto(v,V,Y,`vm.${V}`);return this.writeDeferred(),v}writeDeferred(){for(;this.todo.length>0;){const{state:a,key:v,value:V,path:Y}=this.todo.shift();this.writeInto(a,v,V,Y,!1)}}write(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(typeof a){case"number":return Object.is(a,-0)?{$class:"NegZero"}:Number.isSafeInteger(a)?a:Number.isNaN(a)?{$class:"NaN"}:Number.isFinite(a)?this.writeFloat(a):{$class:"Infinity",$value:Math.sign(a)};case"string":case"boolean":return a;case"undefined":return{$class:"Undefined"};default:{if(this.refs.has(a))return this.writeRef(a);const Y=Object.prototype.toString.call(a).slice(8,-1);switch(Y){case"Array":return this.writeArray(a,v,V);case"ArrayBuffer":return this.writeArrayBuffer(a);case"Set":return this.writeAs(Y,a,[...a],v);case"Map":return this.writeAs(Y,a,[...a].flat(),v);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(Y,a);case"Object":{if(a instanceof Gl)return this.writeModel(a,v);if(a.constructor===Object||"function"!=typeof a.constructor)return this.writeObject(a,v,V);const Y=this.writers.get(a.constructor);if(Y)return Y(a,v);throw console.error(`Croquet: unknown class at ${v}:`,a),Error(`Croquet: class not registered in Model.types(): ${a.constructor.name}`)}case"Null":return a;default:throw console.error(`Croquet: unsupported property at ${v}:`,a),Error(`Croquet: serialization of ${Y}s is not supported`)}}}}writeModel(a,v){const V={};this.refs.set(a,V);try{V.$model=Gl.classToID(a.constructor)}catch(V){throw console.error(`unregistered model class at ${v}:`,a),V}for(const Y of Object.keys(a).sort()){if("__realm"===Y)continue;const P=a[Y];this.writeInto(V,Y,P,v)}return V}writeObject(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const Y={};this.refs.set(a,Y);for(const P of Object.keys(a).sort()){const K=a[P];this.writeInto(Y,P,K,v,V)}return Y}writeArray(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const Y=[];this.refs.set(a,Y);for(let P=0;P<a.length;P++)this.writeInto(Y,P,a[P],v,V);return Y}writeArrayBuffer(a){const v={$class:"ArrayBuffer",$value:Xl(a)};return this.refs.set(a,v),v}writeTypedArray(a,v){const V={$class:a,$value:[this.writeArrayBuffer(v.buffer),v.byteOffset,"DataView"===a?v.byteLength:v.length]};return this.refs.set(v,V),V}writeFloat(a){return a}writeAs(a,v,V,Y){if(void 0===V)return V;const P={$class:a};this.refs.set(v,P);const K=this.write(V,Y,!1);return"object"!=typeof K||K.$class||Array.isArray(K)?P.$value=K:Object.assign(P,K),P}writeRef(a){const v=this.refs.get(a);if("object"!=typeof v)throw Error("Non-object in refs: "+a);return Array.isArray(v)&&(v.toJSON=function(){return{$id:this.$id,$class:"Array",$value:[...this]}}),{$ref:v.$id||(v.$id=this.nextRef++)}}writeInto(a,v,V,Y){let P=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("$"===v[0])return void(this.okayToIgnore[v]||(ft(`snapshot: ignoring property ${v} (declare as okayToIgnore to suppress warning)`,{only:"once"}),this.okayToIgnore[v]=!0));if(P&&"object"==typeof V)return void this.todo.push({state:a,key:v,value:V,path:Y});const K=Y+("string"==typeof v&&v.match(/^[_a-z][_a-z0-9]*$/i)?`.${v}`:`[${JSON.stringify(v)}]`),M=this.write(V,K);void 0!==M&&(a[v]=M)}}class yl{static newOrRecycled(a){let v=this.reusableInstance;return v?(v.vm=a,v.refs=new Map,v.todo=[],v.unresolved=[]):v=this.reusableInstance=new this(a),v}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(a){this[this.name+"-instance"]=a}static resetInstance(){this.reusableInstance=null}constructor(a){this.vm=a,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",ml),this.addReader("Teatime:Data",Wr),this.readers.set("Undefined",(()=>{})),this.readers.set("NaN",(()=>NaN)),this.readers.set("Infinity",(a=>a*(1/0))),this.readers.set("NegZero",(()=>-0)),this.readers.set("ArrayBuffer",(a=>function(a){const v=globalThis.atob(a),V=v.length,Y=new Uint8Array(V);for(let a=0;a<V;a++)Y[a]=v.charCodeAt(a);return Y.buffer}(a))),this.readers.set("DataView",(a=>new DataView(...a))),this.readers.set("Int8Array",(a=>new Int8Array(...a))),this.readers.set("Uint8Array",(a=>new Uint8Array(...a))),this.readers.set("Uint8ClampedArray",(a=>new Uint8ClampedArray(...a))),this.readers.set("Int16Array",(a=>new Int16Array(...a))),this.readers.set("Uint16Array",(a=>new Uint16Array(...a))),this.readers.set("Int32Array",(a=>new Int32Array(...a))),this.readers.set("Uint32Array",(a=>new Uint32Array(...a))),this.readers.set("Float32Array",(a=>new Float32Array(...a))),this.readers.set("Float64Array",(a=>new Float64Array(...a)));for(const[a,v]of Gl.allClassTypes())this.addReader(a,v)}addReader(a,v){const V="object"==typeof v?v.read:a=>Object.assign(Object.create(v.prototype),a);this.readers.set(a,V)}readVM(a,v){if("vm"!==v)throw Error("VirtualMachine must be root object");const V={_random:new _(null,{state:a._random})};for(const[v,Y]of Object.entries(a))V[v]||this.readInto(V,v,Y,`vm.${v}`);return this.readDeferred(),this.resolveRefs(),V}readDeferred(){for(;this.todo.length>0;){const{object:a,key:v,value:V,path:Y}=this.todo.shift();this.readInto(a,v,V,Y,!1)}}resolveRefs(){for(const{object:a,key:v,ref:V,path:Y}of this.unresolved){if(!this.refs.has(V))throw Error(`Unresolved ref: ${V} at ${Y}[${JSON.stringify(v)}]`);a[v]=this.refs.get(V)}}read(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(typeof a){case"number":case"string":case"boolean":return a;default:{const Y=Object.prototype.toString.call(a).slice(8,-1);switch(Y){case"Array":return this.readArray(a,v,V);case"Null":return null;case"Object":{const{$class:Y,$model:P,$ref:K}=a;if(K)throw Error("refs should have been handled in readInto()");return P?this.readModel(a,v):Y?this.readAs(Y,a,v):this.readObject(Object,a,v,V)}default:throw Error(`Don't know how to deserialize ${Y} at ${v}`)}}}}readModel(a,v){const V=Gl.instantiateClassID(a.$model,a.id);a.$id&&this.refs.set(a.$id,V);for(const[Y,P]of Object.entries(a))"id"!==Y&&"$"!==Y[0]&&this.readInto(V,Y,P,v);return V}readObject(a,v,V){let Y=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const P=new a;v.$id&&this.refs.set(v.$id,P);for(const[a,K]of Object.entries(v))"$"!==a[0]&&this.readInto(P,a,K,V,Y);return P}readArray(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const Y=[];a.$id&&this.refs.set(a.$id,Y);for(let P=0;P<a.length;P++)void 0!==a[P]&&this.readInto(Y,P,a[P],v,V);return Y}readAsArray(a,v){let V=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const Y=a.$value;return a.$id&&(Y.$id=a.$id),this.readArray(Y,v,V)}readAsSet(a,v){const V=new Set;a.$id&&this.refs.set(a.$id,V);const Y=this.read(a.$value,v,!1);for(const a of Y)V.add(a);return V}readAsMap(a,v){const V=new Map;a.$id&&this.refs.set(a.$id,V);const Y=this.read(a.$value,v,!1);for(let a=0;a<Y.length;a+=2)V.set(Y[a],Y[a+1]);return V}readAsClass(a,v,V){let Y={};const P=new Map;if("$value"in v)Y=this.read(v.$value,V,!1);else for(const[a,K]of Object.entries(v)){if("$"===a[0])continue;const v=K&&K.$ref;v?this.refs.has(v)?Y[a]=this.refs.get(v):(Y[a]="<unresolved>",P.set(v,a)):this.readInto(Y,a,K,V,!1)}const K=this.readers.get(a)(Y,V);K||"Undefined"===a||"NaN"===a||"NegZero"===a||console.warn(`Reading "${a}" returned ${K} at ${V}`),v.$id&&this.refs.set(v.$id,K);for(const[a,v]of P.entries())this.unresolved.push({object:K,key:v,ref:a,path:V});return K}readAs(a,v,V){switch(a){case"Array":return this.readAsArray(v,V);case"Set":return this.readAsSet(v,V);case"Map":return this.readAsMap(v,V);default:return this.readAsClass(a,v,V)}}readRef(a,v,V,Y){if(!V||!V.$ref)return!1;const P=V.$ref;return this.refs.has(P)?a[v]=this.refs.get(P):(a[v]="<unresolved>",this.unresolved.push({object:a,key:v,ref:P,path:Y})),!0}readInto(a,v,V,Y){let P=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.readRef(a,v,V,Y))return;if(P&&"object"==typeof V)return void this.todo.push({object:a,key:v,value:V,path:Y});const K=Y+("string"==typeof v&&v.match(/^[_a-z][_a-z0-9]*$/i)?`.${v}`:`[${JSON.stringify(v)}]`);a[v]=this.read(V,K)}}class gl extends bl{encode(a){const v=this.writeArray(a,"args");return this.writeDeferred(),v}writeModel(a){return{$ref:a.id}}}class Zl extends yl{decode(a){const v=this.readArray(a,"args");return this.readDeferred(),this.resolveRefs(),v}resolveRefs(){for(const{object:a,key:v,ref:V,path:Y}of this.unresolved)if(this.refs.has(V))a[v]=this.refs.get(V);else{const P=this.vm.lookUpModel(V);if(!P)throw Error(`Unresolved ref: ${V} at ${Y}[${JSON.stringify(v)}]`);a[v]=P}}}function wl(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;const P=Object.values(a).filter((a=>{const v=Object.prototype.toString.call(a).slice(8,-1);return("Object"===v||"Array"===v)&&!Y.has(a)}));for(const a of P){Y.add(a);const P=v+"."+a.constructor.name;if(V[P]){if(V[P]!==a.constructor)throw new Error("Class with name "+P+" already gathered, but new one has different identity")}else V[P]=a.constructor}for(const a of P)wl(a,v,V,Y)}function Xl(a){const v=new Uint8Array(a),V=[];for(let a=0;a<v.byteLength;a+=4096){const Y=v.subarray(a,a+4096);V.push(String.fromCharCode.apply(null,Y))}return globalThis.btoa(V.join(""))}const Mr=I.has("debug","classes",!1);let Hr=Symbol("SECRET");const Ir=new WeakSet;class Gl{static create(a,v,V){if(!Tl(this))throw Error(`Model class "${this.name}" not registered`);const Y=Ht(),P=new this(Hr);return Object.defineProperty(P,"__realm",{value:Y}),Object.defineProperty(P,"id",{value:Y.register(P),enumerable:!0}),Ir.add(P),"string"==typeof v&&(console.warn(`Croquet: Model.create(..., "${v}") with a well-known name argument is deprecated!`),P.beWellKnownAs(v),v=void 0),V&&P.beWellKnownAs(V),P.init(a,v),Ir.has(P)&&(Ir.delete(P),Object.getPrototypeOf(this)!==Gl&&console.warn(`${P} did not call super.init(options)`)),P}static createNoInit(a){const v=Ht(),V=new this(Hr);return Object.defineProperty(V,"__realm",{value:v}),Object.defineProperty(V,"id",{value:a,enumerable:!0}),V}static allowConstructors(){Hr=void 0,console.warn("disabling error reporting for Model constructors")}static register(a){return a||(a=this.name,console.warn(`Deprecation warning: ${this.name}.register(classId) called without classId. See https://croquet.io/docs/croquet/Model.html#.register`)),yl.resetInstance(),bl.resetInstance(),gl.resetInstance(),Zl.resetInstance(),function(a,v){const V=S(a),Y=R(`${v}:${V}`);lt.push(Y),W()&&Y.then((a=>{ot[a].what=`Class ${v}`}))}(this,a),function(a,v){const V=Jr[v];if(V&&V!==a)throw Error(`Registering model class ${a.name} failed, id "${v}" already used by ${V.name}`);Tl(a)?Mr&&!V&&console.warn(`ignoring re-exported model class ${v}`):(Mr&&console.log(`registering model class ${v}`),a[Ur]=v),Jr[v]=a}(this,a),Gl.lastRegistered=this,this}static wellKnownModel(a){if(!cl.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return cl.current().get(a)}static evaluate(a){return cl.evaluate(a)}static types(){return{}}static okayToIgnore(){return[]}static classToID(a){return function(a){if(Tl(a))return a[Ur];const v=a.name||"ClassName";throw Error(`Model class not registered, did you call ${v}.register("${v}")?`)}(a)}static classFromID(a){return Cl(a)}static allClasses(){return Wl()}static allClassTypes(){return function(){const a={};for(const v of Wl())Object.assign(a,v.types());return Object.entries(a)}()}static instantiateClassID(a,v){return Cl(a).createNoInit(v)}constructor(a){if(a!==Hr)throw Error(`You must create ${this} using create() not "new"!`)}init(a){Ir.delete(this)}destroy(){Ht().unsubscribeAll(this),Ht().deregister(this)}publish(a,v,V){this.__realm||this.__realmError(),this.__realm.publish(v,V,a)}subscribe(a,v,V){return this.__realm||this.__realmError(),this.__realm.subscribe(this,a,v,V)}unsubscribe(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";this.__realm||this.__realmError(),this.__realm.unsubscribe(this,a,v,V)}unsubscribeAll(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}__realmError(){if(!this.id)throw Error(`${this} has no ID, did you call super.init(options)?`)}future(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var V=arguments.length,Y=new Array(V>2?V-2:0),P=2;P<V;P++)Y[P-2]=arguments[P];return this.__realm.future(this,a,v,Y)}cancelFuture(a){return this.__realm||this.__realmError(),this.__realm.cancelFuture(this,a)}random(){return Ht().random()}now(){return Ht().now()}beWellKnownAs(a){Ht().vm.set(a,this)}getModel(a){return this.__realm.vm.lookUpModel(a)}wellKnownModel(a){return this.__realm.vm.get(a)}modelOnly(a){if(cl.current()===this.__realm.vm)return!0;const v=Error(a||`${this}.modelOnly() called from outside a model!`);throw yt("view code",v),v}get sessionId(){return this.__realm.vm.id}get viewCount(){return Object.keys(this.__realm.vm.views).length}persistSession(a){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,a)}[Symbol.toPrimitive](){const a=this.constructor[Ur]||this.constructor.name;return a.includes("Model")?a:`${a}[Model]`}}const Jr={},Ur=Symbol("CLASS_ID");function Wl(){return Object.values(Jr)}function Tl(a){return Object.prototype.hasOwnProperty.call(a,Ur)}function Cl(a){if(Jr[a])return Jr[a];throw Error(`Model class "${a}" in snapshot, but not registered?`)}Gl[Ur]="Croquet.Model",Jr["Croquet.Model"]=Gl;class Rl{static displayStatus(a,v){return bt(a,v)}static displayWarning(a,v){return ft(a,v)}static displayError(a,v){return function(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a&&ce.showMessage(a,{...v,level:"error"})}(a,v)}constructor(a){"object"==typeof a&&"__realm"in a||console.warn("Croquet: argument to View constructor needs to be a Model");let v=Ht("");v&&v.isViewRealm()||(v=Ft(a.__realm.vm,(()=>Ht()),!0)),Object.defineProperty(this,"realm",{value:v}),Object.defineProperty(this,"id",{value:v.register(this),configurable:!0})}detach(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}reattach(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}publish(a,v,V){this.realm.publish(v,V,a)}subscribe(a,v,V){"string"==typeof V&&(V=this[V]);const Y=V;(V=Y.bind(this)).unbound=Y;const{event:P,handling:K}=v.event?v:{event:v};this.realm.subscribe(P,this.id,V,a,K)}unsubscribe(a,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"string"==typeof V&&(V=this[V]),this.realm.unsubscribe(v,this.id,V,a)}unsubscribeAll(){this.realm.unsubscribeAll(this.id)}future(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.realm.future(this,a)}random(){return Ht().random()}now(){return this.realm.now()}externalNow(){return this.realm.externalNow()}extrapolatedNow(){return this.realm.extrapolatedNow()}update(a){}wellKnownModel(a){return this.realm.vm.get(a)}get sessionId(){return this.realm.vm.id}get session(){return this.realm.vm.controller.session}get viewId(){return this.realm.vm.controller.viewId}[Symbol.toPrimitive](){const a=this.constructor.name;return a.includes("View")?a:`${a}[View]`}}const Er=new class{constructor(){this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}setReceiver(a){this.receiver=a,this.ready=!0}setIframeEnumerator(a){this.enumerator=a}on(a,v){if(!this.receiver)throw Error("setReceiver() has not been called");if("string"==typeof v&&(v=this.receiver[v]),!v)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[a]){if(this.findIndex(this.subscriptions[a],v)>=0)throw Error(`${v} is already subscribed`)}else this.subscriptions[a]=[];this.subscriptions[a].push(v),this.listener||(this.listener=a=>this.receive(a),window.addEventListener("message",this.listener))}detach(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}removeSubscription(a,v){"string"==typeof v&&(v=this.receiver[v]);const V=this.subscriptions[a];if(V){const Y=this.findIndex(V,v);V.splice(Y,1),0===V.length&&delete this.subscriptions[a]}}removeAllSubscriptions(){this.subscriptions={}}receive(a){const{event:v,data:V}=a.data,Y=a.source;this.handleEvent(v,V,Y)}handleEvent(a,v,V){const Y=this.subscriptions[a];Y&&Y.forEach((a=>{a.call(this.receiver,v,V)}))}send(a,v,V){this.isInIframe?window.top.postMessage({event:a,data:v},"*"):V?V.postMessage({event:a,data:v},"*"):this.enumerator&&this.enumerator().forEach((V=>{V.contentWindow.postMessage({event:a,data:v},"*")}))}findIndex(a,v){const V=v.name;return a.findIndex((a=>{const Y=a.name;return V||Y?V===Y:v===a}))}startPublishingPointerMove(){this._moveHandler||(this._moveHandler=a=>this.send("pointerPosition",{x:a.clientX,y:a.clientY,type:a.type}),window.document.addEventListener("pointermove",this._moveHandler,!0))}stopPublishingPointerMove(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}},Br="node"===P.CROQUET_PLATFORM;let Ar=60;class Ml{static async join(a){try{return await this.join_impl(a)}catch(a){throw ce.showMessage(a.message,{level:"fatal"}),a}}static async join_impl(a){if("object"!=typeof a)throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/docs/croquet/Session.html#.join");a.appId||(a.appId="no.appId"),a.name||(a.name=ce.autoSession(),a.password||(a.password=ce.autoPassword())),a.model||(a.model=Gl.lastRegistered),a.view||(a.view=Rl);for(const[N,Q]of Object.entries(a))Q instanceof Promise&&(a[N]=await Q);function e(a,v){return a===v||a.prototype instanceof v}if("string"!=typeof a.apiKey)throw Error("Croquet: no apiKey provided in Session.join()!");if(a.apiKey.length>128)throw Error("Croquet: apiKey > 128 characters in Session.join()!");if("string"!=typeof a.name)throw Error("Croquet: no session name provided in Session.join()!");if(a.name.length>128)throw Error("Croquet: session name > 128 characters in Session.join()!");const v=a.model;if("function"!=typeof v||!e(v,Gl))throw Error("Croquet: bad model class in Session.join()");const V=a.view||Rl;if("function"!=typeof V||!e(V,Rl))throw Error("Croquet: bad view class in Session.join()");if("string"!=typeof a.appId)throw Error("Croquet: no appId provided in Session.join()");if(!a.appId.length>128)throw Error("Croquet: appId > 128 characters in Session.join()");if(!a.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i))throw Error("Croquet: malformed appId in Session.join()");if("string"!=typeof a.password||!a.password)throw Error("Croquet: no password provided in Session.join()");const Y=I.reflector||a.reflector;if(Y&&(Y.includes("://")||Y.match(/^[-a-z0-9]+$/i)?I.reflector=Y:console.warn(`Croquet: Not a valid websocket url, ignoring reflector "${Y}"`)),Br&&"manual"!==a.step)throw Error("stepping must be manual in a Node.js app");if("rejoinLimit"in a){if("number"!=typeof a.rejoinLimit||a.rejoinLimit<0||a.rejoinLimit>6e4)throw Error("rejoinLimit range: 0-60000")}else a.rejoinLimit=1e3;if("eventRateLimit"in a){if("number"!=typeof a.eventRateLimit||a.eventRateLimit<1||a.eventRateLimit>60)throw Error("eventRateLimit range: 1-60")}else a.eventRateLimit=20;if(a.heraldUrl){if(a.heraldUrl.length>256)throw Error("heraldUrl can only be 256 characters");if(!a.heraldUrl.startsWith("https://"))throw Error("heraldUrl needs to be https")}if(a.hashOverride){if(43!==a.hashOverride.length)throw Error("hashOverride must be 43 characters");if(-1!==a.hashOverride.search(/[^-_a-zA-Z0-9]/))throw Error("hashOverride must be base64url encoded")}if(a.debug){function f(a){return"string"==typeof a&&(a=a.split(",")),a?Array.isArray(a)?a:[a]:[]}I.debug=[...f(a.debug),...f(I.debug)].join(",")}if("autoSleep"in a){const j=a.autoSleep,U=typeof j;if("number"===U){if(j<0)throw Error("an autoSleep value must be >= 0")}else{if("boolean"!==U)throw Error("autoSleep must be numeric or boolean");a.autoSleep=j?10:0}}else a.autoSleep=10;if(a.flags){let D=a.flags;"string"==typeof D&&(D=D.split(",")),D=D?Array.isArray(D)?D:[D]:[],D=D.filter((a=>"object"!=typeof a)),D.length?(a.flags={},D.forEach((v=>a.flags[v]=!0))):a.flags=null}"expectedSimFPS"in a&&(Ar=Math.min(a.expectedSimFPS,120));const P=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewIdDebugSuffix","hashOverride","flags"];Object.isFrozen(qr)||(Kl(qr),function(a){const v=JSON.stringify(a,((a,v)=>"function"==typeof v?S(v):v));if("{}"===v)return;const V=JSON.parse(v),Y=R(y(V));lt.push(Y),W()&&Y.then((a=>{ot[a].what="Croquet Constants"}))}(qr));const K=new za,M=JSON.parse(JSON.stringify({...a.options})),H={id:"",persistentId:"",versionId:"",model:null,view:null,step(a){K.stepSession("animation",{frameTime:a,view:H.view,expectedSimFPS:Ar})},leave:()=>Ml.leave(H.id),get latency(){return K.latency},get latencies(){return K.latencies}},F={options:M,initFn:(a,V)=>v.create(a,V,"modelRoot"),rebootModelView:u};for(const[_,E]of Object.entries(a))P.includes(_)&&(F[_]=E);a.progressReporter&&(F.progressReporter=a.progressReporter),await K.initFromSessionSpec(F);let z=!1;return await u(),"manual"!==a.step&&K.startStepping(H.step),H;async function u(){H.model=null,H.view&&(I.has("debug","session",!1)&&console.log(H.id,"detaching root view"),H.view.detach(),""!==H.view.id&&console.warn(`Croquet: ${H.view} did not call super.detach()`),H.view=null),ce.clearSessionMoniker(),Er.ready&&Er.detach(),K.leaving?K.leaving(!0):z||(z=!0,await K.establishSession(F),z=!1,H.model=K.vm.get("modelRoot"),H.id=K.id,H.persistentId=K.persistentId,H.versionId=K.versionId,K.session=H,ce.makeSessionWidgets(H.id),K.inViewRealm((()=>{I.has("debug","session",!1)&&console.log(H.id,"creating root view"),H.view=new V(H.model)})))}}static async leave(a){const v=function(a){for(const v of Gr)if(v.id===a)return v;return null}(a);if(!v)return!1;v.reconnectTimeout&&(clearTimeout(v.reconnectTimeout),delete v.reconnectTimeout);const V=new Promise((a=>v.leaving=a)),Y=v.connection;return!!Y.connected&&(Y.closeConnection(1e3),V)}static thisSession(){const a=cl.current();return a?a.id:""}}const qr={};function Kl(a){if(!Object.isFrozen(a)){Object.freeze(a);for(const v of Object.values(a))!v||"object"!=typeof v&&"function"!=typeof v||Kl(v)}}v.App=ce,v.Constants=qr,v.Data=Oa,v.Messenger=Er,v.Model=Gl,v.Session=Ml,v.View=Rl,v.gatherInternalClassTypes=function(a,v){const V={};return wl({root:a},v,V,new Set),V},v.startSession=function(){return ce.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),Ml.join(...arguments)}},4200:(a,v,V)=>{V.r(v),V.d(v,{AM_Avatar:()=>H.lV,AM_Player:()=>z.fg,AM_Predictive:()=>H.zL,AM_Smoothed:()=>H.Qz,AM_Spatial:()=>H.ZA,Actor:()=>K.v,ActorManager:()=>K.t,CachedObject:()=>I.X,ClearObjectCache:()=>I.n,FocusManager:()=>M.I,GetModelService:()=>Q.J0,GetPawn:()=>F.s_,GetViewService:()=>Q.ci,InputManager:()=>_.$,IsLoaded:()=>D.M6,KeyDown:()=>_.z,LoadFont:()=>D.dO,LoadImage:()=>D.r6,ModelRoot:()=>Q.D9,ModelService:()=>Q.b$,PM_Avatar:()=>H.UZ,PM_Camera:()=>N.k6,PM_Driver:()=>H.VL,PM_Focusable:()=>M.v,PM_Player:()=>z.VX,PM_Predictive:()=>H.vq,PM_Smoothed:()=>H.Di,PM_Spatial:()=>H.fC,PM_Visible:()=>N.Tq,Pawn:()=>F.rE,PawnManager:()=>F.wh,PerlinNoise:()=>j.Fc,PlayerManager:()=>z.XM,PriorityQueue:()=>j.Z3,RegisterMixin:()=>H.nl,RenderManager:()=>N.zo,Shuffle:()=>j.gZ,StartWorldcore:()=>Q.CP,TAU:()=>U.gc,TO_DEG:()=>U.FO,TO_RAD:()=>U.Z1,TwoWayMap:()=>j.D8,ViewRoot:()=>Q.xS,ViewService:()=>Q.s1,WorldcoreModel:()=>Q.Uq,WorldcoreView:()=>Q.sG,clampRad:()=>U.tG,gaussian:()=>U.Um,m2_identity:()=>U.jy,m2_rotation:()=>U.m$,m2_zero:()=>U.er,m4_determinant:()=>U.sv,m4_getRotation:()=>U.ZU,m4_getTranslation:()=>U.eJ,m4_identity:()=>U.id,m4_invert:()=>U.yW,m4_multiply:()=>U.kx,m4_perspective:()=>U.Sn,m4_rotation:()=>U.yf,m4_rotationQ:()=>U.CV,m4_rotationX:()=>U.MO,m4_rotationY:()=>U.ac,m4_rotationZ:()=>U.LV,m4_scale:()=>U.lR,m4_scaleRotationTranslation:()=>U.FJ,m4_toNormal4:()=>U.pt,m4_translation:()=>U.DF,m4_transpose:()=>U.zC,m4_zero:()=>U.AB,mix:()=>H.CD,q_axisAngle:()=>U.Cq,q_conjugate:()=>U.Kc,q_dot:()=>U.JE,q_equals:()=>U._D,q_euler:()=>U.A$,q_identity:()=>U.C8,q_invert:()=>U.kc,q_isZero:()=>U.CF,q_lookAt:()=>U.eT,q_magnitude:()=>U.qf,q_multiply:()=>U.Lj,q_normalize:()=>U.d6,q_pitch:()=>U.gg,q_roll:()=>U.UJ,q_slerp:()=>U.zc,q_yaw:()=>U.ho,rayTriangleIntersect:()=>U.YR,sphericalRandom:()=>U.yF,toDeg:()=>U.TM,toRad:()=>U.vF,v2_abs:()=>U.Nf,v2_add:()=>U.Pf,v2_angle:()=>U.AM,v2_ceil:()=>U.EZ,v2_divide:()=>U.vU,v2_dot:()=>U.xw,v2_equals:()=>U.eD,v2_floor:()=>U.DP,v2_inverse:()=>U.qT,v2_isZero:()=>U.zE,v2_lerp:()=>U.yK,v2_magnitude:()=>U.vr,v2_manhattan:()=>U.WA,v2_max:()=>U.oy,v2_min:()=>U.KE,v2_multiply:()=>U.eq,v2_normalize:()=>U.uq,v2_random:()=>U.yp,v2_rotate:()=>U.KM,v2_scale:()=>U.Jk,v2_sqrMag:()=>U.BU,v2_sub:()=>U.Ar,v2_transform:()=>U.lQ,v2_zero:()=>U.A6,v3_abs:()=>U.Q0,v3_add:()=>U.S,v3_angle:()=>U.E4,v3_ceil:()=>U.gy,v3_cross:()=>U.sC,v3_divide:()=>U.s_,v3_dot:()=>U.wH,v3_equals:()=>U.nY,v3_floor:()=>U.ZV,v3_inverse:()=>U.Bc,v3_isZero:()=>U.wM,v3_lerp:()=>U.xq,v3_magnitude:()=>U.oN,v3_manhattan:()=>U.XD,v3_max:()=>U._2,v3_min:()=>U.iO,v3_multiply:()=>U.$2,v3_normalize:()=>U.P_,v3_random:()=>U.Jo,v3_rotate:()=>U.Wu,v3_rotateX:()=>U.JU,v3_rotateY:()=>U.lZ,v3_rotateZ:()=>U.Mi,v3_scale:()=>U.gI,v3_sqrMag:()=>U.g8,v3_sub:()=>U.aI,v3_transform:()=>U.w_,v3_zero:()=>U.jk,viewRoot:()=>Q.YT});var Y=V(8011),P={};for(const a in Y)"default"!==a&&(P[a]=()=>Y[a]);V.d(v,P);var K=V(2982),M=V(5014),H=V(7469),I=V(148),F=V(9570),z=V(9551),N=V(252),Q=V(7184),j=V(2419),U=V(439),D=V(2744),_=V(1480)},2982:(a,v,V)=>{V.d(v,{t:()=>ActorManager,v:()=>Actor});V(9570);var Y=V(7184);class ActorManager extends Y.b${init(a){super.init(a||"ActorManager"),this.actors=new Map}add(a){this.actors.set(a.id,a)}has(a){return this.actors.has(a)}get(a){return this.actors.get(a)}delete(a){this.actors.delete(a.id)}}ActorManager.register("ActorManager");class Actor extends Y.Uq{get pawn(){return null}get doomed(){return this._doomed}get parent(){return this._parent}init(a){super.init(),this.listen("parentSet",this.onParent),this.listen("_set",this.set),this.set(a),this.service("ActorManager").add(this),this.publish("actor","createActor",this)}destroy(){new Set(this.children).forEach((a=>a.destroy())),this.set({parent:null}),this._doomed=!0,this.say("destroyActor"),this.service("ActorManager").delete(this),super.destroy()}set(a={}){const v=Object.entries(a).sort(((a,v)=>v[0]<a[0]?1:-1));for(const a of v){const v=a[0]+"Set",V="_"+a[0],Y=a[1],P=this[V];this[V]=Y,this.say(v,{v:Y,o:P})}}addChild(a){this.children||(this.children=new Set),this.children.add(a)}removeChild(a){this.children&&this.children.delete(a)}onParent(a){a.o&&a.o.removeChild(this),a.v&&a.v.addChild(this)}say(a,v){this.publish(this.id,a,v)}listen(a,v){this.subscribe(this.id,a,v)}ignore(a){this.unsubscribe(this.id,a)}actorFromId(a){return this.service("ActorManager").get(a)}}Actor.register("Actor")},5014:(a,v,V)=>{V.d(v,{I:()=>FocusManager,v:()=>PM_Focusable});var Y=V(7184);class FocusManager extends Y.s1{constructor(a){super(a||"FocusManager"),this.sets=[]}}const PM_Focusable=a=>class extends a{constructor(...a){super(...a)}destroy(){super.destroy(),this.blurAll()}hasFocus(a=0){return this.service("FocusManager").sets[a]===this}focus(a=0){const v=this.service("FocusManager"),V=v.sets[a];V!==this&&(V&&(v.sets[a]=null,V.onBlur(a)),v.sets[a]=this,this.onFocus(a))}blur(a=0){const v=this.service("FocusManager");v.sets[a]===this&&(v.sets[a]=null,this.onBlur(a))}blurAll(){const a=this.service("FocusManager");a&&a.sets.forEach((a=>this.blur(a)))}onFocus(a){}onBlur(a){}}},1480:(a,v,V)=>{V.d(v,{$:()=>InputManager,z:()=>KeyDown});var Y=V(439),P=V(7184);const K=new Set,M=new Map,H=new Map,I=new Map;function KeyDown(a){return K.has(a)}class InputManager extends P.s1{constructor(a){super(a||"InputManager"),this.listeners=[],this.presses=new Map,this.lastDown={},this.penultimateDown={},document.body.style.touchAction="none",this.addAllListeners(),this.synthesizedModifierKeys=new Map}destroy(){super.destroy(),this.inPointerLock&&document.exitPointerLock(),this.inFullscreen&&document.exitFullscreen(),this.removeAllListeners()}addListener(a,v,V){a.addEventListener(v,V,{passive:!1}),this.listeners.push({element:a,type:v,callback:V})}removeListener(a){const v=this.listeners.filter((v=>v.type!==a));this.listeners.forEach((v=>{v.type===a&&v.element.removeEventListener(v.type,v.callback,{passive:!1})})),this.listeners=v}removeAllListeners(){this.listeners.forEach((a=>a.element.removeEventListener(a.type,a.callback,{passive:!1}))),this.listeners=[]}addAllListeners(){this.addListener(document,"contextmenu",(a=>a.preventDefault())),this.addListener(window,"resize",(a=>this.onResize(a))),this.addListener(window,"focus",(a=>this.onFocus(a))),this.addListener(window,"blur",(a=>this.onBlur(a))),this.addListener(window,"deviceorientation",(a=>this.onOrientation(a))),this.addListener(document,"click",(a=>this.onClick(a))),this.addListener(document,"pointerlockchange",(a=>this.onPointerLock(a))),this.addListener(document,"pointerdown",(a=>this.onPointerDown(a))),this.addListener(document,"pointerup",(a=>this.onPointerUp(a))),this.addListener(document,"pointercancel",(a=>this.onPointerUp(a))),this.addListener(document,"pointermove",(a=>this.onPointerMove(a))),this.addListener(document,"wheel",(a=>this.onWheel(a))),this.addListener(document,"keydown",(a=>this.onKeyDown(a))),this.addListener(document,"keyup",(a=>this.onKeyUp(a)))}addChord(a,v=[],V=[]){M.set(a,{down:v,up:V}),v.forEach((v=>{I.has(v)||I.set(v,new Set),I.get(v).add(a)})),V.forEach((v=>{H.has(v)||H.set(v,new Set),H.get(v).add(a)}))}onChordDown(a){const v=[],V=[];I.has(a)&&I.get(a).forEach((a=>{this.chordTest(a)&&v.push(a)})),H.has(a)&&H.get(a).forEach((a=>{this.chordTest(a)||V.push(a)})),V.forEach((a=>{KeyDown(a)&&(K.delete(a),this.publish("input",a+"Up"))})),v.forEach((a=>{KeyDown(a)||(K.add(a),this.publish("input",a+"Down"))}))}onChordUp(a){const v=[],V=[];I.has(a)&&I.get(a).forEach((a=>{this.chordTest(a)||V.push(a)})),H.has(a)&&H.get(a).forEach((a=>{this.chordTest(a)&&v.push(a)})),V.forEach((a=>{KeyDown(a)&&(K.delete(a),this.publish("input",a+"Up"))})),v.forEach((a=>{KeyDown(a)||(K.add(a),this.publish("input",a+"Down"))}))}chordTest(a){const v=M.get(a);if(!v)return!1;const V=v.down,Y=v.up;let P=!0;return V.forEach((a=>{P&=KeyDown(a)})),Y.forEach((a=>{P&=!KeyDown(a)})),P}get inFullscreen(){return document.fullscreenElement}get canFullscreen(){return document.documentElement.requestFullscreen}enterFullscreen(){this.inFullscreen||this.canFullscreen&&document.documentElement.requestFullscreen()}exitFullscreen(){this.inFullscreen&&document.exitFullscreen()}get inPointerLock(){return document.pointerLockElement||document.mozPointerLockElement}get canPointerLock(){return document.documentElement.requestPointerLock||document.documentElement.mozRequestPointerLock}modifierKeysFrom(a){let{altKey:v,ctrlKey:V,metaKey:Y,shiftKey:P}=a;return v=!(!v&&!this.synthesizedModifierKeys.get("altKey")),V=!(!V&&!this.synthesizedModifierKeys.get("ctrlKey")),Y=!(!Y&&!this.synthesizedModifierKeys.get("metaKey")),P=!(!P&&!this.synthesizedModifierKeys.get("shiftKey")),{altKey:v,ctrlKey:V,metaKey:Y,shiftKey:P}}setModifierKeys(a){for(let v in a)this.synthesizedModifierKeys.set(v,!!a[v])}modifierEqual(a,v){return!!a.altKey==!!v.altKey&&!!a.ctrlKey==!!v.ctrlKey&&!!a.metaKey==!!v.metaKey&&!!a.shiftKey==!!v.shiftKey}enterPointerLock(){this.inPointerLock||this.canPointerLock&&(document.documentElement.requestPointerLock=this.canPointerLock,document.documentElement.requestPointerLock())}exitPointerLock(){this.inPointerLock&&document.exitPointerLock()}onPointerLock(a){this.publish("input","pointerLock",this.inPointerLock)}onResize(a){this.publish("input","beforeResize"),this.future(500).futureResize()}futureResize(){this.publish("input","resize",[window.innerWidth,window.innerHeight])}onFocus(a){this.publish("input","focus")}onBlur(a){this.publish("input","blur")}onKeyDown(a){const v=a.key;let V=this.modifierKeysFrom(a);K.add(v),a.repeat?(this.publish("input",v+"Repeat",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,...V}),this.publish("input","keyRepeat",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,...V})):(this.publish("input",v+"Down",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,...V}),this.publish("input","keyDown",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,...V}),this.onChordDown(v))}onKeyUp(a){const v=a.key;let V=this.modifierKeysFrom(a);KeyDown(v)&&(this.publish("input",v+"Up",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,...V}),this.publish("input","keyUp",{key:v,shift:V.shiftKey,alt:V.altKey,ctrl:V.ctrlKey,meta:V.metaKey,modKeys:V}),K.delete(v),this.onChordUp(v))}onClick(a){let v=this.modifierKeysFrom(a);window.focus(),this.publish("input","click",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...v,xy:[a.clientX,a.clientY]})}onPointerDown(a){let v=this.modifierKeysFrom(a);this.presses.set(a.pointerId,{id:a.pointerId,time:a.timeStamp,start:[a.clientX,a.clientY],...v,xy:[a.clientX,a.clientY]}),this.publish("input","pointerDown",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...v,xy:[a.clientX,a.clientY]}),a.button===this.lastDown.button&&a.timeStamp-this.lastDown.time<300&&this.modifierEqual(a,this.lastDown)&&(a.button===this.penultimateDown.button&&a.timeStamp-this.penultimateDown.time<600?this.publish("input","tripleDown",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...v,xy:[a.clientX,a.clientY]}):this.publish("input","doubleDown",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...v,xy:[a.clientX,a.clientY]})),this.penultimateDown=this.lastDown,this.lastDown={id:a.pointerId,button:a.button,buttons:a.buttons,...v,time:a.timeStamp},this.zoomStart()}onPointerUp(a){const v=this.presses.get(a.pointerId);let V=this.modifierKeysFrom(a);if(v){v.xy=[a.clientX,a.clientY];const Y=a.timeStamp-v.time,P=a.clientX-v.start[0],K=a.clientY-v.start[1],M=Math.abs(P),H=Math.abs(K);Y<300&&M<10&&H<10&&this.publish("input","tap",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.clientX,a.clientY]}),Y<300&&M>50&&this.publish("input","swipeX",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,distance:P,...V}),Y<300&&H>50&&this.publish("input","swipeY",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,distance:K,...V})}this.presses.delete(a.pointerId),this.publish("input","pointerUp",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.clientX,a.clientY]}),this.zoomEnd()}onPointerMove(a){const v=this.presses.get(a.pointerId);let V=this.modifierKeysFrom(a);if(v){v.xy=[a.clientX,a.clientY];const Y=a.timeStamp-v.time,P=a.clientX-v.start[0],K=a.clientY-v.start[1],M=Math.abs(P),H=Math.abs(K);(Y>300||M>10||H>10)&&(this.publish("input","pointerMove",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.clientX,a.clientY]}),this.publish("input","pointerDelta",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.movementX,a.movementY]}))}else this.publish("input","pointerMove",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.clientX,a.clientY]}),this.publish("input","pointerDelta",{id:a.pointerId,type:a.pointerType,button:a.button,buttons:a.buttons,...V,xy:[a.movementX,a.movementY]});this.zoomUpdate()}zoomStart(){if(2!==this.presses.size)return;const a=Array.from(this.presses.values()),v=a[0],V=a[1],P=(0,Y.Jk)((0,Y.Pf)(v.xy,V.xy),.5);this.publish("input","zoomStart",{mid:P,zoom:1,dial:0})}zoomEnd(){1===this.presses.size&&this.publish("input","zoomEnd")}zoomUpdate(){if(this.presses.size<2)return;const a=Array.from(this.presses.values()),v=a[0],V=a[1],P=(0,Y.Jk)((0,Y.Pf)(v.xy,V.xy),.5),K=(0,Y.Ar)(V.start,v.start),M=(0,Y.Ar)(V.xy,v.xy),H=(0,Y.vr)(K),I=(0,Y.vr)(M);let F=1;H>0&&(F=I/H);const z=Math.atan2(K[0],K[1]);let N=(Math.atan2(M[0],M[1])-z+Y.gc)%Y.gc;N>Math.PI&&(N-=Y.gc),this.publish("input","zoomUpdate",{mid:P,zoom:F,dial:N})}onWheel(a){let v=this.modifierKeysFrom(a);a.preventDefault();const V=a.deltaY;this.publish("input","wheel",{deltaY:V,...v,xy:[a.clientX,a.clientY]})}onOrientation(a){const v=a.alpha,V=a.beta,P=(a.gamma,(0,Y.vF)(V)),K=(0,Y.vF)(v);this.publish("input","orientation",{pitch:P,yaw:K})}}},7469:(a,v,V)=>{V.d(v,{CD:()=>mix,Di:()=>PM_Smoothed,Qz:()=>AM_Smoothed,UZ:()=>M,VL:()=>PM_Driver,ZA:()=>AM_Spatial,fC:()=>PM_Spatial,lV:()=>K,nl:()=>RegisterMixin,vq:()=>PM_Predictive,zL:()=>AM_Predictive});var Y=V(8011),P=(V(4200),V(439));Y.Constants.WC_MIXIN_REGISTRY=[],Y.Constants.WC_MIXIN_USAGE=[];const mix=a=>new MixinFactory(a),RegisterMixin=a=>Y.Constants.WC_MIXIN_REGISTRY.push(a);class MixinFactory{constructor(a){this.superclass=a}with(...a){return Y.Constants.WC_MIXIN_USAGE.push(a),a.reduce(((a,v)=>v(a)),this.superclass)}}const AM_Spatial=a=>class extends a{init(a){super.init(a),this.listen("scaleSet",this.localChanged),this.listen("rotationSet",this.localChanged),this.listen("translationSet",this.localChanged)}localChanged(){this.$local=null,this.say("localChanged"),this.globalChanged()}globalChanged(){this.$global=null,this.say("globalChanged"),this.children&&this.children.forEach((a=>a.globalChanged()))}get local(){return this.$local||(this.$local=(0,P.FJ)(this.scale,this.rotation,this.translation)),[...this.$local]}get global(){return this.$global||(this.parent?this.$global=(0,P.kx)(this.local,this.parent.global):this.$global=this.local),[...this.$global]}get translation(){return this._translation?[...this._translation]:(0,P.jk)()}set translation(a){this.set({translation:a})}get rotation(){return this._rotation?[...this._rotation]:(0,P.C8)()}set rotation(a){this.set({rotation:a})}get scale(){return this._scale?[...this._scale]:[1,1,1]}set scale(a){this.set({scale:a})}};RegisterMixin(AM_Spatial);const PM_Spatial=a=>class extends a{constructor(...a){super(...a),this.listenOnce("globalChanged",this.onGlobalChanged)}onGlobalChanged(){this.say("viewGlobalChanged")}get scale(){return this.actor.scale}get translation(){return this.actor.translation}get rotation(){return this.actor.rotation}get local(){return this.actor.local}get global(){return this.actor.global}get lookGlobal(){return this.global}},AM_Smoothed=a=>class extends(AM_Spatial(a)){init(...a){super.init(...a),this.listen("_scaleTo",this.scaleTo),this.listen("_rotateTo",this.rotateTo),this.listen("_translateTo",this.translateTo),this.listen("_positionTo",this.positionTo)}scaleTo(a){this._scale=a,this.$local=null,this.$global=null,this.say("scaleTo",a)}rotateTo(a){this._rotation=a,this.$local=null,this.$global=null,this.say("rotateTo",a)}translateTo(a){this._translation=a,this.$local=null,this.$global=null,this.say("translateTo",a)}positionTo(a){this._translation=a.v,this._rotation=a.q,this.$local=null,this.$global=null,this.say("rotateTo",a.q),this.say("translateTo",a.v)}moveTo(a){this.translateTo(a)}};RegisterMixin(AM_Smoothed);const PM_Smoothed=a=>class extends(PM_Spatial(a)){constructor(...a){super(...a),this.tug=.2,this._scale=this.actor.scale,this._rotation=this.actor.rotation,this._translation=this.actor.translation,this._global=this.actor.global,this.listenOnce("scaleSet",this.onScaleSet),this.listenOnce("rotationSet",this.onRotationSet),this.listenOnce("translationSet",this.onTranslationSet),this.listenOnce("scaleTo",this.onScaleTo),this.listenOnce("rotateTo",this.onRotateTo),this.listenOnce("translateTo",this.onTranslateTo)}set tug(a){this._tug=a}get tug(){return this._tug}set localOffset(a){this._localOffset=a,this._local=null,this._global=null}get localOffset(){return this._localOffset}get scale(){return this._scale}get rotation(){return this._rotation}get translation(){return this._translation}onLocalChanged(){this._local=null,this.onGlobalChanged()}onGlobalChanged(){this._global=null}scaleTo(a,v){this.say("_scaleTo",a,v)}rotateTo(a,v){this.say("_rotateTo",a,v)}translateTo(a,v){this.say("_translateTo",a,v)}positionTo(a,v,V){this.say("_positionTo",{v:a,q:v},V)}onScaleSet(){this._scale=this.actor.scale,this.onLocalChanged()}onRotationSet(){this._rotation=this.actor.rotation,this.onLocalChanged()}onTranslationSet(){this._translation=this.actor.translation,this.onLocalChanged()}onScaleTo(a){this.isScaling=!0}onRotateTo(a){this.isRotating=!0}onTranslateTo(a){this.isTranslating=!0}get local(){return this._local?this._local:this._localOffset?(this._local=(0,P.kx)(this._localOffset,(0,P.FJ)(this._scale,this._rotation,this._translation)),this._local):(this._local=(0,P.FJ)(this._scale,this._rotation,this._translation),this._local)}get global(){return this._global||(this.parent&&this.parent.global?this._global=(0,P.kx)(this.local,this.parent.global):this._global=this.local),this._global}update(a,v){super.update(a,v);let V=this.tug;v&&(V=Math.min(1,V*v/15)),this.isScaling&&((0,P.nY)(this._scale,this.actor.scale,1e-4)?(this._scale=this.actor.scale,this.isScaling=!1):this._scale=(0,P.xq)(this._scale,this.actor.scale,V),this.onLocalChanged()),this.isRotating&&((0,P._D)(this._rotation,this.actor.rotation,1e-6)?(this._rotation=this.actor.rotation,this.isRotating=!1):this._rotation=(0,P.zc)(this._rotation,this.actor.rotation,V),this.onLocalChanged()),this.isTranslating&&((0,P.nY)(this._translation,this.actor.translation,1e-4)?(this._translation=this.actor.translation,this.isTranslating=!1):this._translation=(0,P.xq)(this._translation,this.actor.translation,V),this.onLocalChanged()),this._global||(this.say("viewGlobalChanged"),this.children&&this.children.forEach((a=>a.onGlobalChanged())))}},PM_Driver=a=>class extends a{constructor(...a){super(...a),this.throttle=100}positionTo(a,v,V){V=V||this.throttle,this._translation=a,this._rotation=v,this.isTranslating=!1,this.isRotating=!1,this.onLocalChanged(),super.positionTo(a,v,V)}scaleTo(a,v){v=v||this.throttle,this._scale=a,this.isScaling=!1,this.onLocalChanged(),super.scaleTo(a,v)}rotateTo(a,v){v=v||this.throttle,this._rotation=a,this.isRotating=!1,this.onLocalChanged(),super.rotateTo(a,v)}translateTo(a,v){v=v||this.throttle,this._translation=a,this.isTranslating=!1,this.onLocalChanged(),super.translateTo(a,v)}},AM_Predictive=a=>class extends(AM_Smoothed(a)){get spin(){return this._spin?[...this._spin]:(0,P.C8)()}get velocity(){return this._velocity?[...this._velocity]:(0,P.jk)()}get tickStep(){return this._tickStep||15}init(...a){super.init(...a),this.future(0).tick(0)}tick(a){if((0,P.CF)(this.spin)||this.rotateTo((0,P.d6)((0,P.zc)(this.rotation,(0,P.Lj)(this.rotation,this.spin),a))),!(0,P.wM)(this.velocity)){const v=(0,P.gI)(this.velocity,a),V=(0,P.w_)(v,(0,P.CV)(this.rotation));this.moveTo((0,P.S)(this.translation,V))}this.doomed||this.future(this.tickStep).tick(this.tickStep)}};RegisterMixin(AM_Predictive);const PM_Predictive=a=>class extends(PM_Smoothed(a)){constructor(...a){super(...a),this.spin=this.actor.spin,this.velocity=this.actor.velocity}moveTo(a,v){this.translateTo(a,v)}setVelocity(a,v){this.set({velocity:a},v)}setSpin(a,v){this.set({spin:a},v)}update(a,v){if((0,P.CF)(this.spin)||(this._rotation=(0,P.d6)((0,P.zc)(this._rotation,(0,P.Lj)(this._rotation,this.spin),v)),this.onLocalChanged()),!(0,P.wM)(this.velocity)){const a=(0,P.gI)(this.velocity,v),V=(0,P.w_)(a,(0,P.CV)(this.rotation));this._translation=(0,P.S)(this._translation,V),this.onLocalChanged()}super.update(a,v)}},K=AM_Predictive,M=PM_Predictive},148:(a,v,V)=>{V.d(v,{X:()=>CachedObject,n:()=>ClearObjectCache});const Y=new Map;function ClearObjectCache(){Y.forEach((a=>a.destroy())),Y.clear()}function CachedObject(a,v){if(Y.has(a))return Y.get(a);const V=v();return Y.set(a,V),V}},9570:(a,v,V)=>{V.d(v,{rE:()=>Pawn,s_:()=>GetPawn,wh:()=>PawnManager});var Y=V(7184);let P;class PawnManager extends Y.s1{constructor(a){super(a||"PawnManager"),P=this,this.pawns=new Map;this.modelService("ActorManager").actors.forEach((a=>this.spawnPawn(a)));for(const a of this.pawns.values())a.link();this.subscribe("actor","createActor",this.spawnPawn)}destroy(){new Map(this.pawns).forEach((a=>a.destroy())),P=null,super.destroy()}spawnPawn(a){if(a.pawn){new a.pawn(a).link()}}add(a){this.pawns.set(a.actor.id,a)}has(a){return this.pawns.has(a)}get(a){return this.pawns.get(a)}delete(a){this.pawns.delete(a.actor.id)}update(a,v){for(const V of this.pawns.values())V.parent||V.fullUpdate(a,v)}}function GetPawn(a){return P.get(a)}class Pawn extends Y.sG{constructor(a){super(a),this._sayNext={},this._sayCache={},this._actor=a,P.add(this),this.link(),this.listen("destroyActor",this.destroy),this.listen("parentSet",this.onParent)}link(){this.parent&&this.parent.addChild(this)}get actor(){return this._actor}destroy(){this.doomed=!0,P.delete(this),this.detach()}get parent(){return this.actor.parent&&!this._parent&&(this._parent=GetPawn(this.actor.parent.id)),this._parent}get children(){return this._children}addChild(a){this._children||(this._children=new Set),this._children.add(a)}removeChild(a){this._children&&this._children.delete(a)}onParent(a){a.o&&(this._parent=null,GetPawn(a.o.id).removeChild(this)),this.parent&&this.parent.addChild(this)}say(a,v,V=0){this.time<this._sayNext[a]?this._sayCache[a]={data:v,throttle:V}:(this._sayNext[a]=this.time+V,this._sayCache[a]=null,this.publish(this.actor.id,a,v))}listen(a,v){this.subscribe(this.actor.id,a,v)}listenImmediate(a,v){this.subscribe(this.actor.id,{event:a,handling:"immediate"},v)}ignore(a){this.unsubscribe(this.actor.id,a)}listenOnce(a,v){this.subscribe(this.actor.id,{event:a,handling:"oncePerFrame"},v)}set(a,v=0){this.say("_set",a,v)}preUpdate(a,v){}update(a,v){}postUpdate(a,v){}fullUpdate(a,v){this.preUpdate(a,v),this.update(a,v),this.postUpdate(a,v);for(const v in this._sayCache){const V=this._sayCache[v];if(V&&a>this._sayNext[v]){const{data:Y,throttle:P}=V;this._sayNext[v]=a+P,this._sayCache[v]=null,this.publish(this.actor.id,v,Y)}}this.children&&this.children.forEach((V=>V.fullUpdate(a,v)))}}},9551:(a,v,V)=>{V.d(v,{VX:()=>PM_Player,XM:()=>PlayerManager,fg:()=>AM_Player});V(2982);var Y=V(7469),P=V(7184);class PlayerManager extends P.b${init(a){super.init(a||"PlayerManager"),this.players=new Map,this.subscribe(this.sessionId,"view-join",this.onJoin),this.subscribe(this.sessionId,"view-exit",this.onExit)}onJoin(a){this.players.has(a)&&console.warn("PlayerManager received duplicate view-join for viewId "+a);const v=this.createPlayer({playerId:a});v&&(this.players.set(a,v),this.publish("playerManager","create",v))}createPlayer(a){return null}destroyPlayer(a){this.publish("playerManager","destroy",a),a.destroy()}onExit(a){const v=this.player(a);v&&(this.destroyPlayer(v),this.players.delete(a))}get count(){return this.players.size}player(a){return this.players.get(a)}}PlayerManager.register("PlayerManager");const AM_Player=a=>class extends a{get playerId(){return this._playerId}};(0,Y.nl)(AM_Player);const PM_Player=a=>class extends a{get isMyPlayerPawn(){let a=this;do{if(a.actor&&a.actor.playerId===a.viewId)return!0;a=a.parent}while(a);return!1}}},252:(a,v,V)=>{V.d(v,{Tq:()=>PM_Visible,k6:()=>PM_Camera,zo:()=>RenderManager});var Y=V(7184);const PM_Visible=a=>class extends a{destroy(){super.destroy();const a=this.service("RenderManager");for(const v in a.layers){a.layers[v].has(this)&&a.dirtyLayer(v),a.layers[v].delete(this)}}addToLayers(...a){const v=this.service("RenderManager");a.forEach((a=>{v.layers[a]||(v.layers[a]=new Set),v.layers[a].add(this),v.dirtyLayer(a)}))}removeFromLayers(...a){const v=this.service("RenderManager");a.forEach((a=>{v.layers[a]&&(v.layers[a].delete(this),0===v.layers[a].size&&delete v.layers[a],v.dirtyLayer(a))}))}layers(){let a=[];const v=this.service("RenderManager");for(const V in v.layers){v.layers[V].has(this)&&a.push(V)}return a}},PM_Camera=a=>class extends a{};class RenderManager extends Y.s1{constructor(a={},v){super(v),this.registerViewName("RenderManager"),this.layers={}}dirtyLayer(a){}}},7184:(a,v,V)=>{V.d(v,{CP:()=>StartWorldcore,D9:()=>ModelRoot,J0:()=>GetModelService,Uq:()=>WorldcoreModel,YT:()=>H,b$:()=>ModelService,ci:()=>GetViewService,s1:()=>ViewService,sG:()=>WorldcoreView,xS:()=>ViewRoot});var Y=V(8011),P=V(2982),K=V(9570),M=V(148);class WorldcoreModel extends Y.Model{service(a){return this.wellKnownModel(a)}}WorldcoreModel.register("WorldcoreModel");class ModelRoot extends WorldcoreModel{static modelServices(){return[]}init(){super.init(),this.beWellKnownAs("ModelRoot"),this.services=new Set,this.services.add(P.t.create()),this.constructor.modelServices().forEach((a=>{let v;a.service&&(v=a.options,a=a.service),this.services.add(a.create(v))}))}}ModelRoot.register("ModelRoot");class ModelService extends WorldcoreModel{static async asyncStart(){}init(a,v={}){super.init(),this.name=a,a?this.wellKnownModel(a)?console.error("Duplicate service!"):this.beWellKnownAs(a):console.error("All services must have public names!")}}function GetModelService(a){return H.wellKnownModel(a)}ModelService.register("ModelService");class WorldcoreView extends Y.View{service(a){return z.get(a)}modelService(a){return this.wellKnownModel(a)}get time(){return F}get delta(){return F-I}}let H,I=0,F=0;const z=new Map;let N;class ViewRoot extends WorldcoreView{static viewServices(){return[]}constructor(a){super(a),this.model=a,H=this,I=0,F=0,z.clear(),(0,M.n)(),this.constructor.viewServices().forEach((a=>{let v,V=a.name;a.service&&(v=a.options,a=a.service),new a(v,V)})),N=new K.wh}detach(){[...z.values()].reverse().forEach((a=>a.destroy())),z.clear(),super.detach()}update(a){I=F,F=a;const v=F-I;let V=new Set;N.update(a,v),z.forEach((Y=>{V.has(Y)||Y!==N&&(V.add(Y),Y.update&&Y.update(a,v))}))}}class ViewService extends WorldcoreView{static async asyncStart(){}constructor(a){super(H.model),this.model=H.model,this.registerViewName(a)}registerViewName(a){a?z.has(a)?console.error("Duplicate service!"):z.set(a,this):console.error("All services must have public names!")}destroy(){this.detach(),z.delete(this.name)}}function GetViewService(a){return z.get(a)}async function StartWorldcore(a){await Promise.all(a.model.modelServices().map((a=>(a.service&&(a=a.service),a.asyncStart())))),await Promise.all(a.view.viewServices().map((a=>(a.service&&(a=a.service),a.asyncStart()))));return await Y.Session.join(a)}},2419:(a,v,V)=>{V.d(v,{D8:()=>TwoWayMap,Fc:()=>PerlinNoise,Z3:()=>PriorityQueue,gZ:()=>Shuffle});const defaultComparator=(a,v)=>a<v;class PriorityQueue{constructor(a=defaultComparator){this.items=[],this.comparator=a}get isEmpty(){return 0===this.items.length}get count(){return this.items.length}get top(){return this.items[0]}clear(){this.items.length=0}push(a){let v=this.items.length;for(;v>0&&!this.comparator(this.items[v>>1],a);)this.items[v]=this.items[v>>1],v>>=1;this.items[v]=a}pop(){const a=this.items[0],v=this.items.pop();return this.items.length>0&&(this.items[0]=v,this.heapify(0)),a}traverse(a){this.items.forEach(a)}heapify(a){let v=a;const V=a<<1,Y=V+1;if(V<this.items.length&&this.comparator(this.items[V],this.items[v])&&(v=V),Y<this.items.length&&this.comparator(this.items[Y],this.items[v])&&(v=Y),v===a)return;const P=this.items[a];this.items[a]=this.items[v],this.items[v]=P,this.heapify(v)}}class PerlinNoise{constructor(){this.generate()}generate(){this.hashTable=this.generateHashTable()}generateHashTable(){const a=[];for(let v=0;v<256;v++)a.push({key:Math.random(),value:v});a.sort(((a,v)=>a.key-v.key));const v=a.map((a=>a.value));return v.concat(v)}signedNoise2D(a,v){return this.noise2D(a,v)-.5}noise2D(a,v){const V=this.hashTable,Y=Math.floor(a),P=Math.floor(v),K=a-Y,M=v-P,H=this.fade(K),I=this.fade(M),F=255&Y,z=255&P,N=V[V[F]+z],Q=V[V[F+1]+z],j=V[V[F]+z+1],U=V[V[F+1]+z+1],D=this.grad(N,K,M),_=this.grad(Q,K-1,M),E=this.grad(j,K,M-1),B=this.grad(U,K-1,M-1),O=this.lerp(D,_,H),A=this.lerp(E,B,H);return(this.lerp(O,A,I)+1)/2}lerp(a,v,V){return a+V*(v-a)}fade(a){return a*a*a*(a*(6*a-15)+10)}grad(a,v,V){switch(3&a){case 0:return v+V;case 1:return v-V;case 2:return-v+V;case 3:return-v-V;default:return 0}}}class TwoWayMap{constructor(a=new Map){this.map=a,this.rev=new Map,this.map.forEach(((a,v)=>{this.rev.set(a,v)}))}clear(){this.map.clear(),this.rev.clear()}set(a,v){this.map.set(a,v),this.rev.set(v,a)}delete(a){if(!this.map.has(a))return;const v=this.map.get(a);this.map.delete(a),this.rev.delete(v)}get(a){return this.map.get(a)}revGet(a){return this.rev.get(a)}has(a){return this.map.has(a)}revHas(a){return this.rev.has(a)}forEach(a){this.map.forEach(a)}revForEach(a){this.rev.forEach(a)}}function Shuffle(a){const v=new Array(a);for(let V=0;V<a;V++)v[V]=V;let V=a;for(;V;){const a=Math.floor(Math.random()*V--),Y=v[V];v[V]=v[a],v[a]=Y}return v}},439:(a,v,V)=>{V.d(v,{$2:()=>v3_multiply,A$:()=>q_euler,A6:()=>v2_zero,AB:()=>m4_zero,AM:()=>v2_angle,Ar:()=>v2_sub,BU:()=>v2_sqrMag,Bc:()=>v3_inverse,C8:()=>q_identity,CF:()=>q_isZero,CV:()=>m4_rotationQ,Cq:()=>q_axisAngle,DF:()=>m4_translation,DP:()=>v2_floor,E4:()=>v3_angle,EZ:()=>v2_ceil,FJ:()=>m4_scaleRotationTranslation,FO:()=>P,JE:()=>q_dot,JU:()=>v3_rotateX,Jk:()=>v2_scale,Jo:()=>v3_random,KE:()=>v2_min,KM:()=>v2_rotate,Kc:()=>q_conjugate,LV:()=>m4_rotationZ,Lj:()=>q_multiply,MO:()=>m4_rotationX,Mi:()=>v3_rotateZ,Nf:()=>v2_abs,P_:()=>v3_normalize,Pf:()=>v2_add,Q0:()=>v3_abs,S:()=>v3_add,Sn:()=>m4_perspective,TM:()=>toDeg,UJ:()=>q_roll,Um:()=>gaussian,WA:()=>v2_manhattan,Wu:()=>v3_rotate,XD:()=>v3_manhattan,YR:()=>rayTriangleIntersect,Z1:()=>Y,ZU:()=>m4_getRotation,ZV:()=>v3_floor,_2:()=>v3_max,_D:()=>q_equals,aI:()=>v3_sub,ac:()=>m4_rotationY,d6:()=>q_normalize,eD:()=>v2_equals,eJ:()=>m4_getTranslation,eT:()=>q_lookAt,eq:()=>v2_multiply,er:()=>m2_zero,g8:()=>v3_sqrMag,gI:()=>v3_scale,gc:()=>K,gg:()=>q_pitch,gy:()=>v3_ceil,ho:()=>q_yaw,iO:()=>v3_min,id:()=>m4_identity,jk:()=>v3_zero,jy:()=>m2_identity,kc:()=>q_invert,kx:()=>m4_multiply,lQ:()=>v2_transform,lR:()=>m4_scale,lZ:()=>v3_rotateY,m$:()=>m2_rotation,nY:()=>v3_equals,oN:()=>v3_magnitude,oy:()=>v2_max,pt:()=>m4_toNormal4,qT:()=>v2_inverse,qf:()=>q_magnitude,sC:()=>v3_cross,s_:()=>v3_divide,sv:()=>m4_determinant,tG:()=>clampRad,uq:()=>v2_normalize,vF:()=>toRad,vU:()=>v2_divide,vr:()=>v2_magnitude,wH:()=>v3_dot,wM:()=>v3_isZero,w_:()=>v3_transform,xq:()=>v3_lerp,xw:()=>v2_dot,yF:()=>sphericalRandom,yK:()=>v2_lerp,yW:()=>m4_invert,yf:()=>m4_rotation,yp:()=>v2_random,zC:()=>m4_transpose,zE:()=>v2_isZero,zc:()=>q_slerp});const Y=Math.PI/180,P=1/Y,K=2*Math.PI;function toRad(a){return a*Y}function toDeg(a){return a*P}function clampRad(a){for(;a<0;)a+=K;return a%K}function gaussian(a,v=1,V=1){const Y=2*V*V,P=1/Math.sqrt(Math.PI*Y),K=1/Y,M=[P];for(let V=1;V<a;V++){const a=v*V;M.push(P*Math.E**(-K*a*a))}return M}function rayTriangleIntersect(a,v,V){const Y=1e-5,P=V[0],K=V[1],M=V[2],H=v3_sub(K,P),I=v3_sub(M,P),F=v3_cross(v,I),z=v3_dot(H,F);if(z>-1e-5&&z<Y)return null;const N=1/z,Q=v3_sub(a,P),j=N*v3_dot(Q,F);if(j<0||j>1)return null;const U=v3_cross(Q,H),D=N*v3_dot(v,U);if(D<0||j+D>1)return null;const _=N*v3_dot(I,U);return _<Y||_>1/Y?null:v3_add(a,v3_scale(v,_))}function sphericalRandom(){const a=Math.random(),v=Math.random(),V=2*Math.sqrt(a-a*a),Y=K*v;return[V*Math.cos(Y),V*Math.sin(Y),1-2*a]}function v2_zero(){return[0,0]}function v2_random(){const a=2*Math.random()*Math.PI;return[Math.cos(a),Math.sin(a)]}function v2_magnitude(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function v2_sqrMag(a){return a[0]*a[0]+a[1]*a[1]}function v2_normalize(a){const v=1/v2_magnitude(a);return[a[0]*v,a[1]*v]}function v2_abs(a){return[Math.abs(a[0]),Math.abs(a[1])]}function v2_ceil(a){return[Math.ceil(a[0]),Math.ceil(a[1])]}function v2_floor(a){return[Math.floor(a[0]),Math.floor(a[1])]}function v2_inverse(a){return[1/a[0],1/a[1]]}function v2_scale(a,v){return[a[0]*v,a[1]*v]}function v2_multiply(a,v){return[a[0]*v[0],a[1]*v[1]]}function v2_divide(a,v){return[a[0]/v[0],a[1]/v[1]]}function v2_rotate(a,v){const V=Math.sin(v),Y=Math.cos(v);return[Y*a[0]-V*a[1],V*a[0]+Y*a[1]]}function v2_add(a,v){return[a[0]+v[0],a[1]+v[1]]}function v2_sub(a,v){return[a[0]-v[0],a[1]-v[1]]}function v2_dot(a,v){return a[0]*v[0]+a[1]*v[1]}function v2_min(a,v){return[Math.min(a[0],v[0]),Math.min(a[1],v[1])]}function v2_max(a,v){return[Math.max(a[0],v[0]),Math.max(a[1],v[1])]}function v2_angle(a,v){return Math.acos(Math.min(1,Math.max(-1,v2_dot(v2_normalize(a),v2_normalize(v)))))}function v2_lerp(a,v,V){return[a[0]+(v[0]-a[0])*V,a[1]+(v[1]-a[1])*V]}function v2_equals(a,v,V=0){return V?V>Math.abs(a[0]-v[0])&&V>Math.abs(a[1]-v[1]):a[0]===v[0]&&a[1]===v[1]}function v2_isZero(a){return 0===a[0]&&0===a[1]}function v2_manhattan(a,v){return Math.abs(a[0]-v[0])+Math.abs(a[1]-v[1])}function v2_transform(a,v){const V=a[0],Y=a[1];return[v[0]*V+v[2]*Y,v[1]*V+v[3]*Y]}function v3_zero(){return[0,0,0]}function v3_random(){const a=Math.random(),v=Math.random(),V=2*Math.sqrt(a-a*a),Y=K*v;return[V*Math.cos(Y),V*Math.sin(Y),1-2*a]}function v3_magnitude(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}function v3_sqrMag(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]}function v3_normalize(a){const v=1/v3_magnitude(a);return[a[0]*v,a[1]*v,a[2]*v]}function v3_inverse(a){return[1/a[0],1/a[1],1/a[2]]}function v3_abs(a){return[Math.abs(a[0]),Math.v3_abs(a[1]),Math.abs(a[2])]}function v3_ceil(a){return[Math.ceil(a[0]),Math.v3_ceil(a[1]),Math.ceil(a[2])]}function v3_floor(a){return[Math.floor(a[0]),Math.floor(a[1]),Math.floor(a[2])]}function v3_scale(a,v){return[a[0]*v,a[1]*v,a[2]*v]}function v3_multiply(a,v){return[a[0]*v[0],a[1]*v[1],a[2]*v[2]]}function v3_divide(a,v){return[a[0]/v[0],a[1]/v[1],a[2]/v[2]]}function v3_rotateX(a,v){const V=Math.sin(v),Y=Math.cos(v);return[a[0],Y*a[1]-V*a[2],V*a[1]+Y*a[2]]}function v3_rotateY(a,v){const V=Math.sin(v),Y=Math.cos(v);return[V*a[2]+Y*a[0],a[1],Y*a[2]-V*a[0]]}function v3_rotateZ(a,v){const V=Math.sin(v),Y=Math.cos(v);return[Y*a[0]-V*a[1],V*a[0]+Y*a[1],a[2]]}function v3_add(a,v){return[a[0]+v[0],a[1]+v[1],a[2]+v[2]]}function v3_sub(a,v){return[a[0]-v[0],a[1]-v[1],a[2]-v[2]]}function v3_dot(a,v){return a[0]*v[0]+a[1]*v[1]+a[2]*v[2]}function v3_cross(a,v){const V=a[0],Y=a[1],P=a[2],K=v[0],M=v[1],H=v[2];return[Y*H-P*M,P*K-V*H,V*M-Y*K]}function v3_min(a,v){return[Math.min(a[0],v[0]),Math.min(a[1],v[1]),Math.min(a[2],v[2])]}function v3_max(a,v){return[Math.max(a[0],v[0]),Math.max(a[1],v[1]),Math.max(a[2],v[2])]}function v3_manhattan(a,v){return Math.abs(a[0]-v[0])+Math.abs(a[1]-v[1])+Math.abs(a[2]-v[2])}function v3_angle(a,v){return Math.acos(Math.min(1,Math.max(-1,v3_dot(v3_normalize(a),v3_normalize(v)))))}function v3_lerp(a,v,V){return[a[0]+(v[0]-a[0])*V,a[1]+(v[1]-a[1])*V,a[2]+(v[2]-a[2])*V]}function v3_transform(a,v){const V=a[0],Y=a[1],P=a[2],K=v[3]*V+v[7]*Y+v[11]*P+v[15];return[(v[0]*V+v[4]*Y+v[8]*P+v[12])/K,(v[1]*V+v[5]*Y+v[9]*P+v[13])/K,(v[2]*V+v[6]*Y+v[10]*P+v[14])/K]}function v3_rotate(a,v){const V=v[0],Y=v[1],P=v[2],K=v[3],M=a[0],H=a[1],I=a[2];let F=Y*I-P*H,z=P*M-V*I,N=V*H-Y*M,Q=Y*N-P*z,j=P*F-V*N,U=V*z-Y*F,D=2*K;return F*=D,z*=D,N*=D,Q*=2,j*=2,U*=2,[M+F+Q,H+z+j,I+N+U]}function v3_equals(a,v,V=0){return V?V>Math.abs(a[0]-v[0])&&V>Math.abs(a[1]-v[1])&&V>Math.abs(a[2]-v[2]):a[0]===v[0]&&a[1]===v[1]&&a[2]===v[2]}function v3_isZero(a){return 0===a[0]&&0===a[1]&&0===a[2]}function m2_zero(){return[0,0,0,0]}function m2_identity(){return[1,0,0,1]}function m2_rotation(a){const v=Math.sin(a),V=Math.cos(a);return[V,-v,v,V]}function m4_zero(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function m4_identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function m4_translation(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[0],a[1],a[2],1]}function m4_getTranslation(a){return[a[12],a[13],a[14]]}function m4_scale(a){return a instanceof Array?[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1]:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1]}function m4_rotation(a,v){const V=v3_normalize(a),Y=Math.sin(v),P=Math.cos(v),K=1-P;return[V[0]*V[0]*K+P,V[1]*V[0]*K+V[2]*Y,V[2]*V[0]*K-V[1]*Y,0,V[0]*V[1]*K-V[2]*Y,V[1]*V[1]*K+P,V[2]*V[1]*K+V[0]*Y,0,V[0]*V[2]*K+V[1]*Y,V[1]*V[2]*K-V[0]*Y,V[2]*V[2]*K+P,0,0,0,0,1]}function m4_rotationX(a){const v=Math.sin(a),V=Math.cos(a);return[1,0,0,0,0,V,v,0,0,-v,V,0,0,0,0,1]}function m4_rotationY(a){const v=Math.sin(a),V=Math.cos(a);return[V,0,-v,0,0,1,0,0,v,0,V,0,0,0,0,1]}function m4_rotationZ(a){const v=Math.sin(a),V=Math.cos(a);return[V,v,0,0,-v,V,0,0,0,0,1,0,0,0,0,1]}function m4_rotationQ(a){const v=a[0],V=a[1],Y=a[2],P=a[3],K=v+v,M=V+V,H=Y+Y,I=v*K,F=V*K,z=V*M,N=Y*K,Q=Y*M,j=Y*H,U=P*K,D=P*M,_=P*H;return[1-z-j,F+_,N-D,0,F-_,1-I-j,Q+U,0,N+D,Q-U,1-I-z,0,0,0,0,1]}function m4_getRotation(a){const v=a[0]+a[5]+a[10];let V=0;const Y=[0,0,0,0];return v>0?(V=2*Math.sqrt(v+1),Y[3]=.25*V,Y[0]=(a[6]-a[9])/V,Y[1]=(a[8]-a[2])/V,Y[2]=(a[1]-a[4])/V):a[0]>a[5]&&a[0]>a[10]?(V=2*Math.sqrt(1+a[0]-a[5]-a[10]),Y[3]=(a[6]-a[9])/V,Y[0]=.25*V,Y[1]=(a[1]+a[4])/V,Y[2]=(a[8]+a[2])/V):a[5]>a[10]?(V=2*Math.sqrt(1+a[5]-a[0]-a[10]),Y[3]=(a[8]-a[2])/V,Y[0]=(a[1]+a[4])/V,Y[1]=.25*V,Y[2]=(a[6]+a[9])/V):(V=2*Math.sqrt(1+a[10]-a[0]-a[5]),Y[3]=(a[1]-a[4])/V,Y[0]=(a[8]+a[2])/V,Y[1]=(a[6]+a[9])/V,Y[2]=.25*V),Y}function m4_scaleRotationTranslation(a,v,V){const Y=v[0],P=v[1],K=v[2],M=v[3],H=Y+Y,I=P+P,F=K+K,z=Y*H,N=Y*I,Q=Y*F,j=P*I,U=P*F,D=K*F,_=M*H,E=M*I,B=M*F;let O=1,A=1,st=1;return a instanceof Array?(O=a[0],A=a[1],st=a[2]):(O=a,A=a,st=a),[(1-(j+D))*O,(N+B)*O,(Q-E)*O,0,(N-B)*A,(1-(z+D))*A,(U+_)*A,0,(Q+E)*st,(U-_)*st,(1-(z+j))*st,0,V[0],V[1],V[2],1]}function m4_perspective(a,v,V,Y){const P=1/Math.tan(a/2),K=1/(V-Y);return[P/v,0,0,0,0,P,0,0,0,0,(Y+V)*K,-1,0,0,2*Y*V*K,0]}function m4_transpose(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}function m4_determinant(a){const v=a[0],V=a[1],Y=a[2],P=a[3],K=a[4],M=a[5],H=a[6],I=a[7],F=a[8],z=a[9],N=a[10],Q=a[11],j=a[12],U=a[13],D=a[14],_=a[15];return(v*M-V*K)*(N*_-Q*D)-(v*H-Y*K)*(z*_-Q*U)+(v*I-P*K)*(z*D-N*U)+(V*H-Y*M)*(F*_-Q*j)-(V*I-P*M)*(F*D-N*j)+(Y*I-P*H)*(F*U-z*j)}function m4_invert(a){const v=a[0],V=a[1],Y=a[2],P=a[3],K=a[4],M=a[5],H=a[6],I=a[7],F=a[8],z=a[9],N=a[10],Q=a[11],j=a[12],U=a[13],D=a[14],_=a[15],E=v*M-V*K,B=v*H-Y*K,O=v*I-P*K,A=V*H-Y*M,st=V*I-P*M,it=Y*I-P*H,nt=F*U-z*j,ot=F*D-N*j,rt=F*_-Q*j,lt=z*D-N*U,at=z*_-Q*U,ct=N*_-Q*D,dt=E*ct-B*at+O*lt+A*rt-st*ot+it*nt;return[(M*ct-H*at+I*lt)/dt,(Y*at-V*ct-P*lt)/dt,(U*it-D*st+_*A)/dt,(N*st-z*it-Q*A)/dt,(H*rt-K*ct-I*ot)/dt,(v*ct-Y*rt+P*ot)/dt,(D*O-j*it-_*B)/dt,(F*it-N*O+Q*B)/dt,(K*at-M*rt+I*nt)/dt,(V*rt-v*at-P*nt)/dt,(j*st-U*O+_*E)/dt,(z*O-F*st-Q*E)/dt,(M*ot-K*lt-H*nt)/dt,(v*lt-V*ot+Y*nt)/dt,(U*B-j*A-D*E)/dt,(F*A-z*B+N*E)/dt]}function m4_multiply(a,v){const V=a[0],Y=a[1],P=a[2],K=a[3],M=a[4],H=a[5],I=a[6],F=a[7],z=a[8],N=a[9],Q=a[10],j=a[11],U=a[12],D=a[13],_=a[14],E=a[15],B=v[0],O=v[1],A=v[2],st=v[3],it=v[4],nt=v[5],ot=v[6],rt=v[7],lt=v[8],at=v[9],ct=v[10],dt=v[11],ut=v[12],mt=v[13],pt=v[14],Zt=v[15];return[V*B+Y*it+P*lt+K*ut,V*O+Y*nt+P*at+K*mt,V*A+Y*ot+P*ct+K*pt,V*st+Y*rt+P*dt+K*Zt,M*B+H*it+I*lt+F*ut,M*O+H*nt+I*at+F*mt,M*A+H*ot+I*ct+F*pt,M*st+H*rt+I*dt+F*Zt,z*B+N*it+Q*lt+j*ut,z*O+N*nt+Q*at+j*mt,z*A+N*ot+Q*ct+j*pt,z*st+N*rt+Q*dt+j*Zt,U*B+D*it+_*lt+E*ut,U*O+D*nt+_*at+E*mt,U*A+D*ot+_*ct+E*pt,U*st+D*rt+_*dt+E*Zt]}function m4_toNormal4(a){const v=a[0],V=a[1],Y=a[2],P=a[4],K=a[5],M=a[6],H=a[8],I=a[9],F=a[10],z=K*F-I*M,N=P*F-H*M,Q=P*I-H*K,j=v*z+V*-N+Y*Q;return[z/j,-N/j,Q/j,0,-(V*F-I*Y)/j,(v*F-H*Y)/j,-(v*I-H*V)/j,0,(V*M-K*Y)/j,-(v*M-P*Y)/j,(v*K-P*V)/j,0,0,0,0,1]}function q_identity(){return[0,0,0,1]}function q_magnitude(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3])}function q_normalize(a){const v=1/q_magnitude(a);return[a[0]*v,a[1]*v,a[2]*v,a[3]*v]}function q_conjugate(a){return[-a[0],-a[1],-a[2],a[3]]}function q_invert(a){return q_conjugate(a)}function q_axisAngle(a,v){const V=.5*v,Y=Math.sin(V),P=Math.cos(V);return[Y*a[0],Y*a[1],Y*a[2],P]}function q_lookAt(a,v,V){const Y=1e-5,P=v3_dot(a,V);if(Math.abs(P+1)<Y)return q_axisAngle(v,Math.PI);if(Math.abs(P-1)<Y)return[0,0,0,1];const K=Math.acos(P);return q_axisAngle(v3_normalize(v3_cross(a,V)),K)}function q_euler(a,v,V){a*=.5,v*=.5,V*=.5;const Y=Math.sin(a),P=Math.cos(a),K=Math.sin(v),M=Math.cos(v),H=Math.sin(V),I=Math.cos(V);return[Y*M*I-P*K*H,P*K*I+Y*M*H,P*M*H-Y*K*I,P*M*I+Y*K*H]}function q_pitch(a){const v=a[0],V=a[1],Y=a[2],P=a[3];return Math.atan2(2*v*P-2*V*Y,1-2*v*v-2*Y*Y)}function q_yaw(a){const v=a[0],V=a[1],Y=a[2],P=a[3];return Math.atan2(2*V*P-2*v*Y,1-2*V*V-2*Y*Y)}function q_roll(a){const v=a[0],V=a[1],Y=a[2],P=a[3];return Math.asin(2*v*V+2*Y*P)}function q_dot(a,v){return a[0]*v[0]+a[1]*v[1]+a[2]*v[2]+a[3]*v[3]}function q_multiply(a,v){const V=a[0],Y=a[1],P=a[2],K=a[3],M=v[0],H=v[1],I=v[2],F=v[3];return[M*K+H*P-I*Y+F*V,H*K-M*P+F*Y+I*V,I*K+F*P+M*Y-H*V,F*K-I*P-H*Y-M*V]}function q_slerp(a,v,V){const Y=a[0],P=a[1],K=a[2],M=a[3];let H,I,F,z,N,Q=v[0],j=v[1],U=v[2],D=v[3];I=Y*Q+P*j+K*U+M*D,I<0&&(I=-I,Q=-Q,j=-j,U=-U,D=-D),1-I>1e-5?(H=Math.acos(I),F=Math.sin(H),z=Math.sin((1-V)*H)/F,N=Math.sin(V*H)/F):(z=1-V,N=V);return[z*Y+N*Q,z*P+N*j,z*K+N*U,z*M+N*D]}function q_equals(a,v,V=0){return V?Math.abs(q_dot(a,v))+V>=1:a[0]===v[0]&&a[1]===v[1]&&a[2]===v[2]&&a[3]===v[3]}function q_isZero(a){return 0===a[0]&&0===a[1]&&0===a[2]}},2744:(a,v,V)=>{V.d(v,{M6:()=>IsLoaded,dO:()=>LoadFont,r6:()=>LoadImage});const Y=new Map;let P=0;function IsLoaded(a){const v=Y.get(a);return v&&v.isLoaded}function LoadFont(a,v){let V;if(Y.has(a))V=Y.get(a);else{const v="font"+P++;V={name:v,element:new FontFace(v,"url("+a+")"),isLoaded:!1,callbacks:[]},Y.set(a,V),V.element.load().then((()=>{document.fonts.add(V.element),V.isLoaded=!0,V.callbacks.forEach((a=>a())),V.callbacks=[]}),(()=>console.log("Font "+a+" not found!")))}return v&&!V.isLoaded&&V.callbacks.push(v),V.name}function LoadImage(a,v){let V;return Y.has(a)?(V=Y.get(a),v&&!V.isLoaded?(V.callbacks.push(v),null):V.element):(V={element:new Image,isLoaded:!1,callbacks:[]},Y.set(a,V),V.element.onload=()=>{V.isLoaded=!0,V.callbacks.forEach((a=>a(V.element))),V.callbacks=[]},V.element.onerror=()=>console.log("Image "+a+" not found!"),V.element.src=a,v&&!V.isLoaded&&V.callbacks.push(v),null)}}}]);